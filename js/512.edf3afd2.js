"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[512],{9512:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});s(4114);var r=s(6768),i=s(4232);const a=e=>((0,r.Qi)("data-v-61f85660"),e=e(),(0,r.jt)(),e),o={class:"archive_task"},l={class:"modal_header"},n={class:"header_style modal_header_title"},c={class:"overlay_contents overlay_contents_text",ref:"contents"},h=a((()=>(0,r.Lk)("br",null,null,-1))),u=a((()=>(0,r.Lk)("br",null,null,-1))),d=["href"],_={class:"bottom_actions"},f=a((()=>(0,r.Lk)("div",{class:"flex_spacer"},null,-1))),v=["disabled"];function k(e,t,s,a,k,m){return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("header",l,[(0,r.Lk)("h2",n,"Confirm "+(0,i.v_)(k.type)+" archive",1)]),(0,r.Lk)("div",c,[(0,r.eW)(" Are you sure you want to archive the "+(0,i.v_)(k.type)+(0,i.v_)(k.title?` "${k.title}"`:"")+" you were editing? ",1),h,u,(0,r.eW)(" This action is currently irreversible, and will permanently remove it from "),(0,r.Lk)("a",{class:"class_name button_pointer_text",href:`/view/${m.class_obj.ref}`,onClick:t[0]||(t[0]=t=>{t.preventDefault(),e.$router.push({name:"viewclass",params:{ref:m.class_obj.ref},query:e.$route.query})}),style:(0,i.Tr)({"--color-class":m.class_obj.color,"--color-class-alt":m.class_obj.color+"2d"})},(0,i.v_)(e.$store.class_text(m.class_obj)),13,d),(0,r.eW)(". ")],512),(0,r.Lk)("div",_,[k.ready?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"close_action click_escape",onClick:t[1]||(t[1]=(...e)=>m.edit_task&&m.edit_task(...e))}," Continue Editing ")):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"close_action click_escape",onClick:t[2]||(t[2]=t=>e.$emit("close"))},"Close")),f,(0,r.Lk)("button",{class:(0,i.C4)(["continue_action",{loading_bg:k.loading}]),onClick:t[3]||(t[3]=(...e)=>m.archive_task&&m.archive_task(...e)),disabled:!k.ready}," Confirm ",10,v)])])}var m=s(6471),p=s.n(m),y=s(4186),$={name:"ArchiveTask",emits:["close"],mixins:[p()],data(){return{ready:!1,loading:!0,ref:this.$route?.params?.ref,type:this.$route?.params?.type||"task",title:this.$route?.query?.title}},computed:{class_obj(){if(!this.ref)return{};let e=this.$store?.classes,[t,s]=this.ref.split("/"),r=t+this.$store.ORG_DOMAIN,i=[r,s].join("/");if(!e||!r||!s||!i)return{};let a=e.find((e=>e.id===i))||{};return a&&(a.ref=[t,s].join("~")),a}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!0,childTransitions:!0}),this.$router.replace({...this.$route,query:{...this.$route.query,title:void 0}}),this.ref&&this.type?(this.ref=this.ref.split("~").join("/"),3!==this.ref.split("/").length?(new y.MY("Couldn't find that task",2e3),this.$emit("close")):(this.ready=!0,this.loading=!1)):(new y.MY("There was no task provided",2e3),this.$emit("close"))},methods:{archive_task(){this.loading=!0,this.$store.archive_task(this.ref).then((()=>{new y.rQ(`Archived ${this.type}`,3e3),this.$emit("close")})).catch((e=>{new y.Qp(`Error removing ${this.type}`,e,3e3),this.$status.error("âš  Error removing task",e),this.loading=!1}))},edit_task(){this.$router.push({name:"edit",params:{ref:this.$route?.params?.ref},query:this.$route.query})}}},b=s(1241);const C=(0,b.A)($,[["render",k],["__scopeId","data-v-61f85660"]]);var w=C}}]);
//# sourceMappingURL=512.edf3afd2.js.map