{"version":3,"file":"js/770.61ab333a.js","mappings":"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","sources":["webpack://mvtime/./src/views/Home/JoinModal.vue","webpack://mvtime/./src/views/Home/JoinModal.vue?3e0e","webpack://mvtime/./src/assets/img/art/working/ sync ^\\.\\/.*\\.png$"],"sourcesContent":["<template>\n  <main class=\"onboardng\" ref=\"modal\" id=\"join_modal\">\n    <div class=\"overlay_contents_wrapper nopad\">\n      <img class=\"modal_art_part contrast_small_dark\" v-lazy=\"source\" />\n      <div\n        v-if=\"page == 'form'\"\n        class=\"overlay_contents overlay_contents__page overlay_more_pad_horizontal pad_overlay\"\n      >\n        <h2 class=\"header_style modal_header_title overlay_title\">\n          Join the {{ $env.VUE_APP_BRAND_NAME_SHORT }} Beta\n        </h2>\n        <div class=\"overlay_inputs inputs_column\">\n          <input\n            ref=\"name\"\n            class=\"styled_input styled_obj\"\n            type=\"text\"\n            v-model=\"form.name\"\n            placeholder=\"Your Name\"\n            enterkeyhint=\"next\"\n            @keydown.enter=\"$refs.grade.focus()\"\n          />\n          <select\n            class=\"styled_input styled_obj\"\n            v-model=\"form.grade\"\n            ref=\"grade\"\n            enterkeyhint=\"next\"\n            @keydown.enter=\"$refs.detail.focus()\"\n          >\n            <option class=\"placeholder_text\" value=\"\" hidden disabled selected>Campus Role</option>\n            <option\n              v-for=\"grade in JSON.parse($env.VUE_APP_ORG_GRADES || default_grades)\"\n              :key=\"grade[0]\"\n              :value=\"grade[0]\"\n            >\n              {{ grade[1] }}\n            </option>\n            <option class=\"break_text\" value=\"\" disabled>-----</option>\n            <option value=\"teacher\">{{ $env.VUE_APP_ORG_TEACHER_GRADE || \"Teacher\" }}</option>\n          </select>\n          <textarea\n            ref=\"detail\"\n            enterkeyhint=\"done\"\n            @keydown.enter=\"action\"\n            v-model=\"form.usage\"\n            class=\"styled_input styled_textarea styled_obj\"\n            type=\"text\"\n            :placeholder=\"`How will you use ${$env.VUE_APP_BRAND_NAME_SHORT} (optional)`\"\n          />\n        </div>\n      </div>\n      <div v-else class=\"overlay_contents pad_overlay overlay_contents__page img_container__page\">\n        <img class=\"auth_load_icon loading_icon\" alt=\"Loading Icon\" />\n      </div>\n    </div>\n    <div class=\"bottom_actions\">\n      <button v-if=\"page == 'form'\" class=\"close_action click_escape\" @click=\"$emit('close')\">\n        {{ page == \"form\" && form.name == \"\" && form.grade == \"\" ? \"Close\" : \"Cancel\" }}\n      </button>\n      <div class=\"flex_spacer\"></div>\n      <button class=\"continue_action\" :disabled=\"!contents_ready\" @click=\"action\">\n        {{ continue_text[0] }}<span class=\"desktop_only\">{{ continue_text[1] }}</span>\n      </button>\n    </div>\n  </main>\n</template>\n\n<script>\nimport \"@/assets/style/overlay.css\";\nimport { WarningToast } from \"@svonk/util\";\nexport default {\n  emits: [\"close\"],\n  data() {\n    return {\n      default_grades: `[[\"student\", \"Student\"]]`,\n      page: \"form\",\n      form: {\n        name: \"\",\n        grade: \"\",\n        usage: \"\",\n      },\n    };\n  },\n  computed: {\n    contents_ready() {\n      // filled out name\n      if (this.page == \"form\") {\n        return this.form.name.length >= 2 && this.form.grade != \"\";\n      } else {\n        return false;\n      }\n    },\n    continue_text() {\n      if (this.page == \"form\") {\n        return !this.$store?.user ? [\"Continue\", \" to Sign-Up\"] : [\"Save\"];\n      } else {\n        return !this.$store?.user ? [\"Authenticating\", \"...\"] : [\"Saving...\", \"\"];\n      }\n    },\n    source() {\n      try {\n        return require(`@/assets/img/art/working/${this.combo}.png`);\n      } catch (e) {\n        return \"err\";\n      }\n    },\n    combo() {\n      let stored = window.localStorage.getItem(\"home_art\");\n      let stored_variant = stored ? stored.split(\"s\")[1][0] : null;\n\n      return \"ls\" + stored_variant;\n    },\n  },\n  mounted() {\n    // if user is logged in and has completed, close\n    if (this.$store.done_join_form) {\n      // exit\n      this.$emit(\"close\");\n      new WarningToast(\"You've already joined!\", 2000);\n    }\n    // if user is logged in, use their name to prefill\n    if (this.$store?.user) {\n      this.form.name = this.$store.user?.displayName || \"\";\n    }\n  },\n  methods: {\n    action() {\n      if (!this.contents_ready) {\n        return;\n      }\n      if (this.page == \"form\") {\n        // move to auth page\n        // update router so that this page will redirect to /portal/onboarding\n        // if no redirect, make it onboarding\n        if (!this.$route?.query?.redirect) {\n          this.$router.replace({ name: \"join\", query: { redirect: \"/portal\" } });\n        }\n        this.page = \"auth\";\n        this.$status.log(\"📝 Saving join form:\", this.form);\n        // trigger auth if needed\n        if (!this.$store?.user) {\n          this.$status.log(\"🔑 Triggering auth\");\n          // trigger auth, and once done, save form data and close\n          this.$store\n            .login()\n            .then(() => {\n              this.$store.save_join_form(this.form);\n              this.check_store_and_close();\n            })\n            .catch((err) => {\n              this.$status.error(\"💾 Error logging in:\", err);\n              new WarningToast(\"Couldn't complete authentication; \" + err, 2000);\n              this.page = \"form\";\n            });\n        } else {\n          // save form data and close\n          this.$store.save_join_form(this.form);\n          this.check_store_and_close();\n        }\n      }\n    },\n    check_store_and_close() {\n      // close if join_form is set\n      if (this.$store.done_join_form) {\n        this.$emit(\"close\");\n      }\n    },\n  },\n  watch: {\n    // listen for any changes to store\n    \"$store.done_join_form\": {\n      handler() {\n        this.check_store_and_close();\n      },\n      deep: true,\n    },\n    \"$store.user\": {\n      handler() {\n        if (!this.$store?.user) {\n          this.$router.push({ name: \"home\", query: { redirect: this.$route.query?.redirect } });\n          return;\n        }\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style scoped>\nimg.modal_art_part {\n  display: none;\n  user-select: none;\n  pointer-events: none;\n}\n@media (min-width: 800px) {\n  main#join_modal {\n    max-width: 700px;\n    max-height: 470px;\n  }\n  img.modal_art_part {\n    display: block;\n  }\n}\n.overlay_contents {\n  border: none;\n  justify-content: center;\n  align-items: stretch;\n  display: flex;\n  flex-flow: column;\n}\n.bottom_actions {\n  border-top: solid var(--thickness-overlay-border) var(--color-overlay-border);\n}\n.overlay_contents_wrapper {\n  display: flex;\n  flex-direction: row;\n  justify-content: stretch;\n  align-items: stretch;\n  max-height: 100%;\n}\nh2.overlay_title {\n  text-align: center;\n  font-weight: 700;\n  margin-bottom: 20px;\n}\n.modal_art_part {\n  height: 400px;\n  width: 270px;\n}\n.modal_art_part[lazy=\"loaded\"] {\n  object-fit: scale-down;\n  object-position: bottom left;\n}\n.inputs_column {\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  margin: 0;\n}\n.inputs_column .styled_input {\n  width: 100%;\n  margin: 0;\n  margin-bottom: calc(var(--padding-overlay) / 2);\n}\n.img_container__page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.auth_load_icon {\n  width: 100%;\n  height: 0;\n  flex-basis: 240px;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\nselect:has(.placeholder_text[selected]) {\n  color: var(--color-placeholder);\n}\n</style>\n","import { render } from \"./JoinModal.vue?vue&type=template&id=b34986d8&scoped=true\"\nimport script from \"./JoinModal.vue?vue&type=script&lang=js\"\nexport * from \"./JoinModal.vue?vue&type=script&lang=js\"\n\nimport \"./JoinModal.vue?vue&type=style&index=0&id=b34986d8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b34986d8\"]])\n\nexport default __exports__","var map = {\n\t\"./ls0.png\": 1201,\n\t\"./ls1.png\": 9160,\n\t\"./ls2.png\": 1139,\n\t\"./ls3.png\": 1306,\n\t\"./ls4.png\": 3365,\n\t\"./ls5.png\": 1740,\n\t\"./ls6.png\": 8775\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6553;"],"names":["class","ref","id","key","_createElementVNode","value","hidden","disabled","selected","alt","_hoisted_13","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$options","source","$data","page","_hoisted_4","_hoisted_5","_toDisplayString","_ctx","$env","VUE_APP_BRAND_NAME_SHORT","_hoisted_6","type","_cache","$event","form","name","placeholder","enterkeyhint","onKeydown","_withKeys","$refs","grade","focus","detail","_hoisted_7","_Fragment","_renderList","JSON","parse","VUE_APP_ORG_GRADES","default_grades","_hoisted_8","_hoisted_9","_hoisted_10","VUE_APP_ORG_TEACHER_GRADE","args","action","usage","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","onClick","$emit","_createCommentVNode","_hoisted_16","contents_ready","_createTextVNode","continue_text","_hoisted_18","_hoisted_17","emits","data","computed","this","length","$store","user","require","combo","e","stored","window","localStorage","getItem","stored_variant","split","mounted","done_join_form","WarningToast","displayName","methods","$route","query","redirect","$router","replace","$status","log","save_join_form","check_store_and_close","login","then","catch","err","error","watch","handler","deep","push","__exports__","render","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","keys","Object","resolve","module","exports"],"sourceRoot":""}