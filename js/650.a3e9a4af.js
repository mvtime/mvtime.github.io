"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[650],{6910:function(s,e,a){a.d(e,{A:function(){return g}});var t=a(6768),l=a(4232);const i=["title"],n=(0,t.Lk)("div",{class:"task_card_icon_container"},[(0,t.Lk)("div",{class:"task_card_icon_container__img"})],-1),o=[n],r={class:"task_card_details"},c={class:"task_card_details__title"},_={class:"task_card_details__extended"},d={class:"task_card_details__extended__date"},u={class:"task_card_details__extended__type"};function p(s,e,a,n,p,h){return(0,t.uX)(),(0,t.CE)("a",{class:"task_card",style:(0,l.Tr)({"--color-calendar-task":a.task.color})},[(0,t.Lk)("div",{class:"task_card_icon",title:a.task.class_name},o,8,i),(0,t.Lk)("div",r,[(0,t.Lk)("div",c,(0,l.v_)(a.task.name),1),(0,t.Lk)("div",_,[(0,t.Lk)("span",d,(0,l.v_)(a.task.date.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})),1),(0,t.eW)(" Â |Â  "),(0,t.Lk)("span",u,(0,l.v_)(h.type_full),1)])])],4)}var h={name:"ExamCard",props:{task:{type:Object,required:!0}},computed:{type_full(){return this.$magic.type_full(this.task.type)}}},m=a(1241);const k=(0,m.A)(h,[["render",p]]);var g=k},3650:function(s,e,a){a.r(e),a.d(e,{default:function(){return ls}});var t=a(6768),l=a(4232);const i=s=>((0,t.Qi)("data-v-7e5fa32c"),s=s(),(0,t.jt)(),s),n={class:"viewclass"},o={class:"modal_header",ref:"title"},r=i((()=>(0,t.Lk)("h2",{class:"header_style modal_header_title"},"View class details",-1))),c=[r],_={ref:"contents",class:"overlay_contents"},d={key:0,ref:"text_contents"},u={class:"spaced_contents"},p={class:"styled_obj"},h=i((()=>(0,t.Lk)("span",{class:"styled_line__label"},"Class:",-1))),m=i((()=>(0,t.Lk)("span",{class:"styled_line__separator"},null,-1))),k={class:"styled_line__value"},g=["href"],v={class:"styled_obj"},y=i((()=>(0,t.Lk)("span",{class:"styled_line__label"},"Period:",-1))),f=i((()=>(0,t.Lk)("span",{class:"styled_line__separator"},null,-1))),b={class:"styled_line__value"},$={class:"styled_obj"},L=i((()=>(0,t.Lk)("span",{class:"styled_line__label"},"Name:",-1))),C=i((()=>(0,t.Lk)("span",{class:"styled_line__separator"},null,-1))),j={class:"styled_line__value"},w={class:"styled_obj"},E=i((()=>(0,t.Lk)("span",{class:"styled_line__label"},"Description:",-1))),x=i((()=>(0,t.Lk)("span",{class:"styled_line__separator"},null,-1))),A=["innerHTML"],X={class:"styled_obj upcoming_section",ref:"upcoming"},M=i((()=>(0,t.Lk)("span",{class:"styled_line__label"},"Upcoming:",-1))),I=i((()=>(0,t.Lk)("span",{class:"styled_line__separator"},null,-1))),N={key:0,class:"load_text"},q={key:1,class:"upcoming_tasks_container"},D={key:0,class:"upcoming_tasks_loading"},O=i((()=>(0,t.Lk)("img",{alt:"Loading Icon",class:"loading_icon",src:"/assets/loading.svg"},null,-1))),S=[O],T={key:1,class:"upcoming_tasks"},P={key:2},R=i((()=>(0,t.Lk)("div",{class:"overlay_contents_text"}," Information is provided by teachers and volunteer students, and may not always be correct ",-1))),Y={key:1,ref:"loading_contents",alt:"Loading Icon",class:"loading_icon"},V={class:"bottom_actions"},H=i((()=>(0,t.Lk)("div",{class:"flex_spacer"},null,-1))),Q=["disabled"],U=["disabled"],B=["disabled"];function G(s,e,a,i,r,O){const G=(0,t.g2)("ExamCard");return(0,t.uX)(),(0,t.CE)("main",n,[(0,t.Lk)("header",o,c,512),(0,t.Lk)("div",_,[r.ready?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("div",u,[(0,t.Lk)("div",p,[h,m,(0,t.Lk)("span",k,[(0,t.Lk)("a",{class:"class_name button_pointer_text",href:`/view/${this.$route.params.ref}`,onClick:e[0]||(e[0]=s=>s.preventDefault()),style:(0,l.Tr)({"--color-class":r.class_obj.color,"--color-class-alt":r.class_obj.color+"2d"})},"P"+(0,l.v_)(r.class_obj.period)+" - "+(0,l.v_)(r.class_obj.name),13,g)])]),(0,t.Lk)("div",v,[y,f,(0,t.Lk)("span",b,(0,l.v_)(r.class_obj.period)+" (Schedules "+(0,l.v_)(r.schedules[r.class_obj.period%2].join(", "))+")",1)]),(0,t.Lk)("div",$,[L,C,(0,t.Lk)("span",j,(0,l.v_)(r.class_obj.name),1)]),(0,t.Lk)("div",w,[E,x,(0,t.Lk)("span",{class:"styled_line__value",innerHTML:O.text||"Not Provided"},null,8,A)]),(0,t.Lk)("div",X,[M,I,(0,t.Lk)("span",{onClick:e[1]||(e[1]=(...s)=>O.get_upcoming&&O.get_upcoming(...s)),class:(0,l.C4)(["styled_line__value alt_bg",{loading_clickable:!r.upcoming&&!r.loading_upcoming,loading_bg:r.loading_upcoming}])},[r.upcoming||r.loading_upcoming?r.loading_upcoming?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",q,[r.loading_upcoming?((0,t.uX)(),(0,t.CE)("div",D,S)):r.upcoming&&r.upcoming.length?((0,t.uX)(),(0,t.CE)("div",T,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.upcoming,(s=>((0,t.uX)(),(0,t.Wv)(G,{class:"upcoming_tasks__task",task:s,key:s.name,href:`/view/${s.ref}`,onClick:e=>{e.preventDefault(),O.show_task(s.ref)}},null,8,["task","href","onClick"])))),128))])):((0,t.uX)(),(0,t.CE)("span",P,"No Upcoming Tasks"))])):((0,t.uX)(),(0,t.CE)("span",N,"Click to Load"))],2)],512)]),R],512)):((0,t.uX)(),(0,t.CE)("img",Y,null,512))],512),(0,t.Lk)("div",V,[(0,t.Lk)("button",{class:"close_action click_escape",onClick:e[2]||(e[2]=e=>s.$emit("close"))},"Close"),H,(0,t.Lk)("button",{class:"share_action primary_styled",onClick:e[3]||(e[3]=(...s)=>O.share_class&&O.share_class(...s)),disabled:!r.ready}," Share ",8,Q),O.editable?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"edit_action primary_styled",disabled:!r.ready,onClick:e[4]||(e[4]=(...s)=>O.edit_class&&O.edit_class(...s))}," Edit ",8,U)):s.$store.user&&r.class_obj?((0,t.uX)(),(0,t.CE)("button",{key:1,class:(0,l.C4)(["join_leave_action primary_styled",{click_escape:O.joinable}]),disabled:!r.ready,onClick:e[5]||(e[5]=s=>{O.joinable?O.join_class():O.leave_class()})},(0,l.v_)(O.joinable?"Join":"Leave"),11,B)):(0,t.Q3)("",!0)])])}a(4114),a(4603),a(7566),a(8721);var W=a(4186),F=a(6471),J=a.n(F),K=a(5255),z=a.n(K),Z=a(6910);let ss=new(z().Converter);var es={name:"ViewClassView",emits:["close"],mixins:[J()],components:{ExamCard:Z.A},data(){return{class_obj:null,ready:!1,loading_upcoming:!1,upcoming:null,schedules:[["A","G","C","D","and H"],["A","G","B","E","and I"]]}},computed:{text(){return this.class_obj?.description&&ss.makeHtml(this.class_obj?.description)},joinable(){return this.$store.user&&this.class_obj&&!this.$store?.active_doc?.classes?.includes(this.$store.ref_to_path(this.$route.params.ref))},editable(){return this.$store.is_teacher&&this.$store.user&&this.class_obj&&this.$route.params.ref&&this.$route.params.ref.split("~")[0]==this.$store.active_doc.email.replace(this.$store.ORG_DOMAIN,"")}},mounted(){this.$smoothReflow({el:this.$refs.contents,hideOverflow:!1,childTransitions:!1}),this.$smoothReflow({el:this.$refs.title,hideOverflow:!0}),this.get_class()},methods:{async share_class(){let s=new URL(`https://${this.$env.VUE_APP_BRAND_DOMAIN__VIEWCLASS}/`+this.$route.params.ref);navigator.share?navigator.share({title:this.class_obj.name,text:`Check out ${this.class_obj.name||"this class"} on ${this.$env.VUE_APP_BRAND_SHORT_NAME}!`,url:s.href}).then((()=>new W.rQ("Opened share dialog",1e3))).catch((s=>this.$status.error("ðŸ”¥ Error sharing",s))):navigator.clipboard?(navigator.clipboard.writeText(s.href),new W.MY("Sharing not supported, copied link to clipboard",2e3)):new W.MY("Sharing and copying not supported, sorry",2e3)},edit_class(){this.$router.push({name:"editclass",params:{ref:this.$route?.params?.ref},query:this.$route.query})},join_class(){this.$router.push({name:"refclass",params:{ref:this.$route?.params?.ref},query:this.$route.query})},leave_class(){this.$router.push({name:"leave",params:{ref:this.$route?.params?.ref},query:this.$route.query})},async get_upcoming(){null==this.upcoming&&(this.loading_upcoming=!0,this.$store.upcoming_from_ref(this.$route.params.ref.split("~").join("/"),this.class_obj).then((s=>{this.upcoming=s,this.loading_upcoming=!1})).catch((s=>{new W.MY("Couldn't get upcoming tasks",2e3),this.$status.error("âš  Couldn't get upcoming tasks",s),this.loading_upcoming=!1})))},async get_class(){if(!this.$route.params.ref)return new W.MY("No class specified",1500),void this.$emit("close");const s=this.$route.params.ref.split("~").join("/");return s?2!=s.split("/").length?(new W.MY("Invalid class specified",1500),void this.$emit("close")):void this.$store.class_from_ref(s).then((s=>{s?(this.class_obj=s,this.ready=!0):(new W.MY("Couldn't find that class",2e3),this.$emit("close"))})).catch((s=>{new W.Qp("Error getting class",s,1500),this.$status.error("âš  Error getting class",s),this.$emit("close")})):(new W.MY("No class specified",1500),void this.$emit("close"))},show_task(s){this.$router.push({name:"viewtask",params:{ref:s},query:this.$route.query})}}},as=a(1241);const ts=(0,as.A)(es,[["render",G],["__scopeId","data-v-7e5fa32c"]]);var ls=ts}}]);
//# sourceMappingURL=650.a3e9a4af.js.map