{"version":3,"file":"js/main.8c2e2848.js","mappings":"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","sources":["webpack://mvtime/./src/common/index.ts","webpack://mvtime/./src/firebase/index.ts","webpack://mvtime/./src/App.vue","webpack://mvtime/./src/components/Modal/LogoutModal.vue","webpack://mvtime/./src/components/Modal/LogoutModal.vue?e6d7","webpack://mvtime/./src/components/Modal/ShortcutsModal.vue","webpack://mvtime/./src/components/Modal/ShortcutsModal.vue?c37e","webpack://mvtime/./src/components/Tutorial/TutorialBlurb.vue","webpack://mvtime/./src/components/Tutorial/TutorialBlurb.vue?f1d0","webpack://mvtime/./src/App.vue?7ccd","webpack://mvtime/./src/registerServiceWorker.ts","webpack://mvtime/./src/store/shortcuts.ts","webpack://mvtime/./src/store/notifications.ts","webpack://mvtime/./src/main.ts","webpack://mvtime/./src/router/index.ts","webpack://mvtime/./src/store/index.ts","webpack://mvtime/./src/store/magic.ts","webpack://mvtime/./src/components/Modal/Modal.vue","webpack://mvtime/./src/components/Modal/Modal.vue?cdd6","webpack://mvtime/./src/components/Modal/OverlayWrapper.vue","webpack://mvtime/./src/components/Modal/OverlayWrapper.vue?608b","webpack://mvtime/webpack/bootstrap","webpack://mvtime/webpack/runtime/chunk loaded","webpack://mvtime/webpack/runtime/compat get default export","webpack://mvtime/webpack/runtime/define property getters","webpack://mvtime/webpack/runtime/ensure chunk","webpack://mvtime/webpack/runtime/get javascript chunk filename","webpack://mvtime/webpack/runtime/get mini-css chunk filename","webpack://mvtime/webpack/runtime/global","webpack://mvtime/webpack/runtime/hasOwnProperty shorthand","webpack://mvtime/webpack/runtime/load script","webpack://mvtime/webpack/runtime/make namespace object","webpack://mvtime/webpack/runtime/publicPath","webpack://mvtime/webpack/runtime/css loading","webpack://mvtime/webpack/runtime/jsonp chunk loading","webpack://mvtime/webpack/startup"],"sourcesContent":["/**\n * Holds common functions used throughout the application (mostly for debugging and logging)\n * @file common/index.ts\n * @namespace common\n */\nvar _a;\nexport var LogTone;\n(function (LogTone) {\n    LogTone[\"Log\"] = \"log\";\n    LogTone[\"Info\"] = \"info\";\n    LogTone[\"Debug\"] = \"debug\";\n    LogTone[\"Warn\"] = \"warn\";\n    LogTone[\"Error\"] = \"error\";\n})(LogTone || (LogTone = {}));\nlet tone = LogTone.Info;\nlet log = [], log_time = new Date();\n/** Save log to file */\nfunction save(content, download = \"log.txt\") {\n    let a = window.document.createElement(\"a\");\n    a.href = window.URL.createObjectURL(new Blob([content], { type: \"text/plain\" }));\n    a.download = download;\n    a.click();\n}\nfunction format_stream(stream) {\n    return stream.length ? stream.map((line) => `${line.time} [${line.type}]: ${JSON.stringify(line.message)}`).join(\"\\n\\n\") : `No log entries found; last cleared ${log_time.toISOString()}`;\n}\n/** Imperfect helper for _status.log() */\nfunction getFirstNonStandardCharacter(str) {\n    try {\n        const match = str.match(/^([\\P{L}\\p{Extended_Pictographic}]|(?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]))/u);\n        return match ? match[0] : null;\n    }\n    catch (err) {\n        return null;\n    }\n}\n/**\n * @function _log\n * @description Log function, takes any number of arguments. If the first character is nonstandard and followed by a space, it'll use that as a tag\n * @param {any} args - Any number of arguments\n * @note This function is not exported, but is used by _status. It should be used with a tone through a bind, like _log.bind(\"info\")\n * @example _log(\"Hello world!\");\n * */\nfunction _log(...args) {\n    log.push({ time: Date.now(), message: arguments[0], type: this || LogTone.Log });\n    if (arguments.length == 0)\n        return;\n    // check for very large messages and warn them in the console with the first 100 characters (make sure this catches the message, even if it's not the first argument, or in a object format)\n    let extras = [\n        `%c${process.env.VUE_APP_BRAND_NAME_SHORT}`,\n        `background:#${process.env.VUE_APP_THEME_CONSOLE_COLOR_BG || \"272727\"};color:#${process.env.VUE_APP_THEME_CONSOLE_COLOR_TEXT || \"C9B092\"};padding:7px 12px;font-family:Lato,sans-serif;font-weight:bold;font-size:1.3em`,\n    ];\n    // check if first character is emoji, followed by space\n    if (getFirstNonStandardCharacter(args[0]) != null) {\n        // remove the first two characters from the first argument\n        extras[0] += \" %c\" + getFirstNonStandardCharacter(args[0]);\n        extras[2] = `background:#${process.env.VUE_APP_THEME_CONSOLE_COLOR_TEXT || \"C9B092\"}aa;background:#ffffffaa;color:#${process.env.VUE_APP_THEME_CONSOLE_COLOR_BG || \"272727\"};padding:3px 5px;margin-left:5px;border-radius:5px;font-family:monospace !important;font-weight:bold;font-size:1.25em`;\n        args[0] = args[0].substring(2).trimStart();\n    }\n    try {\n        console[this](...extras, ...args);\n    }\n    catch (err) {\n        console.log(\"⚠ Couldn't override console.log\", err);\n        console.log(...extras, ...args);\n    }\n}\n/**\n * @object _status\n * @property {Function} print - Prints a message to the console with the current tone\n * @property {Function} log - Logs a message to the console\n * @property {Function} info - Logs an info message to the console\n * @property {Function} debug - Logs a debug message to the console\n * @property {Function} warn - Logs a warning message to the console\n * @property {Function} error - Logs an error message to the console\n * @property {Function} _getTone - Gets the current tone\n * @property {Function} _setTone - Sets the current tone\n * @property {Function} _resetTone - Resets the current tone to \"info\"\n * @example _status.log(\"Hello world!\");\n */\nconst _status = {\n    print: _log.bind(tone),\n    log: _log.bind(LogTone.Log),\n    info: _log.bind(LogTone.Info),\n    debug: _log.bind(LogTone.Debug),\n    warn: _log.bind(LogTone.Warn),\n    error: _log.bind(LogTone.Error),\n    clearStream: () => {\n        log = [];\n        console.clear();\n        log_time = new Date();\n    },\n    getStream: (types = []) => {\n        return types && types.length > 0 ? log.filter((entry) => types.includes(entry.type)) : log;\n    },\n    textStream(types = []) {\n        return format_stream(_status.getStream(types));\n    },\n    saveStream: (id = \"manual\") => {\n        let date = new Date(), data = _status.getStream();\n        date.setSeconds(0, 0);\n        downloadLogData(data, date, id);\n    },\n    _getTone: () => {\n        return tone;\n    },\n    _setTone: (new_tone) => {\n        tone = new_tone;\n    },\n    _resetTone: () => {\n        tone = LogTone.Info;\n    },\n};\n/**\n * @function downloadLogData\n * @description downloads a file with given log data\n * */\nfunction downloadLogData(data, date, id = \"manual\") {\n    try {\n        save(format_stream(data), `${process.env.VUE_APP_BRAND_NAME_SHORT}-log ${id} ${date.toISOString().split(\":00.0\")[0].replace(\"T\", \" \").replace(\":\", \"h\")}m.log`);\n        _status.log(\"📜 Saved log stream to disk; run `_status.clearStream()` to purge if local\");\n    }\n    catch (err) {\n        _status.error(\"📜 Couldn't save log stream\", err);\n    }\n}\n/**\n * @function _statuslog\n * @description A bound version of _log with the tone set to \"info\"\n * @example _statuslog(\"Hello world!\");\n * */\nconst _statuslog = _log.bind(LogTone.Info);\ntry {\n    const version = ((_a = document.getElementById(\"version\")) === null || _a === void 0 ? void 0 : _a.textContent) || \"< not found >\";\n    _status.debug(`🚀 Loaded into ${process.env.NODE_ENV} build @ version [${version}]`);\n    _status.log(\"📜 Initialized logger\");\n    window._status = _status;\n}\ncatch (err) {\n    _status.log(\"⚠ Couldn't set window._status\", err);\n}\n/* Fixes for safari date handling (convert date strings to acceptable format) */\n/**\n * @function compatDateObj\n * @description Converts a date string to a Date object (in a format that Safari can handle)\n * @param {String} date\n * @returns {Date}\n */\nfunction compatDateObj(date) {\n    if (typeof date != \"string\")\n        return date;\n    return new Date(date.replace(/-/g, \"/\"));\n}\n/**\n * @function msToTime\n * @description Converts milliseconds to hours:minutes:seconds timestamp; only includes hours if non-zero\n * @param {Number} ms\n * @returns {String}\n */\nfunction msToTime(ms) {\n    const seconds = Math.floor((ms / 1000) % 60), minutes = Math.floor((ms / (1000 * 60)) % 60), hours = Math.floor((ms / (1000 * 60 * 60)) % 24);\n    return (hours > 0 ? hours + \":\" + (minutes < 10 ? \"0\" : \"\") : \"\") + `${minutes}:${seconds < 10 ? \"0\" : \"\"}${seconds}`;\n}\nexport { _statuslog, _status, compatDateObj, msToTime, downloadLogData };\n","// Path: firebase/index.ts\n// import firebase\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore, onSnapshot, doc } from \"firebase/firestore\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\n// firebase config\nconst firebaseConfig = {\n    apiKey: process.env.FIREBASE_apiKey,\n    authDomain: process.env.FIREBASE_authDomain,\n    projectId: process.env.FIREBASE_projectId,\n    storageBucket: process.env.FIREBASE_storageBucket,\n    messagingSenderId: process.env.FIREBASE_messagingSenderId,\n    appId: process.env.FIREBASE_appId,\n    measurementId: process.env.FIREBASE_measurementId,\n};\n// initialize firebases\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst analytics = getAnalytics(app);\nconst functions = getFunctions(app, process.env.FIREBASE_region);\n// export firebase\nexport { app, auth, db, analytics, functions, httpsCallable, authChangeAction, refreshTimeout };\n//TODO:TS update common and store to ts to fix below\n// handle auth updates (user login/logout) and set user data in store\nimport { useMainStore } from \"@/store\";\nimport { _status } from \"@/common\";\nimport router from \"@/router\";\nauth.onAuthStateChanged((user) => {\n    authChangeAction(user);\n});\nlet unsub, subscribed = false, timeout;\nfunction authChangeAction(user) {\n    const store = useMainStore();\n    if (user) {\n        store.set_user(user);\n        // unsubscribe from any prev\n        unsubscribe();\n        // if not signed in, exit\n        if (!store.user)\n            return;\n        // setup onSnapshot listener for user data\n        setupSnapshot(user.uid);\n        timeout = startTimeout();\n        // rewrite the above with firebase 9 functions\n    }\n    else {\n        store.clear();\n    }\n}\nfunction setupSnapshot(uid) {\n    _status.log(\"⬥ Setting up snapshot\");\n    if (!uid) {\n        _status.warn(\"⚠ No uid provided to setupSnapshot\");\n        return;\n    }\n    const store = useMainStore();\n    store.hide_timeout();\n    unsub = onSnapshot(doc(db, \"users\", uid), { includeMetadataChanges: true }, (listening_doc) => {\n        var _a;\n        if (listening_doc.metadata.hasPendingWrites) {\n            _status.log(\"⬥ Snapshot from local changes\");\n            return;\n        }\n        _status.log(\"⏷ Snapshot from remote\");\n        // check if doc exists\n        if (!listening_doc.exists()) {\n            store.create_doc();\n            return;\n        }\n        let listening_doc_data = listening_doc.data();\n        // set based on id\n        if (((_a = store === null || store === void 0 ? void 0 : store.user) === null || _a === void 0 ? void 0 : _a.uid) == listening_doc.id) {\n            // set the account_doc\n            store.account_doc = listening_doc_data;\n        }\n        else {\n            store.linked_account_doc = listening_doc_data;\n        }\n        // run fetch_classes() to update classes\n        // store.fetch_classes();\n    }, (err) => {\n        if (err.code == \"permission-denied\") {\n            _status.warn(\"⚠ Permission denied for snapshot, likely from logging out\");\n        }\n        else {\n            _status.error(\"⚠ Couldn't get snapshot from remote\", err);\n        }\n    });\n    subscribed = true;\n}\n// allow for unsubscribing from onSnapshot\nfunction unsubscribe(show_prompt = false) {\n    // clear timeout\n    clearTimeout(timeout);\n    let store = useMainStore();\n    if (show_prompt) {\n        store.show_timeout();\n    }\n    if (unsub) {\n        unsub();\n        _status.log(\"⬥ Unsubscribed from remote changes\");\n    }\n    subscribed = false;\n}\nfunction msToText(ms) {\n    // use modolo to get minutes and seconds\n    const minutes = Math.floor(ms / 1000 / 60);\n    const seconds = Math.floor((ms / 1000) % 60);\n    return ((minutes || !seconds ? `${minutes} minute${minutes != 1 ? \"s\" : \"\"}` : \"\") +\n        (seconds ? `${seconds} second${seconds != 1 ? \"s\" : \"\"}` : \"\"));\n}\nfunction startTimeout(delay = 1000 * 60 * 5) {\n    return window.setTimeout(() => {\n        _status.log(`⬥ Page unused for ${msToText(delay)}, removing onSnapshot listener`);\n        unsubscribe(true);\n    }, delay);\n}\nfunction refreshTimeout(delay) {\n    var _a;\n    const store = useMainStore();\n    store.hide_timeout();\n    if (!subscribed) {\n        // setup snapshot and pull data\n        setupSnapshot(store.personal_account ? (_a = store.account_doc) === null || _a === void 0 ? void 0 : _a.linked_to : store.user.uid);\n        // get class data / tasks again if \"/portal\" in path (check w/ router)\n        if (router.currentRoute.value && router.currentRoute.value.path.startsWith(\"/portal\")) {\n            _status.log(\"⬥ Refreshing class data\");\n            store.fetch_classes();\n        }\n        _status.log(\"⬥ Resubscribed to remote changes\");\n    }\n    clearTimeout(timeout);\n    timeout = startTimeout(delay);\n}\n","<template>\n  <main\n    id=\"themed_body\"\n    class=\"parent\"\n    :class=\"{ simplified: $store.simplified }\"\n    ref=\"app\"\n    :_theme=\"theme\"\n    @click=\"refreshTimeout\"\n    @keydown=\"refreshTimeout\"\n    @focus=\"refreshTimeout\"\n  >\n    <!-- Overlays -->\n    <OverlayWrapper\n      v-if=\"do_timeout && ($store.paused || animating)\"\n      ref=\"overlay\"\n      class=\"pause_modal_overlay\"\n      style=\"z-index: 104\"\n    >\n      <main class=\"pause_modal router_center_view\" ref=\"pause_modal\">\n        <header class=\"modal_header\">\n          <h2 class=\"header_style modal_header_title\">Session paused</h2>\n        </header>\n        <div ref=\"pause_contents\" class=\"overlay_contents\">\n          <div class=\"overlay_contents_text\">\n            Your session was inactive for an extended period of time and has been paused to conserve\n            resources.\n          </div>\n          <br />\n          <div class=\"overlay_contents_text\">\n            You can hide this message using the toggle in your account preferences.\n          </div>\n          <br />\n          <div class=\"overlay_contents_text\">\n            Please click anywhere to resume using {{ $env.VUE_APP_BRAND_NAME_SHORT }}.\n          </div>\n        </div>\n      </main>\n    </OverlayWrapper>\n    <OverlayWrapper\n      v-if=\"$store.logout_prompt\"\n      ref=\"logout_modal\"\n      @close=\"$store.logout_prompt = false\"\n      v-slot=\"scope\"\n      style=\"z-index: 103\"\n    >\n      <LogoutModal class=\"router_center_view\" @close=\"scope.close\" />\n    </OverlayWrapper>\n    <OverlayWrapper\n      v-if=\"show_shortcuts || animating_shortcuts\"\n      ref=\"shortcuts_overlay\"\n      v-slot=\"scope\"\n      @close=\"show_shortcuts = false\"\n      style=\"z-index: 102\"\n    >\n      <ShortcutsModal class=\"router_center_view\" ref=\"shortcuts_modal\" @close=\"scope.close\" />\n    </OverlayWrapper>\n    <!-- Tutorial -->\n    <TutorialBlurb\n      v-if=\"show_tutorial && $route.fullPath.startsWith('/portal')\"\n      :title=\"tutorial.title\"\n      :key=\"'tutorial'\"\n      :options=\"tutorial.options\"\n      :html=\"\n        tutorial.html ||\n        '<i style=text-align:center;width:100%;display:block>Not much to see here!</i>'\n      \"\n      :button_text=\"tutorial.next_text\"\n      :skip_text=\"tutorial.prev_text\"\n      :trackel=\"tutorial.el\"\n      @next=\"tutorial_nav(1)\"\n      @skip=\"tutorial_nav(-1)\"\n      @vue:unmounted=\"tutorial_page = 0\"\n      style=\"z-index: 101\"\n    />\n    <!-- Page Contents -->\n    <router-view></router-view>\n  </main>\n</template>\n\n<script>\n/**\n * The main App component, which is the parent of all other components, and mostly serves as a wrapper for the router-view, though it does apply the theme\n * @module App\n * @description The main App component, wrapper for Home or Portal Views.\n * @requires module:store/MainStore\n */\n// Elements\nimport OverlayWrapper from \"@/components/Modal/OverlayWrapper.vue\";\nimport LogoutModal from \"@/components/Modal/LogoutModal.vue\";\nimport ShortcutsModal from \"@/components/Modal/ShortcutsModal.vue\";\n// Stores\n// Global Scripts\nimport $ from \"jquery\";\nimport { SuccessToast, ErrorToast } from \"@svonk/util\";\n// Tutorial\nimport tutorial_pages from \"@/components/Tutorial/tutorial.json\";\nimport TutorialBlurb from \"@/components/Tutorial/TutorialBlurb.vue\";\n// Page\nexport default {\n  name: \"App\",\n  components: {\n    OverlayWrapper,\n    LogoutModal,\n    TutorialBlurb,\n    ShortcutsModal,\n  },\n  data() {\n    return {\n      platform: \"\",\n      isElectron: false,\n      animating: false,\n      animating_shortcuts: false,\n      tutorial_page: 0,\n      show_shortcuts: false,\n      shortcuts: [\n        {\n          key: \"Ctrl + Enter\",\n          description: \"Submit current form\",\n          top: true,\n        },\n        {\n          key: \"Escape\",\n          description: \"Close current modal\",\n          top: true,\n        },\n        {\n          key: \"Ctrl + \\\\\",\n          description: \"Switch light/dark theme\",\n          top: true,\n        },\n        {\n          key: \"Ctrl + !, Ctrl + 1\",\n          description: \"Report logs (check console)\",\n        },\n        {\n          key: \"Ctrl + '\",\n          description: \"Toggle simplified view\",\n          top: true,\n        },\n        {\n          key: \"Ctrl + / or Ctrl + ?\",\n          description: \"Toggle shortcuts menu\",\n          top: true,\n        },\n      ],\n    };\n  },\n  computed: {\n    do_timeout() {\n      return !this.$store?.account_doc?.prefs?.hide_timeout;\n    },\n    pageTitle() {\n      return document.title;\n    },\n    theme() {\n      return this.$store.get_theme;\n    },\n    show_tutorial() {\n      return !this.$store.done_tutorial && tutorial_pages && this.$store;\n    },\n    tutorial() {\n      const page = tutorial_pages[this.tutorial_page];\n      return {\n        ...page,\n        prev_text: this.tutorial_page && !page.disable_prev ? \"Back\" : \"\",\n        next_text:\n          page.options?.next_text ||\n          (this.tutorial_page == tutorial_pages.length - 1 ? \"Finish\" : \"Next\"),\n      };\n    },\n  },\n  mounted() {\n    this.isElectron = navigator.userAgent.toLowerCase().indexOf(\" electron/\") > -1;\n    if (this.isElectron) {\n      this.platform = this.$route.query.platform;\n      if (!this.platform && window.location.search) {\n        this.platform = window.location.search.split(\"=\")[1];\n      }\n      this.$status.log(\"Electron Platform: \" + this.platform);\n    }\n    this.set_theme();\n    this.$store.paused = false;\n    this.$store.logout_prompt = false;\n    window.addEventListener(\"focus\", this.refreshTimeout);\n    window.addEventListener(\"keydown\", this.global_keydown);\n    this.$shortcuts.register_all(this.shortcuts, \"General\");\n\n    // catch href clicks to open as \"/to/{encoded href}\"\n    this.$refs.app.addEventListener(\"click\", (e) => {\n      // catch click if it has an href\n      if (e.target.href) {\n        // fix link if it doesnt have a protocol or is relative\n        if (!e.target.href.includes(\"://\") || e.target.href.startsWith(\"/\")) {\n          e.target.href = new URL(e.target.href, window.location.href).href;\n        }\n        // check that it's an outlink\n        let url = new URL(e.target.href);\n        if (\n          url?.hostname == this.$env.VUE_APP_BRAND_DOMAIN ||\n          url?.hostname == window?.location?.hostname\n        )\n          return;\n\n        // if outlink, open in new tab as \"/to/{encoded href}\"\n        e.preventDefault();\n        this.$status.log(`🔗 Opening outlink in a new tab | \"${url.href}\"`);\n        window.open(\"/to/\" + encodeURIComponent(url.href), \"_blank\");\n      }\n    });\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"focus\", this.refreshTimeout);\n    window.removeEventListener(\"keydown\", this.global_keydown);\n    this.$shortcuts.remove_tag(\"General\");\n  },\n  created() {\n    // do dark mode from local storage, then from store (if logged in)\n    const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? \"dark\"\n      : \"light\";\n    const storedTheme = window.localStorage.getItem(\"theme\");\n    this.isDarkMode = storedTheme === \"dark\" || (storedTheme === null && systemTheme === \"dark\");\n  },\n  methods: {\n    global_keydown(e) {\n      let el,\n        ignore = false;\n      if (this.show_shortcuts) ignore = true;\n      // Global Keys\n      if (!e.shiftKey && e.key == \"Escape\" && !(e.ctrlKey || e.metaKey)) {\n        el = $(\".click_escape\");\n      } else if (!e.shiftKey && e.key == \"Enter\" && (e.ctrlKey || e.metaKey)) {\n        el = $(\".click_ctrlenter\");\n      } else if (!e.shiftKey && e.key == \"\\\\\" && (e.ctrlKey || e.metaKey)) {\n        this.$store.toggle_theme();\n        ignore = true;\n      } else if (!e.shiftKey && e.key == \"'\" && (e.ctrlKey || e.metaKey)) {\n        this.$store.toggle_simplified();\n        ignore = true;\n      } else if (\n        (e.key == \"/\" && (e.ctrlKey || e.metaKey)) ||\n        (e.key == \"?\" && (e.ctrlKey || e.metaKey))\n      ) {\n        this.show_shortcuts = !this.show_shortcuts;\n        ignore = true;\n      } else if ((e.key == \"!\" || e.key == \"1\") && (e.ctrlKey || e.metaKey)) {\n        this.$store.report_logs();\n        ignore = true;\n      }\n      // Modal Controls\n      if (el) {\n        el = el.not(\"[disabled]\").not(\".disabled\").filter(\":visible\");\n        if (!el || !el.length) return;\n        $(el).first().click();\n      }\n      // Key Event Blocker\n      if (el || ignore) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    tutorial_nav(change) {\n      // Do UI Tutorial Actions\n      const click = this.tutorial?.options?.click_on_complete;\n      if (change > 0 && click) {\n        $(click == true ? this.tutorial.el : click).click();\n      }\n      // Finish Tutorial\n      if (this.tutorial_page == tutorial_pages.length - 1) {\n        this.$store\n          .finish_tutorial(true)\n          .then(() => {\n            new SuccessToast(\"Interface tutorial completed; here's some more resources!\", 3500);\n          })\n          .catch((err) => {\n            new ErrorToast(\"Couldn't complete tutorial\", err, 3000);\n          });\n      }\n      // Continue Tutorial\n      else if (this.tutorial_page + change >= 0 && (!this.tutorial.disable_prev || change > 0)) {\n        this.tutorial_page += change;\n      }\n    },\n    refreshTimeout() {\n      if (this.$store) {\n        this.$store.refresh_timeout();\n      }\n    },\n    set_theme() {\n      if (this.theme == \"light\") {\n        $(\"meta.theme-color\").attr(\"media\", \"\");\n        $(\"meta.theme-color-dark\").attr(\"media\", \"false\");\n      } else {\n        $(\"meta.theme-color-dark\").attr(\"media\", \"\");\n        $(\"meta.theme-color\").attr(\"media\", \"false\");\n      }\n    },\n  },\n  watch: {\n    \"$store.paused\": function (new_val, old_val) {\n      if (this.do_timeout) {\n        if (new_val) {\n          // focus on next tick\n          this.$nextTick(() => {\n            this.$refs.pause_modal.focus();\n          });\n        } else if (old_val && this.$refs.overlay) {\n          this.animating = true;\n          this.$refs.overlay.close();\n          setTimeout(() => {\n            this.animating = false;\n          }, 250);\n        }\n      }\n    },\n    show_shortcuts: function (new_val, old_val) {\n      if (old_val && this.$refs.shortcuts_overlay) {\n        this.animating_shortcuts = true;\n        this.$refs.shortcuts_overlay.close();\n        setTimeout(() => {\n          this.animating_shortcuts = false;\n        }, 250);\n      }\n    },\n    theme() {\n      this.set_theme();\n    },\n  },\n};\n</script>\n\n<style scoped>\nmain.parent {\n  width: 100%;\n  height: 100%;\n}\n.pause_modal .overlay_contents {\n  border-bottom: none;\n}\n.pause_modal {\n  width: 350px !important;\n}\n.pause_modal_overlay {\n  z-index: 3000;\n}\n</style>\n","<template>\n  <Modal\n    class=\"logout_modal\"\n    :can_continue=\"true\"\n    :title=\"'Log Out'\"\n    :html=\"html\"\n    :continue_action=\"logout\"\n    :skippable=\"true\"\n    @skip=\"$emit('close')\"\n    :skip_text=\"'Cancel'\"\n    :submit_text=\"'Confirm'\"\n  />\n</template>\n\n<script>\nimport Modal from \"@/components/Modal/Modal.vue\";\nexport default {\n  name: \"LogoutModal\",\n  emits: [\"close\"],\n  components: {\n    Modal,\n  },\n  data() {\n    return {\n      html: `<div class=\"overlay_contents_text\">Are you sure you want to log out?<br><br>You may lose access to what you were working on, and unsaved changes may be discarded.</div>`,\n    };\n  },\n  methods: {\n    logout() {\n      this.$store.logout();\n      this.$emit(\"close\");\n    },\n  },\n  mounted() {\n    // set close timeout\n    setTimeout(() => {\n      this.$emit(\"close\");\n    }, 10000);\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./LogoutModal.vue?vue&type=template&id=4ccbc23f\"\nimport script from \"./LogoutModal.vue?vue&type=script&lang=js\"\nexport * from \"./LogoutModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"shortcuts_modal\" ref=\"shortcuts_modal\" :class=\"{ empty: !sections.length }\">\n    <div class=\"overlay_contents shortcuts_contents\">\n      <div v-if=\"!sections || !sections.length\">No Registered Shortcuts</div>\n      <div v-else class=\"shortcuts_sections\">\n        <div v-for=\"section in sections\" class=\"shortcuts_section\" :key=\"section.tag\">\n          <p class=\"shortcuts_section__title\">{{ section.tag || \"Other\" }}</p>\n          <table class=\"shortcuts_table\">\n            <tr\n              class=\"shortcuts_table_shortcut\"\n              v-for=\"shortcut in section.list\"\n              :key=\"shortcut.name\"\n              tabindex=\"1\"\n            >\n              <td class=\"shortcut__key\">\n                <span class=\"button_pointer_text\" v-for=\"key in shortcut.keys\" :key=\"key\">{{\n                  key\n                }}</span>\n              </td>\n              <td class=\"shortcut__description\">{{ shortcut.description }}</td>\n            </tr>\n          </table>\n        </div>\n        <div class=\"shortcuts_section__filler\" v-if=\"sections.length && sections.length % 2\"></div>\n      </div>\n    </div>\n    <div class=\"click_escape nopad\" @click=\"$emit('close')\"></div>\n  </div>\n</template>\n\n<script>\nimport \"@/assets/style/overlay.css\";\nexport default {\n  name: \"ShortcutsModal\",\n  computed: {\n    sections() {\n      return this.$shortcuts.sections;\n    },\n  },\n  mounted() {\n    this.$refs.shortcuts_modal.focus();\n  },\n  beforeUnmount() {},\n};\n</script>\n\n<style scoped>\n.shortcuts_sections {\n  display: flex;\n  flex-flow: row wrap;\n  gap: 0.25em;\n}\n.shortcuts_section {\n  padding: 10px;\n  border-radius: var(--radius-overlay-input);\n  user-select: none;\n}\n.shortcuts_section__filler,\n.shortcuts_section {\n  flex: 1 1 275px;\n}\n.shortcuts_section:not(:only-child):hover {\n  background-color: var(--color-on-bg);\n}\n.shortcuts_section:not(:only-child):hover .shortcut__key span {\n  background-color: var(--color-overlay-input-on-bg);\n}\np.shortcuts_section__title {\n  font-weight: bold;\n  margin-bottom: 0.5em;\n  padding-bottom: 0.25em;\n  border-bottom: solid 2px var(--color-overlay-border);\n  width: 100%;\n}\n.shortcuts_modal {\n  width: 100%;\n  max-width: 600px;\n}\n@media (max-width: 680px) {\n  .shortcuts_modal {\n    width: fit-content;\n  }\n  .shortcuts_sections {\n    flex-flow: column nowrap;\n  }\n  .shortcuts_section {\n    flex-basis: auto;\n  }\n  .shortcuts_section__filler {\n    display: none;\n  }\n}\n.shortcuts_modal.empty {\n  width: fit-content;\n}\n.overlay_contents.shortcuts_contents {\n  border: none;\n  padding: calc(var(--padding-overlay) - 10px);\n}\n.shortcuts_table {\n  margin: -0.5em 0;\n  padding: 0;\n  /* add spacing between rows */\n  border-spacing: 0 0.5em;\n}\n.shortcuts_table_shortcut {\n  position: relative;\n}\n.shortcut__key {\n  text-align: right;\n  font-weight: bold;\n  padding-right: 0.5em;\n  white-space: nowrap;\n  /* fix for inconsistent width */\n  /* width: 75px; */\n  display: block;\n}\n.shortcut__key {\n  display: flex;\n  flex-flow: row nowrap;\n  gap: 0.25em;\n}\n/* macos style */\n.shortcut__key span {\n  font-family: system-ui;\n}\n.shortcut__description {\n  padding-left: 0.5em;\n  text-align: left;\n  width: 100%;\n  line-height: 1em;\n  font-size: 0.95em;\n}\n</style>\n","import { render } from \"./ShortcutsModal.vue?vue&type=template&id=1ab3b320&scoped=true\"\nimport script from \"./ShortcutsModal.vue?vue&type=script&lang=js\"\nexport * from \"./ShortcutsModal.vue?vue&type=script&lang=js\"\n\nimport \"./ShortcutsModal.vue?vue&type=style&index=0&id=1ab3b320&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1ab3b320\"]])\n\nexport default __exports__","<template>\n  <div class=\"tutorialblurb_group\" v-if=\"!trackel || track\" :class=\"{ tutorial_end: is_end }\">\n    <div\n      class=\"tutorialblurb__overlay\"\n      :style=\"{\n        top: track.top + 'px',\n        left: track.left + 'px',\n        height: track.height + 'px',\n        width: track.width + 'px',\n        borderRadius: (options && options.radius) || '5px',\n      }\"\n    ></div>\n    <div\n      class=\"tutorialblurb_wrapper\"\n      ref=\"dialog\"\n      :style=\"{\n        top: track.fake_y + 'px',\n        left: track.fake_x + 'px',\n      }\"\n    >\n      <span\n        v-if=\"track.blurb\"\n        class=\"tutorialblurb__blurb nopad\"\n        :style=\"{ left: track.blurb_x + 'px' }\"\n      ></span>\n      <div class=\"tutorialblurb modaltype\" ref=\"blurb\">\n        <header class=\"modal_header\" v-if=\"title\" ref=\"title\">\n          <h2 class=\"header_style modal_header_title\">{{ title }}</h2>\n        </header>\n        <div ref=\"contents\" class=\"overlay_contents\" v-if=\"content || html\">\n          <component :is=\"content\" ref=\"container\" @skip=\"$emit('skip')\" />\n          <div class=\"overlay_contents__html\" v-if=\"html\" v-html=\"html\"></div>\n        </div>\n        <div class=\"bottom_actions\">\n          <button class=\"close_action click_escape\" v-if=\"skippable\" @click=\"$emit('skip')\">\n            {{ skip_text }}\n          </button>\n          <div class=\"flex_spacer\"></div>\n          <button class=\"continue_action click_ctrlenter\" @click=\"$emit('next')\">\n            {{ button_text }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/**\n * @file TutorialBlurb.vue\n * @displayName TutorialBlurb\n * @description A blurb that acts simiarly to a modal, but floats to display a pointer to the element it is describing.\n * @property {String} title - The title of the modal.\n * @property {Object} content - A component to display in the modal.\n * @property {String} html - HTML to display in the modal, if content is not provided.\n * @property {String} submit_text - The text to display on the continue button.\n * @property {String} skip_text - The text to display on the skip button.\n *  */\nimport { SuccessToast } from \"@svonk/util\";\nimport smoothReflow from \"vue-smooth-reflow\";\nimport $ from \"jquery\";\nexport default {\n  name: \"TutorialBlurb\",\n  emits: [\"next\", \"skip\"],\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    content: {\n      type: Object,\n    },\n    html: {\n      type: String,\n    },\n    button_text: {\n      type: String,\n      required: false,\n      default: \"Next\",\n    },\n    // element to track position of (jquery string)\n    trackel: {\n      required: true,\n    },\n    skippable: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    skip_text: {\n      type: String,\n      required: false,\n      default: \"Skip\",\n    },\n    // more options\n    options: {\n      type: Object,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      track: null,\n      done_welcome: false,\n      shortcuts: [\n        {\n          key: \"Enter, Space, ArrowRight\",\n          description: \"Next Page\",\n        },\n        {\n          key: \"ArrowLeft\",\n          description: \"Back\",\n        },\n      ],\n    };\n  },\n  mixins: [smoothReflow],\n  mounted() {\n    this.$smoothReflow({\n      el: this.$refs.contents,\n      hideOverflow: true,\n      childTransitions: true,\n    });\n    this.$smoothReflow({\n      el: this.$refs.title,\n      hideOverflow: true,\n      childTransitions: true,\n    });\n    window.addEventListener(\"keydown\", this.next_key);\n    this.$shortcuts.register_all(this.shortcuts, \"Tutorial\");\n    window.addEventListener(\"resize\", this.track_flush);\n    window.addEventListener(\"scroll\", this.track_flush);\n    window.setInterval(this.track_flush, 100);\n    this.track_flush();\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.next_key);\n    this.$shortcuts.remove_tag(\"Tutorial\");\n    window.removeEventListener(\"resize\", this.track_flush);\n    window.removeEventListener(\"scroll\", this.track_flush);\n    window.clearInterval(this.track_flush);\n  },\n  computed: {\n    is_end() {\n      return this.options?.end;\n    },\n  },\n  methods: {\n    track_fn() {\n      const padding = this.options?.padding === undefined ? 10 : this.options.padding;\n      if (this.trackel) {\n        const el = $(this.trackel);\n        if (el.length) {\n          // constants for placing on screen\n          const screen = {\n            w: window.innerWidth,\n            h: window.innerHeight,\n            pad: 10,\n          };\n          // get width from ref\n          const dialog = {\n            w: 350,\n            h: (this.$refs?.dialog?.offsetHeight || 200) + 7,\n            offset: screen.w <= 600 ? 172 : 20,\n            rail_pad: 20,\n          };\n          // get element data\n          const offset = el.offset();\n          const width = el.outerWidth();\n          const height = el.outerHeight();\n          let track = {\n            blurb: true,\n            top: offset.top - padding,\n            left: offset.left - padding,\n            width: width + padding * 2,\n            height: height + padding * 2,\n            x: offset.left + width / 2 - dialog.offset,\n            y: offset.top + height + padding + 7,\n            exists: true,\n          };\n          track.fake_x = Math.max(screen.pad, Math.min(screen.w - dialog.w - screen.pad, track.x));\n          track.fake_y = Math.max(screen.pad, Math.min(screen.h - dialog.h - screen.pad, track.y));\n\n          // if covering the element\n          if (\n            track.fake_x + dialog.w > track.left &&\n            track.fake_x < track.left + track.width &&\n            track.fake_y + dialog.h > track.top &&\n            track.fake_y < track.top + track.height\n          ) {\n            track.blurb = false;\n            track.blurb_x = dialog.offset;\n            track.fake_y = window.innerHeight / 2 - (this.$refs?.dialog?.offsetHeight || 200) / 2;\n            track.fake_x = window.innerWidth / 2 - 350 / 2;\n          }\n          // offset position for the pointer on top of the dialogue from side to side\n          else {\n            track.blurb_x = track.x - track.fake_x + dialog.offset;\n            track.blurb_x = Math.max(\n              dialog.rail_pad,\n              Math.min(dialog.w - dialog.rail_pad, track.blurb_x)\n            );\n          }\n          // do prompt on tutorial ready and elements showing\n          if (!this.done_welcome) {\n            new SuccessToast(\n              `Welcome to ${this.$env.VUE_APP_BRAND_NAME_SHORT}, let's get you comfortable!`,\n              3500\n            );\n            this.done_welcome = true;\n          }\n\n          return track;\n        }\n      } else if (this.trackel == null) {\n        return {\n          exists: false,\n          blurb: false,\n          fake_y: window.innerHeight / 2 - (this.$refs?.dialog?.offsetHeight || 200) / 2,\n          fake_x: window.innerWidth / 2 - 350 / 2,\n          top: window.innerHeight / 2,\n          left: window.innerWidth / 2,\n          width: 0,\n          height: 0,\n        };\n      }\n\n      return this.track;\n    },\n    next_key(e) {\n      e.preventDefault();\n      if (this.track) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.key === \"ArrowRight\") {\n          this.$emit(\"next\");\n        } else if (e.key === \"ArrowLeft\") {\n          this.$emit(\"skip\");\n        }\n      }\n      e.stopPropagation();\n    },\n    track_flush() {\n      if (!this.$store.done_tutorial) {\n        this.track = this.track_fn();\n        if (this.options?.reclick) {\n          $(this.options.reclick).click();\n        }\n        if (\n          this.options?.pagename &&\n          this.$route.name != this.options.pagename &&\n          this.$route.path.startsWith(\"/portal\")\n        ) {\n          this.$router.push({ name: this.options.pagename });\n        }\n      }\n    },\n  },\n  watch: {\n    trackel() {\n      this.track_flush();\n    },\n    $route() {\n      this.track_flush();\n    },\n    options() {\n      if (this.options?.end) {\n        setTimeout(() => {\n          this.$emit(\"next\");\n        }, 250);\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.parent.simplified .tutorialblurb_group * {\n  transition: none !important;\n}\n.tutorialblurb_wrapper {\n  position: absolute;\n  z-index: 2048;\n  transform-origin: -7px 20px;\n  /* margin-left: -27px; */\n  /* transition */\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in-out;\n  transition-property: left, top, height;\n}\n.tutorial_end .tutorialblurb__overlay {\n  animation: hide_bg 0.25s ease forwards;\n}\n@keyframes hide_bg {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.tutorialblurb .overlay_contents,\n.tutorialblurb .modal_header {\n  transition: height 0.2s ease-out;\n}\n\n/* shade */\n.tutorialblurb__overlay {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0);\n  z-index: 2047;\n  border-radius: 5px;\n  box-shadow: 0 0 0 calc(100vw + 100vh) var(--color-tutorial-overlay);\n  /* defaults */\n  top: 50%;\n  left: 50%;\n  height: 0;\n  width: 0;\n  /* transition */\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in-out;\n  transition-property: left, top, height, width, border-radius;\n}\n.tutorialblurb_group {\n  z-index: 2048;\n  position: fixed;\n  pointer-events: all;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n}\n\n.tutorialblurb {\n  min-height: 200px;\n  width: 350px;\n}\n.tutorialblurb__blurb {\n  position: absolute;\n  top: -7px;\n  left: 20px;\n  width: 14px;\n  height: 7px;\n  margin-left: -8px;\n  box-sizing: content-box;\n  border: solid var(--thickness-overlay-border) var(--color-overlay-border);\n  background-color: var(--color-bg);\n  border-bottom: none;\n  border-radius: 10px 10px 0 0;\n  transition: left 0.3s ease-in-out;\n}\n</style>\n","import { render } from \"./TutorialBlurb.vue?vue&type=template&id=78d5e803\"\nimport script from \"./TutorialBlurb.vue?vue&type=script&lang=js\"\nexport * from \"./TutorialBlurb.vue?vue&type=script&lang=js\"\n\nimport \"./TutorialBlurb.vue?vue&type=style&index=0&id=78d5e803&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=72179f70&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=72179f70&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-72179f70\"]])\n\nexport default __exports__","/* eslint-disable no-console */\nimport { register } from \"register-service-worker\";\nimport { _status } from \"@/common\";\nif (process.env.NODE_ENV === \"production\") {\n    register(`${process.env.BASE_URL}service-worker.js`, {\n        ready() {\n            _status.log(\"🛠 App is being served from cache by a service worker. \" +\n                \"For more details, visit https://goo.gl/AFskqB\");\n        },\n        registered() {\n            _status.log(\"🛠 Service worker has been registered.\");\n        },\n        cached() {\n            _status.log(\"🛠 Content has been cached for offline use.\");\n        },\n        updatefound() {\n            _status.log(\"🛠 New content is downloading.\");\n        },\n        updated() {\n            _status.log(\"🛠 New content is available; please refresh.\");\n            window.localStorage.clear();\n            // reload with force cache refresh\n            // TODO: TS do in non-deprecated way (not Location.reload(forceReload: boolean): void)\n            // @ts-ignore: Expected 0 arguments, but got 1\n            window.location.reload(true);\n        },\n        offline() {\n            _status.log(\"🛠 No internet connection found. App is running in offline mode.\");\n        },\n        error(error) {\n            _status.error(\"🛑 Error during service worker registration:\", error);\n        },\n    });\n}\n","/**\n * This store manages the registration, removal, and formatting of keyboard shortcuts, for use in help UIs\n * @file store/shortcuts.ts\n * @namespace .shortcuts\n * @memberOf store\n */\n// setup Pinia store\nimport { _status } from \"@/common\";\nimport { defineStore } from \"pinia\";\n/**\n * @memberOf .shortcuts\n * @function clean_key\n * @description Clean up keystrings for display\n * @param {String} key keystring to reformat\n * @returns {Array} Formatted keystrings\n */\nfunction clean_key(key) {\n    if (!key)\n        return;\n    key = key.replace(\" or \", \", \");\n    return key.split(\", \").map((k) => {\n        // replace control keys with symbols\n        k = k.replace(\"Control\", \"Ctrl\");\n        // do macos specifics\n        if ((navigator === null || navigator === void 0 ? void 0 : navigator.userAgent.indexOf(\"Mac OS X\")) != -1) {\n            k = k.replace(\"Ctrl\", \"⌘\");\n            k = k.replace(\"Meta\", \"⌘\");\n            k = k.replace(\"Shift\", \"⇧\");\n            k = k.replace(\"Alt\", \"⌥\");\n            k = k.replace(\"Escape\", \"esc\");\n            k = k.replace(\"Home\", \"fn + ←\");\n            k = k.replace(\"End\", \"fn + →\");\n        }\n        // replace arrow keys with symbols\n        k = k.replace(\"ArrowUp\", \"↑\");\n        k = k.replace(\"ArrowDown\", \"↓\");\n        k = k.replace(\"ArrowLeft\", \"←\");\n        k = k.replace(\"ArrowRight\", \"→\");\n        // replace other keys with symbols\n        k = k.replace(\"Enter\", \"⏎\");\n        k = k.replace(\"Escape\", \"Esc\");\n        k = k.replace(\"Backspace\", \"⌫\");\n        k = k.replace(\"Delete\", \"⌦\");\n        k = k.replace(\"Tab\", \"⇥\");\n        return k;\n    });\n}\nexport const useShortcuts = defineStore({\n    id: \"shortcuts\",\n    state: () => ({\n        shortcuts: [],\n        keys: [],\n        active: {},\n    }),\n    /**\n     * @namespace .shortcuts.getters\n     * @memberof .shortcuts\n     */\n    getters: {\n        /**\n         * @memberOf .shortcuts.getters\n         * @function list\n         * @description Get a list of shortcuts\n         * @returns {Array} The formatted shortcuts\n         */\n        list() {\n            return this.shortcuts.map((s) => {\n                return Object.assign(Object.assign({}, s), { keys: clean_key(s.key) });\n            });\n        },\n        /**\n         * @memberOf .shortcuts.getters\n         * @function sections\n         * @description Get a list of shortcuts by section\n         * @returns {} Formatted shortcuts sorted by section\n         */\n        sections() {\n            //   take this.list and return an array of sections by tag\n            let sections = [];\n            let tags = this.shortcuts.map((s) => s.tag);\n            tags = [...new Set(tags)];\n            for (let i = 0; i < tags.length; i++) {\n                sections.push({\n                    tag: tags[i],\n                    list: this.list.filter((s) => s.tag === tags[i]),\n                });\n            }\n            return sections;\n        },\n    },\n    /**\n     * @namespace .shortcuts.actions\n     * @memberof .shortcuts\n     */\n    actions: {\n        /**\n         * @memberOf .shortcuts.actions\n         * @function get\n         * @description Get a shortcut by object\n         * @param {Object} shortcut\n         * @returns {Object} the shortcut object matching the object\n         */\n        get(shortcut) {\n            return this.shortcuts.find((s) => s === shortcut);\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function get_key\n         * @description Get a shortcut by key\n         * @param {String} key\n         */\n        get_key(key) {\n            if (!this.keys.includes(key))\n                return null;\n            return this.shortcuts.find((s) => s.key === key) || null;\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function register\n         * @description Register a new shortcut\n         * @param {Object} shortcut\n         * @param {Boolean} skipSort\n         */\n        register(shortcut, skipSort = false) {\n            if (!(shortcut === null || shortcut === void 0 ? void 0 : shortcut.key) || !(shortcut === null || shortcut === void 0 ? void 0 : shortcut.description)) {\n                _status.error(\"⌨️ Shortcut must have key and description text\");\n                return;\n            }\n            if (this.keys.includes(shortcut.key))\n                _status.warn(`⌨️ Shortcut key \"${shortcut.key}\" already registered`);\n            this.keys.push(shortcut.key);\n            this.shortcuts.push(shortcut);\n            if (!skipSort)\n                this.sort();\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function register_all\n         * @description Register a list of shortcuts with a given tag\n         * @param {Array} list\n         * @param {String} tag\n         */\n        register_all(list, tag) {\n            for (let i = 0; i < list.length; i++) {\n                this.register(Object.assign(Object.assign({}, list[i]), { tag }), true);\n            }\n            this.sort();\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function remove\n         * @description Remove a shortcut\n         * @param {Object} shortcut\n         */\n        remove(shortcut) {\n            if (!this.shortcuts.includes(shortcut)) {\n                _status.error(\"⌨️ Shortcut not registered, cannot remove\", shortcut);\n                return;\n            }\n            this.shortcuts.splice(this.shortcuts.indexOf(shortcut), 1);\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function remove_all\n         * @description Remove all shortcuts with a given tag\n         * @param {Array} list\n         * @param {String} tag\n         */\n        remove_all(list, tag) {\n            for (let i = 0; i < list.length; i++) {\n                this.remove(Object.assign(Object.assign({}, list[i]), { tag }));\n            }\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function remove_tag\n         * @description Remove all shortcuts with a given tag\n         * @param {String} tag\n         */\n        remove_tag(tag) {\n            this.shortcuts = this.shortcuts.filter((s) => s.tag !== tag);\n            this.keys = this.shortcuts.map((s) => s.key);\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function remove_key\n         * @description Remove a shortcut by key\n         * @param {String} key\n         */\n        remove_key(key) {\n            if (!this.keys.includes(key)) {\n                _status.error(`⌨️ Key \"${key}\" not registered, cannot remove shortcut`);\n                return;\n            }\n            this.keys.splice(this.keys.indexOf(key), 1);\n            this.shortcuts.splice(this.shortcuts.indexOf(this.get_key(key)), 1);\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function remove_keys\n         * @description Remove shortcuts with any of the given keys\n         * @param {Array} keys\n         */\n        remove_keys(keys) {\n            for (let i = 0; i < keys.length; i++) {\n                this.remove_key(keys[i]);\n            }\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function sort\n         * @description Sort the shortcuts\n         */\n        sort() {\n            this.shortcuts.sort((a, b) => {\n                // compare tags, if different, sort by tag, and put General at the top, falsey at the bottom\n                if (a.tag !== b.tag) {\n                    if (a.tag === \"General\" || !b.tag)\n                        return -1;\n                    if (b.tag === \"General\" || !a.tag)\n                        return 1;\n                    return a.tag.localeCompare(b.tag);\n                }\n                // check for priority\n                if (a.top && !b.top)\n                    return -1;\n                if (!a.top && b.top)\n                    return 1;\n                // compare key\n                if (a.key !== b.key) {\n                    return a.key.localeCompare(b.key);\n                }\n                // compare description\n                return a.description.localeCompare(b.description);\n            });\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function clear\n         * @description Clear all shortcuts\n         */\n        clear() {\n            this.shortcuts = [];\n            this.keys = [];\n            _status.log(\"⌨️ Cleared shortcuts\");\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function set_activity\n         * @description Set the activity state of a shortcut\n         * @param {Boolean} state\n         * @param {String} shortName\n         */\n        set_activity(state, shortName) {\n            this.active[shortName] = state;\n        },\n        /**\n         * @memberOf .shortcuts.actions\n         * @function is_active\n         * @description Check if a shortcut is active\n         * @param {String} shortName\n         * @returns {Boolean} state\n         */\n        is_active(shortName) {\n            return this.active[shortName];\n        },\n    },\n});\n","/**\n * This store manages web api notifications, and provides a simple interface for creating and managing them\n * @file store/notifications.ts\n * @namespace .notify\n * @memberOf store\n */\n// setup Pinia store\nimport { _status } from \"@/common\";\nimport { ErrorToast, WarningToast } from \"@svonk/util\";\nimport { defineStore } from \"pinia\";\nexport const useNotifications = defineStore({\n    id: \"notifications\",\n    state: () => ({}),\n    /**\n     * @namespace .notify.getters\n     * @memberof .notify\n     */\n    getters: {\n        /**\n         * @function .notify.getters.enabled\n         * @returns {Boolean} Whether notifications are enabled\n         */\n        enabled() {\n            return \"Notification\" in window && Notification.permission === \"granted\";\n        },\n    },\n    /**\n     * @namespace .notify.actions\n     * @memberof .notify\n     */\n    actions: {\n        /**\n         * @function .notify.actions.register\n         * @description Setup the web notifications api permissions and notify the user that they're now active\n         * @param {Boolean} force Force the notification registration even if already denied\n         */\n        register(force) {\n            if (!(\"Notification\" in window)) {\n                _status.error(\"🔔 This browser does not support desktop notification\");\n                new ErrorToast(\"Cannot enable notifications\", \"browser lacks support\", 2500);\n            }\n            else if (this.enabled) {\n                _status.log(\"🔔 Notifications already enabled\");\n            }\n            else if (force || Notification.permission !== \"denied\") {\n                Notification.requestPermission().then((permission) => {\n                    if (permission === \"granted\") {\n                        this.add({\n                            title: \"Notifications Enabled\",\n                            message: `You can now receive notifications from ${process.env.VUE_APP_BRAND_NAME_SHORT}`,\n                        });\n                    }\n                    else {\n                        _status.error(\"🔔 Notifications permission denied\");\n                        new ErrorToast(\"Cannot enable notifications\", \"permission denied\", 2500);\n                    }\n                });\n            }\n            else {\n                _status.warn(\"🔔 Notifications permission previously denied\");\n            }\n        },\n        /**\n         * @function .notify.actions.add\n         * @description Create a web notification\n         * @param {Object} notification Notification object\n         */\n        add(notification, onClick = () => { }) {\n            if (!this.enabled) {\n                _status.error(\"🔔 Notifications are not enabled\");\n                new WarningToast(\"Cannot send notification: notifications are not enabled\", 2500);\n                return null;\n            }\n            else {\n                // show notification\n                new Notification(notification.title, Object.assign(Object.assign({}, notification), { icon: \"/img/icons/app.png\", badge: \"/img/icons/apple-touch-icon-60x60.png\", renotify: !!notification.tag, timestamp: Date.now() }));\n                // TODO: use action onclick with serviceworker showNotification\n                void onClick;\n            }\n        },\n        /**\n         * @function .notify.actions.play\n         * @description Play a sound file\n         * @param {String} file Path to sound file\n         */\n        play(file) {\n            try {\n                void new Audio(file).play();\n            }\n            catch (error) {\n                _status.error(`🔔 Cannot play sound file \"${file}\"`, error);\n            }\n        },\n    },\n});\n","var _a, _b;\nimport { createApp, watch } from \"vue\";\nimport { createPinia } from \"pinia\";\nimport App from \"@/App.vue\";\nimport router from \"@/router\";\nimport VueApexCharts from \"vue3-apexcharts\";\nimport { placeholderToast } from \"@svonk/util\";\nimport { _status } from \"@/common\";\nimport { Toast } from \"@svonk/util\";\nimport \"./registerServiceWorker\";\nimport VueLazyload from \"vue-lazyload\";\nimport { useMainStore } from \"@/store\";\nimport { useShortcuts } from \"@/store/shortcuts\";\nimport { useMagic } from \"@/store/magic\";\nimport { useNotifications } from \"@/store/notifications\";\nwindow.toast = placeholderToast;\nwindow.$ = $;\n// create instances of app requisites\nconst pinia = createPinia();\n// TODO: TS | figure out what the heck is going on with this - why is App already initialized and existent with no new changes?\n// if app exists, use it, otherwise create a new one\nconst app = createApp(App) || createApp(() => App);\n// setup app requisites\napp.use(router);\napp.use(pinia);\nconst store = useMainStore(), shortcuts = useShortcuts(), magic = useMagic(), notify = useNotifications();\napp.mixin({\n    computed: {\n        $env() {\n            return process.env;\n        },\n        $status() {\n            return _status;\n        },\n        $store() {\n            return store;\n        },\n        $shortcuts() {\n            return shortcuts;\n        },\n        $magic() {\n            return magic;\n        },\n        $notify() {\n            return notify;\n        },\n    },\n});\napp.use(VueApexCharts);\n//* setup image loading (will use the classes it assigns to style loading images)\napp.use(VueLazyload, {\n    preLoad: 2,\n    attempt: 1,\n});\n// mount app\napp.mount(\"#root\");\n// setup store persistence using watcher\nwatch(pinia.state, (state) => {\n    window.localStorage.setItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_app_state`, JSON.stringify(state.main));\n}, { deep: true });\n// when window.localStorage. _teacher_mode changes, reload\nwindow.addEventListener(\"storage\", (e) => {\n    if (e.key === `${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`) {\n        _status.log(\"🏫 Detected teacher mode change, reloading\");\n        window.location.reload();\n    }\n});\n// setup connectin listeners\n_status.log(\"🛜 Started \" + (((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.onLine) ? \"online\" : \"offline\"));\nif (!((_b = window === null || window === void 0 ? void 0 : window.navigator) === null || _b === void 0 ? void 0 : _b.onLine)) {\n    new Toast(\"Features may not work as intended offline\", \"default\", 1e4, require(\"@/assets/img/general/toast/connection-warn.svg\"));\n}\nwindow.addEventListener(\"offline\", () => {\n    new Toast(\"Connection lost\", \"default\", 3500, require(\"@/assets/img/general/toast/connection-error.svg\"));\n    _status.warn(\"🛜 Connection lost\");\n});\nwindow.addEventListener(\"online\", () => {\n    new Toast(\"You're back online!\", \"default\", 3500, require(\"@/assets/img/general/toast/connection-success.svg\"));\n    _status.log(\"🛜 Connection restored\");\n});\n// styles\nimport \"@/assets/style/main.css\";\n// import jquery and store\nimport $ from \"jquery\";\n// auth\n$(document.body).on(\"click\", \".auth-action\", function () {\n    const store = useMainStore();\n    if (!store.user && $(this).hasClass(\"can-login\")) {\n        store.login();\n    }\n    else if ($(this).hasClass(\"can-logout\")) {\n        if ($(this).hasClass(\"doprompt\")) {\n            store.logout_prompt = true;\n        }\n        else {\n            store.logout();\n        }\n    }\n});\n$(document.body).on(\"click\", \".gohome\", function () {\n    router.push(\"/\");\n});\n// page change\nimport { removePopup } from \"@svonk/util\";\nrouter.afterEach((to) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    if (to.meta && to.meta.page_title) {\n        document.title = `${process.env.VUE_APP_BRAND_NAME_LONG} | ` + to.meta.page_title;\n    }\n    else {\n        document.title = process.env.VUE_APP_BRAND_NAME_LONG;\n    }\n    let theme_light = ((_b = (_a = to.meta) === null || _a === void 0 ? void 0 : _a.theme_color) === null || _b === void 0 ? void 0 : _b.light) || `#${process.env.VUE_APP_THEME_COLOR}`;\n    let theme_dark = ((_d = (_c = to.meta) === null || _c === void 0 ? void 0 : _c.theme_color) === null || _d === void 0 ? void 0 : _d.dark) || `#${process.env.VUE_APP_THEME_COLOR}`;\n    $(\"meta.theme-color\").attr(\"content\", theme_light);\n    $(\"meta.theme-color-dark\").attr(\"content\", theme_dark);\n    // remove popup\n    removePopup();\n    // setup color variables for css\n    const style = document.documentElement.style;\n    style.setProperty(\"--theme-color\", theme_light);\n    style.setProperty(\"--theme-color-dark\", theme_dark);\n    // colors on theme color\n    let text_light = ((_f = (_e = to.meta) === null || _e === void 0 ? void 0 : _e.theme_color) === null || _f === void 0 ? void 0 : _f.text_light) || \"#000000\";\n    let text_dark = ((_h = (_g = to.meta) === null || _g === void 0 ? void 0 : _g.theme_color) === null || _h === void 0 ? void 0 : _h.text_dark) || \"#ffffff\";\n    style.setProperty(\"--theme-color-text\", text_light);\n    style.setProperty(\"--theme-color-text-dark\", text_dark);\n    style.setProperty(\"--theme-color-hover\", text_light + \"33\");\n    style.setProperty(\"--theme-color-hover-dark\", text_dark + \"33\");\n});\n// router guard\nrouter.beforeEach((to) => {\n    const store = useMainStore();\n    if (to.meta && to.meta.requiresAuth && store && !store.user) {\n        // launch auth popup through store action\n        new Toast(\"Please log in or join to access this page\", \"default\", 1500, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n        // set redirect\n        return {\n            path: \"/\",\n            query: { redirect: to.fullPath },\n        };\n    }\n    else if (to.meta && to.meta.requiresTeacher && store.user && !store.is_teacher) {\n        new Toast(\"You must be a teacher to access this page\", \"default\", 1500, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n        return { name: \"portal\" };\n    }\n    else if (to.meta && to.meta.requiresAdmin && store.user && !store.is_admin) {\n        new Toast(\"Only administrators can access this page\", \"default\", 1500, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n        return { name: \"portal\" };\n    }\n});\n","import { createRouter, createWebHistory } from \"vue-router\";\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes: [\n        {\n            path: \"/\",\n            name: \"homemain\",\n            component: () => import(\"../views/Home/Home.vue\"),\n            meta: {\n                page_title: \"Home\",\n                theme_color: {\n                    light: \"#ffffff\",\n                    dark: \"#16130e\",\n                },\n                requiresAuth: false,\n            },\n            children: [\n                // about and contact pages\n                {\n                    path: \"\",\n                    name: \"home\",\n                    component: () => import(\"../views/Home/HomeView.vue\"),\n                    meta: {\n                        page_title: \"Home\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                    children: [\n                        // view task\n                        {\n                            // specify param \"ref\" in the route\n                            path: \"/view/:ref([^~]+~[^~]+~[^~]+)\",\n                            name: \"publicviewtask\",\n                            component: () => import(\"@/views/Portal/ViewTask.vue\"),\n                            meta: {\n                                page_title: \"View Task\",\n                                theme_color: {\n                                    light: \"#bfbfbf\",\n                                    dark: \"#0d0d0d\",\n                                },\n                                requiresAuth: false,\n                            },\n                        },\n                        // view class\n                        {\n                            // specify param \"ref\" in the route\n                            path: \"/view/:ref([^~]+~[^~]+)\",\n                            name: \"publicviewclass\",\n                            component: () => import(\"@/views/Portal/ViewClass.vue\"),\n                            meta: {\n                                page_title: \"View Class\",\n                                theme_color: {\n                                    light: \"#bfbfbf\",\n                                    dark: \"#0d0d0d\",\n                                },\n                                requiresAuth: false,\n                            },\n                        },\n                        // redirect page\n                        {\n                            path: \"/to/:path?\",\n                            name: \"redirect\",\n                            component: () => import(\"../views/Home/Redirect.vue\"),\n                            meta: {\n                                page_title: \"Confirm Redirect\",\n                                theme_color: {\n                                    light: \"#bfbfbf\",\n                                    dark: \"#0d0d0d\",\n                                },\n                                requiresAuth: false,\n                            },\n                        },\n                        // join form\n                        {\n                            path: \"/join\",\n                            name: \"join\",\n                            component: () => import(\"@/views/Home/JoinModal.vue\"),\n                            meta: {\n                                page_title: `Join the ${process.env.VUE_APP_BRAND_NAME_SHORT} Beta`,\n                                theme_color: {\n                                    light: \"#bfbfbf\",\n                                    dark: \"#0d0d0d\",\n                                },\n                                requiresAuth: false,\n                                // change later to instead have custom action\n                                // block_close: true,\n                                close_path: \"/\",\n                                blockStandardRedirect: true,\n                            },\n                        },\n                        {\n                            path: \"/link/:code?\",\n                            name: \"link\",\n                            component: () => import(\"@/views/Home/LinkModal.vue\"),\n                            props: true,\n                            meta: {\n                                page_title: \"Link Personal Account\",\n                                theme_color: {\n                                    light: \"#bfbfbf\",\n                                    dark: \"#0d0d0d\",\n                                },\n                                close_path: \"/\",\n                                blockStandardRedirect: true,\n                            },\n                        },\n                    ],\n                },\n                {\n                    path: \"/about\",\n                    name: \"about\",\n                    component: () => import(\"../views/Home/AboutView.vue\"),\n                    meta: {\n                        page_title: \"About\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/legal/privacy\",\n                    name: \"privacy\",\n                    component: () => import(\"../views/Home/Legal/PrivacyView.vue\"),\n                    meta: {\n                        page_title: \"Legal - Privacy Policy\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/legal/tos\",\n                    name: \"tos\",\n                    component: () => import(\"../views/Home/Legal/TermsView.vue\"),\n                    meta: {\n                        page_title: \"Legal - Terms of Service\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/download\",\n                    name: \"download\",\n                    component: () => import(\"../views/Home/DownloadView.vue\"),\n                    meta: {\n                        page_title: \"Download [BETA]\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/roadmap\",\n                    name: \"roadmap\",\n                    component: () => import(\"../views/Home/TodoView.vue\"),\n                    meta: {\n                        page_title: \"Development Roadmap\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/contact\",\n                    name: \"contact\",\n                    component: () => import(\"../views/Home/ContactView.vue\"),\n                    meta: {\n                        page_title: \"Contact\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                        requiresAuth: false,\n                    },\n                },\n                {\n                    path: \"/:pathMatch(.*)*\",\n                    name: \"404\",\n                    component: () => import(\"../views/Home/NotFound.vue\"),\n                    meta: {\n                        page_title: \"404\",\n                        theme_color: {\n                            light: \"#ffffff\",\n                            dark: \"#16130e\",\n                        },\n                    },\n                },\n            ],\n        },\n        {\n            path: \"/portal/admin\",\n            name: \"admin\",\n            component: () => import(\"../views/Admin/Admin.vue\"),\n            redirect: \"/portal/admin/logs\",\n            meta: {\n                page_title: \"Administrator Panel\",\n                theme_color: {\n                    light: \"#f2f2f2\",\n                    dark: \"#121212\",\n                },\n                requiresAuth: true,\n                requiresAdmin: true,\n            },\n            children: [\n                // logs\n                {\n                    path: \"/portal/admin/logs\",\n                    name: \"admin_logs\",\n                    component: () => import(\"../views/Admin/pages/LogDebug.vue\"),\n                    meta: {\n                        page_title: \"Admin Panel | Logs\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        requiresAdmin: true,\n                    },\n                },\n                // opts\n                {\n                    path: \"/portal/admin/opts\",\n                    name: \"admin_opts\",\n                    component: () => import(\"../views/Admin/pages/DistrictEnv.vue\"),\n                    meta: {\n                        page_title: \"Admin Panel | District Options\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        requiresAdmin: true,\n                    },\n                },\n                // usrs\n                {\n                    path: \"/portal/admin/usrs\",\n                    name: \"admin_usrs\",\n                    component: () => import(\"../views/Admin/pages/UserTeacher.vue\"),\n                    meta: {\n                        page_title: \"Admin Panel | Users and Teachers\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        requiresAdmin: true,\n                    },\n                },\n                // msgs\n                {\n                    path: \"/portal/admin/msgs\",\n                    name: \"admin_msgs\",\n                    component: () => import(\"../views/Admin/pages/MessagesAlerts.vue\"),\n                    meta: {\n                        page_title: \"Admin Panel | Messages and Alerts\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        requiresAdmin: true,\n                    },\n                },\n                // usge\n                {\n                    path: \"/portal/admin/usge\",\n                    name: \"admin_usge\",\n                    component: () => import(\"../views/Admin/pages/UsageAnalytics.vue\"),\n                    meta: {\n                        page_title: \"Admin Panel | Usage Analytics\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        requiresAdmin: true,\n                    },\n                },\n            ],\n        },\n        {\n            path: \"/portal\",\n            name: \"portal\",\n            component: () => import(\"../views/Portal/Portal.vue\"),\n            meta: {\n                page_title: \"Portal\",\n                theme_color: {\n                    light: \"#f2f2f2\",\n                    dark: \"#121212\",\n                },\n                requiresAuth: true,\n            },\n            children: [\n                {\n                    path: \"/portal/tutorial/add\",\n                    name: \"onboarding\",\n                    component: () => import(\"../views/Portal/Onboarding.vue\"),\n                    meta: {\n                        page_title: \"Onboarding\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        block_close: true,\n                        noSurvey: true,\n                    },\n                },\n                {\n                    path: \"/portal/tutorial/:tab?\",\n                    name: \"tutorial\",\n                    component: () => import(\"../components/Tutorial/TutorialModal.vue\"),\n                    meta: {\n                        page_title: \"Tutorial Videos\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/study\",\n                    name: \"study\",\n                    component: () => import(\"../views/Portal/Portal.vue\"),\n                    meta: {\n                        page_title: \"Study Portal\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/study/session/:page?\",\n                    name: \"studysession\",\n                    component: () => import(\"../views/Portal/StudySession.vue\"),\n                    meta: {\n                        page_title: \"Study Session\",\n                        theme_color: {\n                            light: \"#f2f2f2\",\n                            dark: \"#121212\",\n                        },\n                        requiresAuth: true,\n                        block_close: true,\n                    },\n                    children: [\n                        {\n                            path: \"/portal/study/session/:page?/view/:ref?\",\n                            name: \"sessionview\",\n                            component: () => import(\"../views/Portal/ViewTask.vue\"),\n                            meta: {\n                                page_title: \"Session Session | View Task\",\n                                theme_color: {\n                                    light: \"#f2f2f2\",\n                                    dark: \"#121212\",\n                                },\n                                requiresAuth: true,\n                            },\n                        },\n                        {\n                            path: \"/portal/study/session/:page?/notes/:ref?\",\n                            name: \"sessionnotes\",\n                            component: () => import(\"../views/Portal/NotesTask.vue\"),\n                            meta: {\n                                page_title: \"Session Session | Task Notes\",\n                                theme_color: {\n                                    light: \"#f2f2f2\",\n                                    dark: \"#121212\",\n                                },\n                                requiresAuth: true,\n                            },\n                        },\n                    ],\n                },\n                {\n                    path: \"/portal/statistics\",\n                    name: \"stats\",\n                    component: () => import(\"../views/Portal/StatsModal.vue\"),\n                    meta: {\n                        page_title: \"View Statistics\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/survey/daily\",\n                    name: \"daily\",\n                    component: () => import(\"../views/Portal/DailySurvey.vue\"),\n                    meta: {\n                        page_title: \"Daily Check-In\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        block_close: true,\n                        blockStandardRedirect: true,\n                        noSurvey: true,\n                    },\n                },\n                {\n                    path: \"/portal/settings\",\n                    name: \"settings\",\n                    component: () => import(\"../views/Portal/SettingsModal.vue\"),\n                    meta: {\n                        page_title: \"Settings\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        noSurvey: true,\n                    },\n                },\n                {\n                    path: \"/portal/add\",\n                    name: \"addclass\",\n                    component: () => import(\"../views/Portal/AddClass.vue\"),\n                    meta: {\n                        page_title: \"Join a Class\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/add/ref/:ref?\",\n                    name: \"refclass\",\n                    component: () => import(\"../views/Portal/AddClass.vue\"),\n                    meta: {\n                        page_title: \"Join from Reference\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/add/code/:code\",\n                    name: \"codeclass\",\n                    component: () => import(\"../views/Portal/AddClass.vue\"),\n                    meta: {\n                        page_title: \"Join from Code\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/add/code\",\n                    name: \"codeenterclass\",\n                    component: () => import(\"../views/Portal/AddCode.vue\"),\n                    meta: {\n                        page_title: \"Enter Class Code\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    path: \"/portal/create\",\n                    name: \"createclass\",\n                    component: () => import(\"../views/Portal/CreateClass.vue\"),\n                    meta: {\n                        page_title: \"Teacher | Create Class\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        requiresTeacher: true,\n                    },\n                },\n                {\n                    path: \"/portal/new/:tasktype?\",\n                    name: \"newtask\",\n                    component: () => import(\"../views/Portal/CreateTask.vue\"),\n                    meta: {\n                        page_title: \"Teacher | Add Task\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        requiresTeacher: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/notes/:ref?\",\n                    name: \"notes\",\n                    component: () => import(\"../views/Portal/NotesTask.vue\"),\n                    meta: {\n                        page_title: \"Your Task Notes\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/view/:ref?\",\n                    name: \"viewtask\",\n                    component: () => import(\"../views/Portal/ViewTask.vue\"),\n                    meta: {\n                        page_title: \"View Task\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/view/:ref([^~]+~[^~]+)\",\n                    name: \"viewclass\",\n                    component: () => import(\"../views/Portal/ViewClass.vue\"),\n                    meta: {\n                        page_title: \"View Class\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/edit/t/:ref?\",\n                    name: \"edit\",\n                    component: () => import(\"../views/Portal/EditTask.vue\"),\n                    meta: {\n                        page_title: \"Edit Task\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        requiresTeacher: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/edit/c/:ref?\",\n                    name: \"editclass\",\n                    component: () => import(\"../views/Portal/EditClass.vue\"),\n                    meta: {\n                        page_title: \"Edit Class\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        requiresTeacher: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/archive/:type?/:ref?\",\n                    name: \"archive\",\n                    component: () => import(\"../views/Portal/ArchiveTask.vue\"),\n                    meta: {\n                        page_title: \"Confirm Task Archive\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                        requiresTeacher: true,\n                    },\n                },\n                {\n                    // specify param \"ref\" in the route\n                    path: \"/portal/leave/:ref?\",\n                    name: \"leave\",\n                    component: () => import(\"../views/Portal/LeaveClass.vue\"),\n                    meta: {\n                        page_title: \"Confirm Class Leave\",\n                        theme_color: {\n                            light: \"#b5b5b5\",\n                            dark: \"#0d0d0d\",\n                        },\n                        requiresAuth: true,\n                    },\n                },\n            ],\n        },\n        {\n            path: \"/portal/calendar\",\n            name: \"calendar\",\n            redirect: \"/portal?calendar=true\",\n            meta: {\n                page_title: \"Calendar\",\n                theme_color: {\n                    light: \"#f2f2f2\",\n                    dark: \"#121212\",\n                },\n                requiresAuth: true,\n            },\n        },\n        // redirect any /app routes to /portal\n        {\n            path: \"/app\",\n            redirect: \"/portal\",\n            meta: {\n                requiresAuth: true,\n            },\n        },\n        // redirect any /study routes to /portal/study\n        {\n            path: \"/study\",\n            redirect: \"/portal/study\",\n            meta: {\n                requiresAuth: true,\n            },\n        },\n        // redirect any /settings routes to /portal/settings\n        {\n            path: \"/settings\",\n            redirect: \"/portal/settings\",\n            meta: {\n                requiresAuth: true,\n            },\n        },\n        {\n            path: \"/survey/daily\",\n            redirect: \"/portal/survey/daily\",\n            meta: {\n                requiresAuth: true,\n            },\n        },\n    ],\n    parseQuery: (query) => require(\"qs\").parse(query),\n});\nexport default router;\n","/**\n * Group of stores that handle page-inspecific data and methods\n * @namespace store\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b;\n/**\n * The main store for the app, with most primary data and methods needed to function\n * @file store/index.ts\n * @namespace .main\n * @memberOf store\n */\n// Typescript Types\nexport var Theme;\n(function (Theme) {\n    Theme[\"Light\"] = \"light\";\n    Theme[\"Dark\"] = \"dark\";\n})(Theme || (Theme = {}));\n// setup Pinia store\nimport { defineStore } from \"pinia\";\nimport { _status, compatDateObj } from \"@/common\";\nimport { Toast, ErrorToast, cleanError, WarningToast, SuccessToast } from \"@svonk/util\";\n// get firebase requirements\nimport { collection, doc, setDoc, getDoc, getDocs, addDoc, writeBatch, updateDoc, deleteDoc, } from \"firebase/firestore\";\nimport CryptoJS from \"crypto-js\";\nimport { auth, db, authChangeAction, refreshTimeout } from \"../firebase\";\nimport { signInWithPopup, GoogleAuthProvider, signInWithRedirect } from \"firebase/auth\";\nconst provider = new GoogleAuthProvider();\nconst isElectron = ((_b = (_a = navigator === null || navigator === void 0 ? void 0 : navigator.userAgent) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === null || _b === void 0 ? void 0 : _b.indexOf(\" electron/\")) > -1;\nlet ORG_DOMAIN = `@${process.env.VUE_APP_ORG_DOMAIN}`;\n// add email and name to provider\nprovider.addScope(\"email\");\nprovider.addScope(\"profile\");\nauth.useDeviceLanguage();\n// constrict to only ORG_DOMAIN emails\nprovider.setCustomParameters({\n    login_hint: \"username\" + ORG_DOMAIN,\n    // hd: ORG_DOMAIN,\n});\n// import router\nimport router from \"@/router\";\nimport { useMagic } from \"@/store/magic\";\nfunction validOrgAcc(userEmail) {\n    return (userEmail === null || userEmail === void 0 ? void 0 : userEmail.split(\"@\")[1]) == ORG_DOMAIN.substring(1);\n}\nfunction isIFrame() {\n    try {\n        return window.self !== window.top;\n    }\n    catch (e) {\n        return true;\n    }\n}\n// get date in local time but with ISO format\nconst today = new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60 * 1000).toISOString().split(\"T\")[0];\n// define store\nexport const useMainStore = defineStore({\n    id: \"main\",\n    /** Function to create a clean store state, used for initialization. Will attempt to load from window.localStorage variable to save on firebase calls -> isn't always stable after app update that changes state keyings */\n    state: () => {\n        /**\n         * @namespace .main.state\n         * @description The state of the main store\n         * @memberOf .main\n         */\n        /* Set default store state */\n        let state = {\n            /**\n             * @memberOf .main.state\n             * @property {Object} user The user object from firebase auth\n             * @default null\n             */\n            user: null,\n            /**\n             * @memberOf .main.state\n             * @property {Object} account_doc The authenticated user's document from the users collection in firestore\n             * @default null\n             * @see {@link active_doc}\n             */\n            account_doc: null,\n            /**\n             * @memberOf .main.state\n             * @property {Object} linked_account_doc The linked account document from the users collection in firestore\n             * @default null\n             * @see {@link active_doc}\n             */\n            linked_account_doc: null,\n            /**\n             * @memberOf .main.state\n             * @property {Array} classes Collection of the firebase document ids of classes that the user is in\n             * @default []\n             * @see {@link fetch_classes}\n             * @see {@link get_tasks}\n             * @see {@link tasks}\n             */\n            classes: [],\n            /**\n             * @memberOf .main.state\n             * @property {Array} tasks Collection of the processed task objects\n             * @default []\n             * @see {@link get_tasks}\n             */\n            tasks: [],\n            /**\n             * @memberOf .main.state\n             * @property {String} loaded_email The email of the user that the classes have been loaded for (for previews in AddClass.vue)\n             * @default null\n             * @see {@link loaded_classes}\n             * @see {@link fetch_classes_by_email}\n             */\n            loaded_email: null,\n            /**\n             * @memberOf .main.state\n             * @property {Array} loaded_classes The classes that have been loaded for the loaded_email (for previews in AddClass.vue)\n             * @default null\n             * @see {@link loaded_email}\n             * @see {@link fetch_classes_by_email}\n             */\n            loaded_classes: null,\n            /**\n             * @memberOf .main.state\n             * @property {Object} teacher The teacher object, with doc_ref and collection_ref\n             * @default {doc_ref: null, collection_ref: null}\n             * @see {@link is_teacher}\n             * @see {@link create_teacher_doc}\n             */\n            teacher: {\n                doc_ref: null,\n                collection_ref: null,\n            },\n            /**\n             * @memberOf .main.state\n             * @property {Theme} theme The theme of the app, either Theme.Light or Theme.Dark\n             * @default null\n             * @see {@link get_theme}\n             * @see {@link toggle_theme}\n             * @see {@link clear}\n             * @note This is a local variable, and is while it may reflect what's in the user's document, it's not always accurate, though it is preferred locally, and persists across sessions / store {@link clear}s\n             */\n            theme: null,\n            /**\n             * @memberOf .main.state\n             * @property {Boolean} personal_account If the user is using their personal account (true) or a valid org account (false)\n             * @default false\n             * @see {@link linked_account_doc}\n             * @see {@link linked_account_ref}\n             * @see {@link active_doc}\n             * @see {@link active_ref}\n             */\n            personal_account: false,\n            /**\n             * @memberOf .main.state\n             * @property {Boolean} paused If the app is paused (true) or not (false)\n             * @default false\n             * @see {@link show_timeout}\n             * @see {@link hide_timeout}\n             */\n            paused: false,\n            /**\n             * @memberOf .main.state\n             * @property {Boolean} logout_prompt If the app is showing a logout prompt (true) or not (false)\n             * @default false\n             */\n            logout_prompt: false,\n        };\n        // setting up store\n        let local = window.localStorage.getItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_app_state`);\n        if (local && local != \"undefined\" && local != \"null\") {\n            try {\n                _status.log(\"↻ State from local storage\");\n                state = JSON.parse(local);\n                state.paused = false;\n                state.logout_prompt = false;\n                return state;\n            }\n            catch (err) {\n                _status.warn(\"⟳ Error parsing local storage state\", err);\n            }\n        }\n        // if no local storage, set up store\n        _status.log(\"🔨 Setting up store from scratch\");\n        return state;\n    },\n    /** The getters to get data that's based off of the store state, but requires manipulation\n     * @namespace .main.getters\n     * @memberof .main\n     */\n    getters: {\n        /**\n         * @memberOf .main.getters\n         * @function ORG_DOMAIN\n         * @description Get the domain of the organization (@domain.tld)\n         * @returns {String} The domain of the organization\n         */\n        ORG_DOMAIN() {\n            return ORG_DOMAIN;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function simplified\n         * @description Get if the user is using a simplified view (true) or not (false)\n         * @returns {Boolean} If the user is using a simplified view\n         */\n        simplified() {\n            var _a, _b;\n            return ((_b = (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.prefs) === null || _b === void 0 ? void 0 : _b.simplified) || false;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function linked_accounts\n         * @description Get all linked accounts from active_doc.linked\n         * @returns {Array} Array of linked account emails\n         * @default []\n         */\n        linked_accounts() {\n            if (!this.user || !this.active_doc)\n                return [];\n            // get all linked accounts from doc.linked\n            return this.active_doc.linked || [];\n        },\n        /**\n         * @memberOf .main.getters\n         * @function upcoming\n         * @description et the upcoming tasks (after 8AM today)\n         * @returns {Array} Array of upcoming tasks\n         * @default []\n         * @see {@link tasks}\n         * @see {@link upcoming_todo}\n         * @note Doesn't include notes\n         */\n        upcoming() {\n            if (!this.tasks)\n                return [];\n            const now = Date.now(); // new Date().setHours(0, 0, 0, 0);\n            // 8 hours in ms (show today's tasks as upcoming until 8AM)\n            const morning = 8 * 60 * 60 * 1000;\n            let upcoming = this.tasks.filter((task) => {\n                var _a;\n                return task.type != \"note\" && (((_a = task === null || task === void 0 ? void 0 : task.date) === null || _a === void 0 ? void 0 : _a.getTime) ? task.date.getTime() : 0) >= now - morning;\n            });\n            upcoming.sort((a, b) => {\n                if (!a.date && !b.date)\n                    return 0;\n                if (!a.date)\n                    return -1;\n                if (!b.date)\n                    return 1;\n                if (a.date < b.date)\n                    return -1;\n                if (a.date > b.date)\n                    return 1;\n                return 0;\n            });\n            return upcoming;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function upcoming_todo\n         * @description Get the upcoming tasks (after 8AM today) that havent been marked as done\n         * @returns {Array} Array of upcoming tasks\n         * @default []\n         * @see {@link tasks}\n         * @see {@link upcoming}\n         * @note Doesn't include notes\n         */\n        upcoming_todo() {\n            if (!this.upcoming)\n                return [];\n            return this.upcoming.filter((task) => { var _a; return !((_a = this.finished_tasks) === null || _a === void 0 ? void 0 : _a.includes(task.ref)); });\n        },\n        /**\n         * @memberOf .main.getters\n         * @function non_recent_signin\n         * @description Check if user signed in within the last 24 hours\n         * @returns {Boolean} if the user's session started within the last 24 hours\n         * @default false\n         */\n        non_recent_signin() {\n            var _a;\n            // return true if user signed in within the last 24 hours\n            if (!this.user)\n                return false;\n            let last_signin = (_a = this.user.metadata) === null || _a === void 0 ? void 0 : _a.lastSignInTime;\n            if (!last_signin)\n                return false;\n            let diff = new Date().getTime() - new Date(last_signin).getTime();\n            return diff > 24 * 60 * 60 * 1000;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function recently_joined\n         * @description Check if user joined within the last 12 hours\n         * @returns {Boolean} if the user's account was created within the last 12 hours\n         * @default false\n         */\n        recently_joined() {\n            var _a;\n            // return true if user joined within the last 12 hours\n            if (!this.user)\n                return false;\n            let creation_time = (_a = this.user.metadata) === null || _a === void 0 ? void 0 : _a.creationTime;\n            if (!creation_time)\n                return false;\n            let diff = new Date().getTime() - new Date(creation_time).getTime();\n            return diff < 12 * 60 * 60 * 1000;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function is_admin\n         * @description Check if user is a admin - currently true for all users for testing purposes TODO\n         * @returns {Boolean} if the user is an admin\n         * @default false\n         */\n        // TODO: update this to use actual permissions\n        is_admin() {\n            return this.is_teacher;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function is_teacher\n         * @description Check if user is a teacher, or is in teacher mode locally (for testing)\n         * @returns {Boolean} if the user is a teacher\n         * @default false\n         */\n        is_teacher() {\n            var _a, _b, _c, _d;\n            // check if email is a teacher email (ends in this.ORG_DOMAIN) && has letters in the first part\n            if (!this.user)\n                return false;\n            if (((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.teacher_mode) == true || ((_b = window === null || window === void 0 ? void 0 : window.localStorage) === null || _b === void 0 ? void 0 : _b[`${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`]) == \"true\") {\n                if (((_c = this.active_doc) === null || _c === void 0 ? void 0 : _c.teacher_mode) == true || ((_d = this.active_doc) === null || _d === void 0 ? void 0 : _d.teacher_mode) == null) {\n                    window.localStorage.setItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`, \"true\");\n                    if (this.personal_account) {\n                        _status.log(\"🏫 No teacher mode for personal account\");\n                        return false;\n                    }\n                    else {\n                        _status.log(\"🏫 Local teacher mode\");\n                        return true;\n                    }\n                }\n                else {\n                    window.localStorage.setItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`, \"false\");\n                    _status.log(\"🏫 Teacher mode disabled locally to reflect remote changes\");\n                }\n            }\n            let email = this.user.email;\n            let [first, last] = email.split(\"@\");\n            // TODO: add .env option for teacher/student pattern\n            if (\"@\" + last == this.ORG_DOMAIN && !/\\d/.test(first) && this.ORG_DOMAIN == \"@mvla.net\") {\n                _status.log(\"🏫 Teacher mode enabled for non-student district account\");\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n        /**\n         * @memberOf .main.getters\n         * @function done_daily_survey\n         * @description Check if user has completed the daily survey, or is a teacher\n         * @returns {Boolean} if the user / proxy for the user has completed the join form\n         * @default false\n         * @see {@link save_daily_survey}\n         * @note Returns true if user is a teacher, since we're not tracking data for them\n         */\n        done_daily_survey() {\n            var _a, _b, _c, _d, _e, _f;\n            if (!this.done_tutorial)\n                return true;\n            if (!this.active_doc)\n                return false;\n            if (((_b = (_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.prefs) === null || _b === void 0 ? void 0 : _b.skip_survey) || process.env.VUE_APP_NOSURVEY) {\n                _status.log(`📃 Skipping survey from {${((_d = (_c = this.active_doc) === null || _c === void 0 ? void 0 : _c.prefs) === null || _d === void 0 ? void 0 : _d.skip_survey) ? \"user prefs\" : \".env\"}} override`);\n                return \"skipped\";\n            }\n            // if (this.is_teacher) return true;\n            return ((_e = this.active_doc) === null || _e === void 0 ? void 0 : _e.done_surveys) && ((_f = this.active_doc.done_surveys) === null || _f === void 0 ? void 0 : _f.includes(today));\n        },\n        /**\n         * @memberOf .main.getters\n         * @function done_tutorial\n         * @description Check if user has completed the tutorial\n         * @returns {Boolean} if the user / proxy for the user has completed the tutorial\n         * @default false\n         */\n        done_tutorial() {\n            var _a;\n            if (!this.account_doc)\n                return false;\n            return (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.done_tutorial;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function done_join_form\n         * @description Check if user has completed the join form\n         * @returns {Boolean} if the user / proxy for the user has completed the join form\n         * @default false\n         */\n        done_join_form() {\n            var _a;\n            if (!this.user)\n                return false;\n            return !!((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.join_form);\n        },\n        /**\n         * @memberOf .main.getters\n         * @function account_ref\n         * @description Get the user's absolute document reference (the signed-in account, even if it's a linked account)\n         * @returns {Object} The firebase document reference for the user's account\n         * @default null\n         */\n        account_ref() {\n            if (!this.user)\n                return null;\n            return doc(db, \"users\", this.user.uid);\n        },\n        /**\n         * @memberOf .main.getters\n         * @function linked_account_ref\n         * @description Get the user's linked account document reference (the account that the user is linked to, if it exists)\n         * @returns {Object} The firebase document reference for the user's linked account\n         * @default null\n         */\n        linked_account_ref() {\n            var _a;\n            if (!this.user || !((_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.linked_to))\n                return null;\n            return doc(db, \"users\", this.account_doc.linked_to);\n        },\n        /**\n         * @memberOf .main.getters\n         * @function active_ref\n         * @description Get the user's active document reference (the signed-in account's doc ref, or the linked account's if it exists)\n         * @returns {Object} The firebase document reference for the user's active account\n         * @default null\n         */\n        active_ref() {\n            return this.personal_account ? this.linked_account_ref : this.account_ref;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function active_doc\n         * @description Get the user's active document (the signed-in account's doc, or the linked account's if it exists)\n         * @returns {Object} The local copy of the document being used for dashboard data\n         * @default null\n         * @see {@link active_ref}\n         */\n        active_doc() {\n            return this.personal_account ? this.linked_account_doc : this.account_doc;\n        },\n        /**\n         * @memberOf .main.getters\n         * @function get_theme\n         * @description Get theme from local storage or user doc\n         * @returns {Theme} Theme.Light or Theme.Dark\n         * @default Theme.Light\n         */\n        get_theme() {\n            var _a, _b;\n            // get local\n            let local_theme = this.theme || window.localStorage.getItem(\"theme\");\n            // get userdoc theme\n            let account_doc_theme = (_b = (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.prefs) === null || _b === void 0 ? void 0 : _b.theme;\n            // set new to system by default\n            let new_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? Theme.Dark : Theme.Light;\n            // if not userdoc theme, use local theme, and set userdoc theme to local theme\n            if (!account_doc_theme) {\n                if (local_theme) {\n                    // set to local if local exists\n                    new_theme = local_theme;\n                }\n                else {\n                    // set to system if local doesn't exist, and set update local\n                    window.localStorage.setItem(\"theme\", new_theme);\n                }\n                if (this.account_doc) {\n                    this.account_doc.prefs = Object.assign(Object.assign({}, this.account_doc.prefs), { theme: new_theme });\n                    // TODO: TS fix this unintended side effect\n                    // @ts-ignore: TS2339\n                    this.update_wrapper_acc_doc();\n                }\n                return local_theme || Theme.Light;\n            }\n            // if userdoc theme, use userdoc theme, and set local theme to userdoc theme\n            else {\n                if (local_theme != account_doc_theme) {\n                    window.localStorage.setItem(\"theme\", account_doc_theme);\n                }\n                return account_doc_theme ? account_doc_theme : Theme.Light;\n            }\n        },\n        /**\n         * @memberOf .main.getters\n         * @function get_loaded_classes\n         * @description Get the classes that have been loaded for the loaded_email, and set the .is_joined property on each\n         * @returns {Array} Array of classes that have been loaded for the loaded_email\n         * @default []\n         * @see {@link loaded_classes}\n         * @see {@link loaded_email}\n         * @see {@link fetch_classes_by_email}\n         */\n        get_loaded_classes() {\n            if (!this.loaded_classes || !this.loaded_classes.length)\n                return [];\n            let classes = this.loaded_classes;\n            return classes.map((class_obj) => {\n                var _a, _b;\n                class_obj.is_joined = (_b = (_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.classes) === null || _b === void 0 ? void 0 : _b.includes([this.loaded_email, class_obj === null || class_obj === void 0 ? void 0 : class_obj.id].join(\"/\"));\n                return class_obj;\n            });\n        },\n        /**\n         * @memberOf .main.getters\n         * @function finished_tasks\n         * @description return all the finished tasks\n         * @returns {Array} Finished Tasks\n         * @default false\n         * @see {@link set_finished}\n         */\n        finished_tasks() {\n            try {\n                if (!this.active_doc)\n                    throw \"No active doc\";\n                return this.active_doc.finished || [];\n            }\n            catch (err) {\n                _status.warn(\"🔗 Couldn't get finished tasks\", err);\n                return [];\n            }\n        },\n        /**\n         * @memberOf .main.getters\n         * @function notes\n         * @description return all the notes in a dictionary with the ref as the key\n         * @returns {Object} Dictionary of notes with refs as keys\n         * @default {}\n         */\n        notes() {\n            try {\n                if (!this.active_doc)\n                    throw \"No active doc\";\n                return this.active_doc.notes || {};\n            }\n            catch (err) {\n                _status.warn(\"🔗 Couldn't get notes\", err);\n                return {};\n            }\n        },\n    },\n    /** The actions to manipulate the store state\n     * @namespace .main.actions\n     */\n    actions: {\n        /**\n         * @memberOf .main.actions\n         * @function report_logs\n         * @description save logs to server for debugging later, with some session data attached\n         * @returns {Promise}\n         */\n        report_logs() {\n            try {\n                // get stream types\n                const streamObj = _status.getStream();\n                const streamText = _status.textStream();\n                // write to new firebase doc in db/logs/ and save the ID\n                const docRef = doc(collection(db, \"logs\"));\n                setDoc(docRef, {\n                    date: new Date(),\n                    date_inversed: new Date().getTime() * -1,\n                    user: this.user ? this.user.uid : \"no user\",\n                    email: this.user ? this.user.email : \"no user\",\n                    stream: {\n                        json: streamObj,\n                        text: streamText,\n                    },\n                });\n                new SuccessToast(\"Logs reported and saved locally, check console for details\", 3500);\n                _status.log(`📊 Reported logs to server as '${docRef.id}'`);\n                // save to disk\n                void _status.saveStream(docRef.id);\n                return Promise.resolve(docRef.id);\n            }\n            catch (err) {\n                return Promise.reject(\"Failed to report logs:\" + err);\n            }\n        },\n        /**\n         * @memberOf .main.actions\n         * @function class_text\n         * @description get the smart text associated with a given class\n         * @param {String} class_obj\n         * @returns {String} text - the formatted name text associated with the class data\n         */\n        class_text(class_obj) {\n            if (!class_obj)\n                return;\n            if (class_obj.period)\n                return `P${class_obj.period} - ${class_obj.name}`;\n            return class_obj.name;\n        },\n        /**\n         * @memberOf .main.actions\n         * @function set_account_pref\n         * @description Set a preference in the account doc\n         * @param {String} pref The preference to set\n         * @param {String} value The value to set the preference to\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         */\n        set_account_pref(pref, value) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                try {\n                    if (!this.account_ref)\n                        throw \"No account doc\";\n                    if (!pref)\n                        throw \"No pref provided\";\n                    yield this.update_wrapper_with_merge({\n                        prefs: Object.assign(Object.assign({}, (_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.prefs), { [pref]: value }),\n                    });\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function get_surveys\n         * @description Get the survey data for the given dates for this user\n         * @param {Array} dates Array of dates to get the survey data for\n         * @returns {Array} The survey data for the given dates, with date objects added to each object\n         * @see {@link save_daily_survey}\n         * @see {@link done_daily_survey}\n         */\n        get_surveys(dates) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.user)\n                    return Promise.reject(\"Missing user\");\n                // get all the firebase surveys in \"/survey/{date}/{uid}\" format, in parallel\n                try {\n                    let survey_refs = dates.map((date) => { var _a, _b; return doc(db, \"survey\", \"daily\", date, this.personal_account ? (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.linked_to : (_b = this.user) === null || _b === void 0 ? void 0 : _b.uid); });\n                    let survey_promises = survey_refs.map((ref) => getDoc(ref));\n                    const surveys = (yield Promise.all(survey_promises))\n                        // convert each survey doc to an object with date and data\n                        .map((doc, i) => {\n                        if (!doc.exists())\n                            return { date: dates[i], error: \"No survey data for this date\" };\n                        return { date: dates[i], data: doc.data() };\n                    });\n                    return Promise.resolve(surveys);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function get_cached_surveys\n         * @description Get the survey data for the given dates for this user, using the cached data in the active doc. If the data does not include the given dates, get the data from the server and save it to use as the cashe\n         * @param {Array} dates Array of dates to get the survey data for\n         * @returns {Promise} Promise resolving to survey data for the given dates, with date objects added to each object\n         * @see {@link save_daily_survey}\n         * @see {@link done_daily_survey}\n         */\n        get_cached_surveys(dates_1) {\n            return __awaiter(this, arguments, void 0, function* (dates, force_refresh = false) {\n                var _a, _b, _c;\n                if (!this.user)\n                    return Promise.reject(\"Missing user\");\n                try {\n                    const processed_ref = doc(db, \"processed_surveys\", this.personal_account ? (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.linked_to : this === null || this === void 0 ? void 0 : this.user.uid);\n                    // check if active doc has survey data for the given dates, and if so, return it\n                    const current_get = yield getDoc(processed_ref);\n                    const current = current_get.exists() ? ((_b = current_get.data()) === null || _b === void 0 ? void 0 : _b.list) || [] : [];\n                    // get array of all the dates by mapping\n                    const current_dates = current === null || current === void 0 ? void 0 : current.map((e) => e.date);\n                    const errored_dates = ((_c = current === null || current === void 0 ? void 0 : current.filter((e) => e.error)) === null || _c === void 0 ? void 0 : _c.map((e) => e.date)) || [];\n                    // check if current_dates includes all the dates\n                    const all_dates = dates.every((e) => current_dates.includes(e));\n                    // if has all, return the cashed data\n                    if (all_dates && !force_refresh) {\n                        _status.log(\"📊 Using cached surveys\");\n                        return Promise.resolve(current);\n                    }\n                    // if not, get the survey data for the given dates, and save it to the active doc\n                    else {\n                        if (force_refresh)\n                            _status.log(\"📊 Forcing refresh of surveys\");\n                        // identify which dates are missing if !force_refresh\n                        const added_dates = force_refresh ? dates : dates.filter((e) => !current_dates.includes(e) || errored_dates.includes(e));\n                        // use get_surveys to get the ungotten data\n                        const added_surveys = (yield this.get_surveys(added_dates));\n                        // add the new surveys to the current surveys without doubling up, keep them in order\n                        let new_surveys = [];\n                        for (const date of dates) {\n                            if (added_dates.includes(date)) {\n                                // add the new survey\n                                new_surveys.push(added_surveys[added_dates.indexOf(date)]);\n                            }\n                            else {\n                                // add the old survey\n                                new_surveys.push(current[current_dates.indexOf(date)]);\n                            }\n                        }\n                        // add the surveys to the active doc\n                        yield setDoc(processed_ref, { list: new_surveys, updated: Date.now() }, { merge: true });\n                        _status.log(\"📊 Got surveys from server\");\n                        return Promise.resolve(new_surveys);\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function note_for\n         * @description Get the note for the given ref\n         * @param {String} ref The ref of the task to get the note for\n         * @returns {String} The note for the given ref\n         * @see {@link set_note}\n         * @see {@link notes}\n         */\n        note_for(ref) {\n            const path = this.ref_to_path(ref);\n            return (this.notes && path && this.notes[path]) || null;\n        },\n        /**\n         * @memberOf .main.actions\n         * @function set_note\n         * @description set a task with the given path to have a note in the keyed \"notes\" property of the active doc (remove if value is falsey, add note if truthy)\n         * @param {String} note The note to set\n         * @param {String} ref The ref of the task to set the note for\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link note_for}\n         * @see {@link notes}\n         */\n        set_note(note, ref) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!this.active_doc)\n                        throw \"No active doc\";\n                    if (!ref)\n                        throw \"No ref provided\";\n                    const path = this.ref_to_path(ref);\n                    if (!path)\n                        throw \"Invalid ref\";\n                    let doc = this.active_doc;\n                    if (!doc.notes) {\n                        doc.notes = {};\n                    }\n                    doc.notes[path] = note || null;\n                    this.set_active(doc);\n                    yield this.update_remote();\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function set_finished\n         * @description set a task with the given ref to finished in the finished array of the active doc (remove if finished is false, add path if finished is true)\n         * @param {Boolean} finished The finished status to set\n         * @param {String} ref The ref of the task to check\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link is_finished}\n         */\n        set_finished(finished, ref) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!this.active_doc)\n                        throw \"No active doc\";\n                    if (!ref)\n                        throw \"No reference(s) provided\";\n                    const paths = Array.isArray(ref) ? ref : [ref];\n                    let doc = this.active_doc;\n                    if (!doc.finished) {\n                        doc.finished = [];\n                    }\n                    // if finished, add to finished array, else remove from finished array\n                    if (finished) {\n                        for (let p of paths) {\n                            if (!doc.finished.includes(p)) {\n                                doc.finished.push(p);\n                            }\n                        }\n                    }\n                    else {\n                        doc.finished = doc.finished.filter((p) => !paths.includes(p));\n                    }\n                    this.set_active(doc);\n                    yield this.update_remote();\n                    new SuccessToast((paths.length > 1 ? \"Tasks\" : useMagic().done_prefix(this.tasks.find((e) => e.ref == paths[0]))) + (finished ? \" marked as finished\" : \" marked as unfinished\"), 2000);\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    new ErrorToast(`Task(s) could not be ${finished ? \"marked as finished\" : \"marked as unfinished\"}`, err, 2000);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function path_to_ref\n         * @description Convert a path to a ref (email~class_id?~task_id)\n         * @param {String} path The path to convert\n         * @returns {String} The ref (email~class_id?~task_id)\n         * @default null\n         */\n        path_to_ref(...args) {\n            //join all args with \"/\" and let path equal that\n            const path = [...args].join(\"/\");\n            if (!path.length)\n                return null;\n            let [_email, _id, task_id] = path.split(\"/\");\n            if (!_email || !_id)\n                return null;\n            _email = _email.split(\"@\")[0];\n            return task_id ? `${_email}~${_id}~${task_id}` : `${_email}~${_id}`;\n        },\n        /**\n         * @memberOf .main.actions\n         * @function ref_to_path\n         * @description Convert a ref to a path (email/class_id?/task_id)\n         * @param {String} path The path to convert\n         * @returns {String} The ref (email/class_id?/task_id)\n         * @default null\n         */\n        ref_to_path(...args) {\n            //join all args with \"/\" and let path equal that\n            const ref = [...args].join(\"~\");\n            if (!ref.length)\n                return null;\n            let [_email, _id, task_id] = ref.split(\"~\");\n            if (!_email || !_id)\n                return null;\n            _email += this.ORG_DOMAIN;\n            return task_id ? `${_email}/${_id}/${task_id}` : `${_email}/${_id}`;\n        },\n        /**\n         * @memberOf .main.actions\n         * @function hash\n         * @param {String} ref ref in email/uid format\n         * @returns {String} 6-character code from ref\n         * @see {@link code_from_ref}\n         */\n        hash(ref) {\n            const hash = CryptoJS.SHA256(ref).toString();\n            return hash.substring(0, 5);\n        },\n        /**\n         * @memberOf .main.actions\n         * @function code_from_ref\n         * @description Create a proxy code from a ref (email/uid)\n         * @param {String} ref ref in email/uid format\n         * @see {@link hash}\n         */\n        code_from_ref(ref) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!ref)\n                        return Promise.reject(\"No ref provided\");\n                    // fix ref to be in email@ORG_DOMAIN/uid\n                    // - fix for different formats\n                    ref = ref.split(\"~\").join(\"/\");\n                    // - remove domain from email and re-add\n                    let [_email, _id] = ref.split(\"/\");\n                    if (!_email || !_id)\n                        return Promise.reject(\"Invalid ref\");\n                    _email = _email.split(\"@\")[0] + this.ORG_DOMAIN;\n                    ref = _email + \"/\" + _id;\n                    // get code\n                    const code = this.hash(ref);\n                    // check if class object already has code in this.classes\n                    const class_obj = this.classes.find((e) => e.id == ref);\n                    if (!class_obj)\n                        return Promise.reject(\"No matching class found\");\n                    if ((class_obj === null || class_obj === void 0 ? void 0 : class_obj.code) !== code) {\n                        // add ref to code doc\n                        const code_ref = doc(db, \"codes\", code);\n                        yield setDoc(code_ref, { ref: ref });\n                        // add code to class doc\n                        const class_ref = doc(db, \"classes\", _email, \"classes\", _id);\n                        yield updateDoc(class_ref, { code: code });\n                    }\n                    return Promise.resolve(code);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function ref_from_code\n         * @description Get the ref (email/uid) from a code\n         * @param {String} code The code to get the ref for\n         * @returns {Promise} A promise that resolves to the ref (email/uid) or rejects with an error\n         */\n        ref_from_code(code) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                try {\n                    if (!code)\n                        throw \"No code provided\";\n                    // get ref from code doc\n                    const code_ref = doc(db, \"codes\", code);\n                    const code_doc = yield getDoc(code_ref);\n                    _status.log(\"🔗 Got code doc\", code_doc.data());\n                    if (!code_doc.exists())\n                        throw \"Code doesn't exist\";\n                    let ref = this.path_to_ref((_a = code_doc.data()) === null || _a === void 0 ? void 0 : _a.ref);\n                    if (!ref)\n                        throw \"Code doesn't have ref\";\n                    return Promise.resolve(ref);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function toggle_teacher\n         * @description Toggle teacher mode (for testing)\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link is_teacher}\n         */\n        toggle_teacher() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                // use localStorage. _teacher_mode as basis for toggle, then set the localStorage and remote doc\n                if (!this.user)\n                    return;\n                let prev = ((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.teacher_mode) || window.localStorage.getItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`) == \"true\";\n                window.localStorage.setItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_teacher_mode`, !prev);\n                let new_text = !prev ? \"on\" : \"off\";\n                if (this.active_doc) {\n                    this.active_doc.teacher_mode = !prev;\n                    yield this.update_remote();\n                    _status.log(`🏫 Remote teacher mode toggled ${new_text}`);\n                }\n                _status.log(`🏫 Local teacher mode toggled ${new_text}`);\n                new SuccessToast(`Teacher mode toggled ${new_text}`, 2000);\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function get_tasks\n         * @description Get all tasks from all classes\n         * @returns {Promise} Promise that resolves to Array of all tasks from all classes, with class name and color added\n         * @default []\n         * @see {@link fetch_classes}\n         */\n        get_tasks() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c, _d, _e;\n                try {\n                    if (!((_a = this.classes) === null || _a === void 0 ? void 0 : _a.length))\n                        return Promise.resolve([]);\n                    // get all the classes with this.classes(), then get all their tasks and combine them into an array\n                    let tasks = [];\n                    let classes = this.classes;\n                    for (let i = 0; i < classes.length; i++) {\n                        let class_tasks = classes[i].tasks;\n                        class_tasks = class_tasks ? class_tasks : [];\n                        // add class name and color to each task\n                        for (let j = 0; j < ((class_tasks === null || class_tasks === void 0 ? void 0 : class_tasks.length) || 0); j++) {\n                            classes[i].name = classes[i].name ? classes[i].name : \"Unnamed Class\";\n                            // check task date type and convert to date object if necessary\n                            let date;\n                            if (typeof class_tasks[j].date == \"string\") {\n                                // convert to mm-dd-yyyy from yyyy-mm-dd\n                                class_tasks[j].date = (_c = (_b = class_tasks[j]) === null || _b === void 0 ? void 0 : _b.date) === null || _c === void 0 ? void 0 : _c.split(\"T\")[0];\n                                let [year, month, day] = (_e = (_d = class_tasks[j]) === null || _d === void 0 ? void 0 : _d.date) === null || _e === void 0 ? void 0 : _e.split(\"-\");\n                                class_tasks[j].date = `${month}-${day}-${year}`;\n                                date = compatDateObj(class_tasks[j].date);\n                                date = isNaN(+date) ? null : date;\n                            }\n                            else {\n                                date = class_tasks[j].date;\n                            }\n                            // set color from parent class color\n                            class_tasks[j].color = classes[i].color;\n                            tasks.push(Object.assign(Object.assign({}, class_tasks[j]), { date: date, class_name: this.class_text(classes[i]) }));\n                        }\n                    }\n                    // sort tasks by day, if day the same, sort by period, then by name\n                    tasks.sort((a, b) => {\n                        a.name = a.name ? a.name : \"\";\n                        b.name = b.name ? b.name : \"\";\n                        if (a.date && b.date) {\n                            if (a.date.getTime() == b.date.getTime()) {\n                                if (a.period == b.period) {\n                                    return a.name.localeCompare(b.name);\n                                }\n                                return a.period - b.period;\n                            }\n                            return a.date.getTime() - b.date.getTime();\n                        }\n                        return a.name.localeCompare(b.name);\n                    });\n                    this.tasks = tasks;\n                    return Promise.resolve(tasks);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function clear\n         * @description Reset the store state and local storage, and redirect to home if page requires auth\n         * @note Imperfect, and isn't enough to prevent errors when the app updates to a version with a different store state structure\n         */\n        clear() {\n            var _a, _b, _c;\n            this.user = null;\n            this.account_doc = null;\n            this.linked_account_doc = null;\n            this.classes = [];\n            this.tasks = [];\n            this.loaded_email = null;\n            this.loaded_classes = null;\n            this.personal_account = false;\n            this.teacher = {\n                doc_ref: null,\n                collection_ref: null,\n            };\n            window.localStorage.removeItem(`${process.env.VUE_APP_BRAND_NAME_SHORT}_app_state`);\n            // if page requires auth, redirect to home\n            if ((_c = (_b = (_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.meta) === null || _c === void 0 ? void 0 : _c.requiresAuth) {\n                router.push(\"/\");\n            }\n        },\n        /**\n         * @memberOf .main.actions\n         * @function set_active\n         * @description Set the active document (the signed-in account's doc, or the linked account's if it exists) to the provided document\n         * @param {Object} data The document data to replace the active document (account_doc or linked_doc) with\n         */\n        set_active(data) {\n            try {\n                if (!data)\n                    throw \"No data provided\";\n                if (this.personal_account) {\n                    this.linked_account_doc = data;\n                }\n                else {\n                    this.account_doc = data;\n                }\n                return Promise.resolve();\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        },\n        /**\n         * @memberOf .main.actions\n         * @function doc_from_uid\n         * @description Get a user document from a uid\n         * @param {String} uid The uid of the user to get the document for\n         * @returns {Promise} A promise that resolves to the {Object} user document or rejects with an {String} error\n         * @see {@link getDoc}\n         * @see {@link link_account_uid}\n         */\n        doc_from_uid(uid) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!uid)\n                        throw \"No account uid provided\";\n                    // get user document from uid\n                    const linked_doc = yield getDoc(doc(db, \"users\", uid));\n                    _status.log(\"🔗 Got linking account's document\");\n                    if (!linked_doc.exists())\n                        throw \"Account doesn't exist or you haven't been added yet\";\n                    return Promise.resolve(linked_doc.data());\n                }\n                catch (err) {\n                    _status.warn(\"🔗 Couldn't get linking account's document\", err);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function link_account_uid\n         * @description Link a user account to another user's account by uid (for personal accounts only)\n         * @param {String} uid The uid of the user to link to\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link invite_linked}\n         */\n        link_account_uid(uid) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!uid || !this.account_doc)\n                    return;\n                if (!this.personal_account) {\n                    new WarningToast(\"This account is a primary account and cannot be linked\", 3000);\n                    return;\n                }\n                if (!this.account_doc) {\n                    yield this.create_doc();\n                    _status.log(\"📄 Dreated doc\", this.account_doc);\n                }\n                try {\n                    const linked_doc = yield this.doc_from_uid(uid);\n                    if (!linked_doc)\n                        throw \"Account doesn't exist or you haven't been invited\";\n                    // update remote\n                    this.account_doc.linked_to = uid;\n                    yield this.update_wrapper_acc_doc();\n                    new SuccessToast(`Successfully linked to ${linked_doc.name}'s account!`, 4000);\n                }\n                catch (err) {\n                    new ErrorToast(\"Couldn't link account\", err, 2000);\n                    return Promise.reject(err);\n                }\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function invite_linked\n         * @description Invite a user account to link to another user's account (for personal accounts only,) including sending them an email with the code to join\n         * @param {String} email The email of the user to invite (and send an invite email to)\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         */\n        invite_linked(email) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c, _d, _e, _f, _g, _h;\n                if (!this.user || !this.active_doc || !this.account_doc)\n                    return;\n                if (this.personal_account) {\n                    new WarningToast(\"This account is already linked!\", 2000);\n                }\n                // exclude empty or mvla emails\n                if (!email || validOrgAcc(email) || !email.includes(\"@\")) {\n                    new WarningToast(`Please enter a valid non-${process.env.VUE_APP_ORG_NAME} email`, 2000);\n                    return;\n                }\n                // check if email is already linked (has entry with matching .email)\n                if (this.linked_accounts.includes(email)) {\n                    new WarningToast(\"That account is already linked\", 2000);\n                    return;\n                }\n                // add to doc.linked\n                if (!this.active_doc.linked) {\n                    if (this.personal_account && this.linked_account_doc) {\n                        this.linked_account_doc.linked = [];\n                    }\n                    else {\n                        this.account_doc.linked = [];\n                    }\n                }\n                // add email to queue\n                const email_queue = collection(db, \"mail\");\n                try {\n                    const sent_email = yield addDoc(email_queue, {\n                        to: email,\n                        cc: this.user.email,\n                        from: `${this.active_doc.name} via ${process.env.VUE_APP_BRAND_NAME_LONG} <${process.env.VUE_APP_BRAND_MAIL_ADDRESS}>`,\n                        fromname: this.active_doc.name + ` via ${process.env.VUE_APP_BRAND_NAME_LONG}`,\n                        template: {\n                            name: \"link_invite\",\n                            data: {\n                                sender_name: this.active_doc.name.split(\" \")[0],\n                                sender_uid: this.user.uid,\n                            },\n                        },\n                    });\n                    // wait for the email document to have keys .delivery.attempts > 0 and .delivery.error == null\n                    const email_doc_ref = doc(email_queue, sent_email.id);\n                    let email_doc = yield getDoc(email_doc_ref);\n                    let checks = 1;\n                    while (!email_doc.exists() || (!!((_b = (_a = email_doc.data()) === null || _a === void 0 ? void 0 : _a.delivery) === null || _b === void 0 ? void 0 : _b.attempts) == 0 && checks <= 3)) {\n                        yield new Promise((resolve) => setTimeout(resolve, (2 ^ checks) * 2000));\n                        email_doc = yield getDoc(email_doc_ref);\n                        _status.log(\"📧 Checked email doc\");\n                        checks++;\n                    }\n                    if (!((_f = (_e = (_d = (_c = email_doc.data()) === null || _c === void 0 ? void 0 : _c.delivery) === null || _d === void 0 ? void 0 : _d.info) === null || _e === void 0 ? void 0 : _e.accepted) === null || _f === void 0 ? void 0 : _f.includes(email)) || ((_h = (_g = email_doc.data()) === null || _g === void 0 ? void 0 : _g.delivery) === null || _h === void 0 ? void 0 : _h.attempts) == 0) {\n                        _status.log(\"📧 Email failed to send\", email_doc.data());\n                        throw \"Email failed to send\";\n                    }\n                    // update remote\n                    if (this.personal_account && this.linked_account_doc) {\n                        this.linked_account_doc.linked.push(email);\n                    }\n                    else {\n                        this.account_doc.linked.push(email);\n                    }\n                    yield this.update_remote();\n                    new SuccessToast(`We notified ${email}, you'll receive a copy of the email too!`, 4000);\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    new ErrorToast(`Couldn't invite \"${email}\"`, err, 2000);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function uninvite_linked\n         * @description Unlink a user account from another user's account (for personal accounts only)\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link invite_linked}\n         */\n        uninvite_linked(email) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                try {\n                    if (!this.user)\n                        return;\n                    // if exists in userdoc.linked, remove and save\n                    if ((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.linked.includes(email)) {\n                        let filtered_linked = ((_b = this.active_doc.linked) === null || _b === void 0 ? void 0 : _b.filter((e) => e != email)) || [];\n                        if (this.personal_account && this.linked_account_doc) {\n                            this.linked_account_doc.linked = filtered_linked;\n                        }\n                        else if (this.account_doc) {\n                            this.account_doc.linked = filtered_linked;\n                        }\n                        yield this.update_remote();\n                        new SuccessToast(`Removed ${email} from your linked accounts`, 2000);\n                    }\n                    else {\n                        new WarningToast(`${email} is not linked to this account`, 2000);\n                    }\n                    Promise.resolve();\n                }\n                catch (err) {\n                    new ErrorToast(`Couldn't unlink \"${email}\"`, err, 2000);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function refresh_timeout\n         * @description A proxy for the refreshTimeout function in firebase.ts (to reduce unnecessary onSnapshot calls)\n         * @param {Number} delay The delay in milliseconds to refresh the timeout for (default 1000 set in firebase.ts)\n         * @see {@link refreshTimeout}\n         */\n        refresh_timeout(delay) {\n            this.paused = false;\n            // refresh listener timeout if user is logged in\n            if (!this.user)\n                return;\n            refreshTimeout(delay);\n        },\n        /**\n         * @memberOf .main.actions\n         * @function login_promise\n         * @description A wrapper for the store.user state, to wait for the user to be set\n         * @returns {Promise} A promise that resolves to the user object\n         * @see {@link user}\n         * @see {@link login}\n         * @note Currently not very widely used, but should be implemented more in order to prevent excessive store watcher calls\n         */\n        login_promise() {\n            return __awaiter(this, void 0, void 0, function* () {\n                // wait for this.user to be set\n                return new Promise((resolve) => {\n                    const interval = setInterval(() => {\n                        if (this.user) {\n                            clearInterval(interval);\n                            resolve(this.user);\n                        }\n                    }, 100);\n                });\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function save_join_form\n         * @description Save the responses from the join form to the active user's document\n         * @param {Object} responses The responses from the join form to save\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         */\n        save_join_form(responses) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!this.user || !this.active_doc)\n                        throw \"No doc to save join form to\";\n                    // wait for user doc to be created / exist then save responses to doc.join_form\n                    if (this.personal_account) {\n                        this.linked_account_doc = this.linked_account_doc || {};\n                        this.linked_account_doc.join_form = responses;\n                    }\n                    else {\n                        this.account_doc = this.account_doc || {};\n                        this.account_doc.join_form = responses;\n                    }\n                    yield this.update_remote();\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function finish_tutorial\n         * @description Set the user's tutorial status to finished\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link done_tutorial}\n         */\n        finish_tutorial() {\n            return __awaiter(this, arguments, void 0, function* (new_val = true) {\n                try {\n                    if (!this.user || !this.account_doc)\n                        throw \"No doc to save tutorial status to\";\n                    this.account_doc.done_tutorial = new_val;\n                    yield this.update_wrapper_with_merge({ done_tutorial: new_val });\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function save_daily_survey\n         * @description Save the responses from the daily survey to the active user's document\n         * @param {Object} responses The responses from the daily survey to save\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link done_daily_survey}\n         */\n        save_daily_survey(responses) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // save responses in /survey/daily/{date}/{uid}\n                try {\n                    // wait for user login\n                    if (!this.user)\n                        yield this.login_promise();\n                    const survey_ref = doc(db, \"survey\", \"daily\", today, this.personal_account ? (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.linked_to : (_b = this.user) === null || _b === void 0 ? void 0 : _b.uid);\n                    yield setDoc(survey_ref, {\n                        time: new Date().getTime(),\n                        responses: responses,\n                    });\n                    // update user doc to have date in \"done_surveys\"\n                    let updated_surveys = ((_c = this.active_doc) === null || _c === void 0 ? void 0 : _c.done_surveys) ? this.active_doc.done_surveys : [];\n                    updated_surveys.push(today);\n                    if (this.personal_account && this.linked_account_doc) {\n                        this.linked_account_doc.done_surveys = updated_surveys;\n                    }\n                    else if (this.account_doc) {\n                        this.account_doc.done_surveys = updated_surveys;\n                    }\n                    yield this.update_remote();\n                    new SuccessToast(\"Saved daily survey\", 2000);\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    new ErrorToast(\"Couldn't save daily survey\", err, 2000);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function toggle_theme\n         * @description Toggle the theme between light and dark, and save to local storage and user account doc\n         * @see {@link get_theme}\n         * @see {@link theme}\n         */\n        toggle_theme() {\n            return __awaiter(this, void 0, void 0, function* () {\n                this.theme = this.get_theme == Theme.Light ? Theme.Dark : Theme.Light;\n                window.localStorage.setItem(\"theme\", this.theme);\n                if (this.account_doc) {\n                    this.account_doc.prefs = Object.assign(Object.assign({}, this.account_doc.prefs), { theme: this.theme });\n                    // fixes for legacy\n                    delete this.account_doc.theme;\n                    // commit changes\n                    yield this.update_wrapper_acc_doc();\n                }\n                new SuccessToast(`Switched to ${this.theme} theme`, 2000);\n                // trigger theme update\n                this.theme = this.get_theme;\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function toggle_simplified\n         * @description Toggle the simplified display view\n         * @see {@link account_doc}\n         */\n        toggle_simplified() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                if (!this.account_doc)\n                    return;\n                const simplified = !((_a = this.account_doc.prefs) === null || _a === void 0 ? void 0 : _a.simplified);\n                this.account_doc.prefs = Object.assign(Object.assign({}, this.account_doc.prefs), { simplified: simplified });\n                yield this.update_wrapper_acc_doc();\n                new SuccessToast(`Switched to ${simplified ? \"simplified\" : \"detailed (classic)\"} view`, 2000);\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function remove_class_id_helper\n         * @description Helper function to remove a class from the active user's document and save changes to remote\n         * @see {@link remove_class}\n         * @see {@link remove_invalid}\n         * @see {@link fetch_classes}\n         */\n        remove_class_id_helper(class_id) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                const filtered_classes = (_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.classes.filter((c) => c != class_id);\n                if (this.personal_account && this.linked_account_doc) {\n                    this.linked_account_doc.classes = filtered_classes;\n                }\n                else if (this.account_doc) {\n                    this.account_doc.classes = filtered_classes;\n                }\n                // remove from local\n                this.classes = this.classes.filter((c) => c.id != class_id);\n                this.get_tasks();\n                // update remote\n                yield this.update_remote();\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function remove_invalid\n         * @description Remove a class from the active user's document, and show a toast saying that the class was removed because it was invalid\n         * @see {@link remove_class_id_helper}\n         */\n        remove_invalid(class_id) {\n            return __awaiter(this, void 0, void 0, function* () {\n                yield this.remove_class_id_helper(class_id);\n                new WarningToast(`Removed non-existent class \"${class_id}\"`, 2000);\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function remove_class\n         * @description Remove a class from the active user's document, and show a toast saying that the class was removed manually\n         * @see {@link remove_class_id_helper}\n         */\n        remove_class(class_id) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this.remove_class_id_helper(class_id);\n                    _status.log(\"🗑️ Removed class from user's doc: \" + class_id);\n                    new SuccessToast(\"Left class\", 2000);\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    _status.log(\"🔥 Error removing class from user's doc: \" + err);\n                    new ErrorToast(\"Couldn't leave class\", err, 2000);\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function set_user\n         * @description Set the user object and load the user's document, with some additional checks and error handling. Also set the user's document if it exists, or create it if it doesn't, and logs them out if the account is deemed invalid\n         * @see {@link user}\n         * @see {@link authChangeAction}\n         * @see {@link account_doc}\n         * @see {@link linked_account_doc}\n         * @see {@link personal_account}\n         */\n        set_user(user) {\n            // TODO: TS rewrite this to use async/await and return a promise\n            _status.log(\"🔑 Setting user\");\n            // load user doc to check .personal_account\n            getDoc(doc(db, \"users\", user.uid))\n                .then((userDoc) => {\n                var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n                if (userDoc.exists()) {\n                    this.account_doc = userDoc.data();\n                    this.personal_account = (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.personal_account;\n                }\n                else {\n                    this.account_doc = null;\n                    this.linked_account_doc = null;\n                }\n                if (!user.email ||\n                    (!validOrgAcc(user.email) && !(this.personal_account && (((_c = (_b = router === null || router === void 0 ? void 0 : router.currentRoute) === null || _b === void 0 ? void 0 : _b.value) === null || _c === void 0 ? void 0 : _c.name) == \"link\" || (((_d = this.account_doc) === null || _d === void 0 ? void 0 : _d.personal_account) && ((_e = this.account_doc) === null || _e === void 0 ? void 0 : _e.linked_to)))))) {\n                    auth.signOut();\n                    new WarningToast(`Please use your ${process.env.VUE_APP_ORG_NAME} (@${process.env.VUE_APP_ORG_DOMAIN}) email to log in, or use an account that has been linked`, 4000);\n                    this.clear();\n                    return;\n                }\n                this.user = user;\n                // if this is a personal account, get the associated linked account doc\n                if (this.personal_account) {\n                    this.get_remote();\n                }\n                // if teacher, setup this.teacher refs\n                if (this.is_teacher) {\n                    _status.log(\"🏫 In teacher mode\");\n                    this.teacher.doc_ref = doc(db, \"classes\", (_f = this.user) === null || _f === void 0 ? void 0 : _f.email);\n                    this.teacher.collection_ref = collection(this.teacher.doc_ref, \"classes\");\n                }\n                // if router has a redirect, go to it\n                if (((_j = (_h = (_g = router.currentRoute) === null || _g === void 0 ? void 0 : _g.value) === null || _h === void 0 ? void 0 : _h.query) === null || _j === void 0 ? void 0 : _j.redirect) && !((_m = (_l = (_k = router.currentRoute) === null || _k === void 0 ? void 0 : _k.value) === null || _l === void 0 ? void 0 : _l.meta) === null || _m === void 0 ? void 0 : _m.blockStandardRedirect)) {\n                    router.replace((_q = (_p = (_o = router.currentRoute) === null || _o === void 0 ? void 0 : _o.value) === null || _p === void 0 ? void 0 : _p.query) === null || _q === void 0 ? void 0 : _q.redirect);\n                }\n            })\n                .catch((err) => {\n                auth.signOut();\n                if (err.code == \"unavailable\") {\n                    new ErrorToast(\"No connection available, you were signed out\");\n                    _status.log(\"🛜 Connection unavailable\");\n                }\n                else {\n                    new WarningToast(\"Something went wrong loading your data; signed out\", 2000);\n                    _status.log(\"🔥 Error loading user data;\", err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function login\n         * @description Log the user in with Google OAuth (using the appropriate prompt type based on window support), and set the user object.\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link user}\n         * @see {@link logout}\n         */\n        login() {\n            return __awaiter(this, void 0, void 0, function* () {\n                // TODO: TS rewrite this to use async/await and return a promise\n                new Toast(\"Opening login popup...\", \"default\", 1000, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n                // sign in with google, then set user data\n                // if electron, use redirect, otherwise, use popup\n                yield (isElectron || isIFrame() ? signInWithRedirect(auth, provider) : signInWithPopup(auth, provider))\n                    .then(() => {\n                    var _a, _b, _c, _d, _e, _f;\n                    if (!this.user || !this.user.email || !validOrgAcc(this.user.email))\n                        return;\n                    new Toast(\"Logged in as \" + this.user.displayName + \"!\", \"default\", 2000, require(\"@svonk/util/assets/info-unlocked-icon.svg\"));\n                    _status.log(\"🔑 Logged in as \" + this.user.displayName);\n                    authChangeAction(this.user);\n                    if (!((_c = (_b = (_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.query) === null || _c === void 0 ? void 0 : _c.redirect) && !((_f = (_e = (_d = router.currentRoute) === null || _d === void 0 ? void 0 : _d.value) === null || _e === void 0 ? void 0 : _e.meta) === null || _f === void 0 ? void 0 : _f.blockStandardRedirect)) {\n                        router.push(\"/portal\");\n                    }\n                    return Promise.resolve();\n                })\n                    .catch((error) => {\n                    const err = cleanError(error);\n                    if (error.code == \"auth/cancelled-popup-request\" || error.code == \"auth/popup-closed-by-user\" || error.code == \"auth/user-cancelled\") {\n                        new WarningToast(err, 2000);\n                    }\n                    else {\n                        new ErrorToast(\"Couldn't log in\", err, 2000);\n                    }\n                    return Promise.reject(err);\n                });\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function login_personal\n         * @description Most things that login() does, but for personal accounts (does not preform org account check, enforce sign-in domain, or redirect)\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link personal_account}\n         * @see {@link user}\n         * @see {@link login}\n         */\n        login_personal() {\n            return __awaiter(this, void 0, void 0, function* () {\n                // TODO: TS rewrite this to use async/await and return a promise\n                new Toast(\"Opening login popup...\", \"default\", 1000, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n                // create new provider with no hd\n                const personal_provider = new GoogleAuthProvider();\n                personal_provider.addScope(\"email\");\n                personal_provider.addScope(\"profile\");\n                // sign in with google, then set user data\n                // if electron, use redirect, otherwise, use popup\n                yield (isElectron || isIFrame() ? signInWithRedirect(auth, personal_provider) : signInWithPopup(auth, personal_provider))\n                    .then((r) => {\n                    if (!r.user || !r.user.email || validOrgAcc(r.user.email))\n                        this.logout();\n                    new Toast(\"Logged in as \" + r.user.displayName + \"!\", \"default\", 2000, require(\"@svonk/util/assets/info-unlocked-icon.svg\"));\n                    _status.log(\"🔑 Logged in as \" + r.user.displayName);\n                    authChangeAction(r.user);\n                    return Promise.resolve();\n                })\n                    .catch((err) => {\n                    new ErrorToast(\"Couldn't log in\", err, 2000);\n                    return Promise.reject(err);\n                });\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function logout\n         * @description Log the user out and clear the store state\n         * @see {@link clear}\n         */\n        logout() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                if ((_c = (_b = (_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.meta) === null || _c === void 0 ? void 0 : _c.requiresAuth) {\n                    yield router.push({ path: \"/\" });\n                }\n                auth.signOut();\n                this.clear();\n                // redirect if current route requires auth\n                new Toast(\"Logged Out\", \"default\", 1500, require(\"@svonk/util/assets/info-locked-icon.svg\"));\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function get_remote\n         * @description Get the user's document from the remote database, and create it if it doesn't exist. Preforms additional checks for personal accounts, and removes the linked account if it doesn't exist\n         * @see {@link create_doc}\n         * @see {@link update_remote}\n         * @see {@link active_doc}\n         */\n        get_remote() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.user || !this.active_ref)\n                    return;\n                // get doc from firebase\n                const active_doc = yield getDoc(this.active_ref);\n                _status.log(\"📄 Got user doc remote\");\n                if (active_doc.exists()) {\n                    this.set_active(active_doc.data());\n                }\n                else if (this.personal_account) {\n                    // linked account doesn't exist\n                    _status.log(\"🔗 Linked account doesn't exist, removing it and going home\");\n                    new WarningToast(\"Linked account doesn't exist, removing it and going home\", 2000);\n                    if (this.account_doc) {\n                        this.account_doc.linked_to = null;\n                    }\n                    yield this.update_wrapper_acc_doc();\n                    this.linked_account_doc = null;\n                    router.push(\"/\");\n                }\n                else {\n                    // if doc doesn't exist, create it\n                    yield this.create_doc();\n                    yield this.get_remote();\n                }\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function update_remote\n         * @description Update the active user's document in the remote database\n         * @see {@link get_remote}\n         * @see {@link active_doc}\n         * @see {@link active_ref}\n         */\n        update_remote() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.active_ref)\n                    return;\n                // update remote doc\n                yield setDoc(this.active_ref, this.active_doc, { merge: true });\n                _status.log(\"⏶ Pushed changes to remote\");\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function update_wrapper_acc_doc\n         * @description Update the authenticated user's document in the remote database (for personal accounts only)\n         * @see {@link update_remote}\n         * @see {@link personal_account}\n         */\n        update_wrapper_acc_doc() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.account_ref)\n                    return;\n                yield setDoc(this.account_ref, this.account_doc, { merge: true });\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function update_wrapper_acc_doc\n         * @description Update the authenticated user's document in the remote database with the data given (for personal accounts only)\n         * @see {@link update_remote}\n         * @see {@link personal_account}\n         * @see {@link update_wrapper_acc_doc}\n         */\n        update_wrapper_with_merge(data) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.account_ref)\n                    return Promise.reject(\"No account ref\");\n                try {\n                    yield setDoc(this.account_ref, data, { merge: true });\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function create_doc\n         * @description Create the user's document in the remote database, create a teacher document if the user is a teacher, and create a personal account if the user is using a personal account. Also preforms onboarding for non-teacher\n         * @see {@link create_teacher_doc}\n         * @see {@link update_remote}\n         * @see {@link get_remote}\n         */\n        create_doc() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                if (!((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.onLine)) {\n                    _status.warn(\"🔥 No internet connection, won't create doc to prevent overwrite\");\n                    new ErrorToast(\"Prevented destructuive offline userdoc create\", 2000);\n                }\n                if (!this.user)\n                    return _status.warn(\"🔥 No user to create doc for\");\n                _status.log(\"📄 User document doesn't exist, creating new one...\");\n                new WarningToast(\"User document doesn't exist, creating new one...\", 2000);\n                this.account_doc = {\n                    name: this.user.displayName,\n                    email: this.user.email,\n                    classes: [],\n                    prefs: { theme: this.get_theme },\n                };\n                if (this.personal_account) {\n                    this.account_doc = Object.assign(Object.assign({}, this.account_doc), { linked_to: null, personal_account: true });\n                }\n                yield this.update_wrapper_acc_doc();\n                // do onboarding\n                new SuccessToast(\"Created user document; Let's get started\", 2000);\n                if (!this.personal_account) {\n                    // push to tutorial\n                    router.push({\n                        name: \"portal\",\n                    });\n                }\n                if (this.is_teacher) {\n                    yield this.create_teacher_doc();\n                    new SuccessToast(\"Created user & teacher documents; Let's get started\", 2000);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function create_teacher_doc\n         * @description Create the teacher document for the user, and redirect to the create class page\n         * @see {@link create_doc}\n         * @see {@link is_teacher}\n         */\n        create_teacher_doc() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c, _d, _e, _f;\n                const email = ((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.email) || ((_b = this.user) === null || _b === void 0 ? void 0 : _b.email);\n                if (!email)\n                    return;\n                // create teacher doc under (classes/teacher_email+this.ORG_DOMAIN) with sub-collection (classes)\n                let teacher_ref = doc(db, \"classes\", email);\n                yield setDoc(teacher_ref, {\n                    name: ((_c = this.active_doc) === null || _c === void 0 ? void 0 : _c.name) || ((_d = this.user) === null || _d === void 0 ? void 0 : _d.displayName),\n                    email: ((_e = this.active_doc) === null || _e === void 0 ? void 0 : _e.email) || ((_f = this.user) === null || _f === void 0 ? void 0 : _f.email),\n                });\n                this.teacher = {\n                    doc_ref: teacher_ref,\n                    collection_ref: collection(teacher_ref, \"classes\"),\n                };\n                router.push(\"/portal/create\");\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function fetch_classes\n         * @description Fetch all classes from the user's document and combine them into an array, while checking for duplicates and invalid classes\n         * @returns {Array} Array of all (unique) classes from the user's document\n         * @see {@link classes}\n         * @see {@link fetch_classes_by_email}\n         * @see {@link remove_invalid}\n         * @see {@link remove_class}\n         * @see {@link remove_class_id_helper}\n         */\n        fetch_classes() {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                let run_hash = Math.random().toString(36).substring(7);\n                _status.log(`📚 Started fetch   | <${run_hash}>`);\n                // check for duplicates\n                if (!((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.classes)) {\n                    let i = 0;\n                    const max = 10000, warn = 1500, len = 100;\n                    while (!((_b = this.active_doc) === null || _b === void 0 ? void 0 : _b.classes) && i < max / len) {\n                        yield new Promise((resolve) => setTimeout(resolve, len));\n                        i++;\n                    }\n                    if (!((_c = this.active_doc) === null || _c === void 0 ? void 0 : _c.classes)) {\n                        return Promise.reject(\"Classes not found in user doc within load cycle\");\n                    }\n                    else if (i * len >= warn) {\n                        _status.warn(`📚 Initial class fetch took ${i * len}ms, warning set at ${warn}ms`);\n                        new WarningToast(`Initial class fetch took ${i * len}ms. Your network connection may negativly affect site preformance.`, 3500);\n                    }\n                }\n                let unique = [...new Set(this.active_doc.classes)];\n                if (unique.length != this.active_doc.classes.length) {\n                    if (this.personal_account && this.linked_account_doc) {\n                        this.linked_account_doc.classes = unique;\n                    }\n                    else if (this.account_doc) {\n                        this.account_doc.classes = unique;\n                    }\n                    yield this.update_remote();\n                    new WarningToast(\"Removed duplicate classes\", 2000);\n                    _status.log(\"📚 Removed duplicate classes\");\n                }\n                // get all classes' data and combine into an array\n                let classes = [];\n                for (let class_path of this.active_doc.classes) {\n                    // split class path into teacher/uid\n                    let [teacher, class_id] = class_path.split(\"/\");\n                    if (!teacher || !class_id) {\n                        yield this.remove_invalid(class_path);\n                        continue;\n                    }\n                    // get classes sub-collection from teacher's doc\n                    const teacher_classes = collection(db, \"classes\", teacher, \"classes\");\n                    if (!teacher_classes) {\n                        yield this.remove_invalid(class_path);\n                        continue;\n                    }\n                    // get class doc from classes sub-collection\n                    const subclass_ref = doc(teacher_classes, class_id);\n                    let subclass_doc = yield getDoc(subclass_ref);\n                    if (!subclass_doc.exists()) {\n                        yield this.remove_invalid(class_path);\n                        continue;\n                    }\n                    // push class to array\n                    let doc_data = subclass_doc.data();\n                    doc_data.id = class_path;\n                    doc_data.ref = [teacher, class_id].join(\"/\");\n                    classes.push(doc_data);\n                }\n                _status.log(`📚 Got class docs  | <${run_hash}>`);\n                // get tasks for all classes in parallel\n                classes = classes.map((class_data) => {\n                    let [_email, _id] = class_data.ref.split(\"/\");\n                    class_data.tasks = class_data.tasks || [];\n                    class_data.tasks = class_data.tasks.map((task) => {\n                        task.ref = [_email, _id, task.id].join(\"/\");\n                        delete task.id;\n                        return task;\n                    });\n                    return class_data;\n                });\n                _status.log(`📚 Processed tasks | <${run_hash}>`);\n                // sort classes by period number, then by name\n                classes.sort((a, b) => {\n                    if (a.period == b.period) {\n                        return a.name.localeCompare(b.name);\n                    }\n                    // prefer classes that have periods over those that don't\n                    if (!a.period && a.period !== 0)\n                        return 1;\n                    if (!b.period && b.period !== 0)\n                        return -1;\n                    return a.period - b.period;\n                });\n                this.classes = classes;\n                this.get_tasks();\n                Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function fetch_classes_by_email\n         * @description Fetch all classes for a given email, and set the loaded classes to the result\n         * @param {String} email The email to fetch classes for\n         * @see {@link loaded_classes}\n         * @see {@link loaded_email}\n         * @see {@link fetch_classes}\n         * @note Messy implementation, should be refactored to use a separate store state for loaded classes, or at least not use so many store state keys. Prehaps promises would work?\n         */\n        fetch_classes_by_email(email) {\n            return __awaiter(this, void 0, void 0, function* () {\n                this.loaded_email = null;\n                if (!email || !validOrgAcc(email)) {\n                    this.loaded_classes = null;\n                    this.loaded_email = email;\n                    return;\n                }\n                _status.log(\"📄 Getting classes from email\");\n                let classes = [];\n                const classes_subcollection = collection(doc(db, \"classes\", email), \"classes\");\n                let classes_subcollection_snapshot = yield getDocs(classes_subcollection);\n                _status.log(\"📄 Got classes subcollection from email\");\n                classes_subcollection_snapshot.forEach((class_doc) => {\n                    var _a;\n                    let class_data = class_doc.data();\n                    class_data.id = class_doc.id;\n                    // if user already in class, change name to \"[JOINED] name\"\n                    class_data.is_joined = (_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.classes.includes([email, class_doc.id].join(\"/\"));\n                    classes.push(class_data);\n                });\n                classes.sort((a, b) => {\n                    if (a.period == b.period) {\n                        return a.name.localeCompare(b.name);\n                    }\n                    return a.period - b.period;\n                });\n                this.loaded_classes = classes;\n                this.loaded_email = email;\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function add_class\n         * @description Add a class to the active user's document, and show a toast saying that the class was added\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @param {String} teacher_email The email of the teacher whose class it is\n         * @param {String} class_id The id of the class to add\n         * @param {String} class_name The name of the class being added\n         * @param {Number} class_period The period of the class being added\n         * @see {@link classes}\n         */\n        add_class(teacher_email, class_id, class_name, class_period) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                if (!((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.classes))\n                    return;\n                if (!class_id)\n                    return;\n                const class_key = [teacher_email, class_id].join(\"/\");\n                if (this.active_doc.classes.includes(class_key))\n                    return;\n                if (this.personal_account && this.linked_account_doc) {\n                    this.linked_account_doc.classes.push(class_key);\n                }\n                else if (this.account_doc) {\n                    this.account_doc.classes.push(class_key);\n                }\n                yield this.update_remote();\n                yield this.fetch_classes();\n                new SuccessToast(`Added \"${this.class_text({\n                    name: class_name,\n                    period: class_period,\n                    ref: class_key,\n                    tasks: [],\n                })}\" to your classes`, 2000);\n                // return new success promise\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function create_class\n         * @description Create a class with the given object, and add it to the active user's document. (for teachers)\n         * @param {Object} class_obj The class object to with the class data, document will be created in /classes under the teacher's email with these contents\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link is_teacher}\n         * @see {@link teacher}\n         */\n        create_class(class_obj) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                _status.log(\"🔨 Creating class\", class_obj);\n                if (!this.is_teacher) {\n                    new WarningToast(\"You need to be a teacher to create a class\", 2000);\n                    return;\n                }\n                if (!class_obj.name)\n                    return; // handled in disabled attr of button, failsafe for db\n                try {\n                    // check if there is a teacher doc and collection\n                    if (!this.teacher.doc_ref || !this.teacher.collection_ref) {\n                        // create teacher doc\n                        yield this.create_teacher_doc();\n                        // call this again\n                        yield this.create_class(class_obj);\n                        return;\n                    }\n                    // create class doc under teacher.collection_ref\n                    const class_doc_ref = yield addDoc(this.teacher.collection_ref, class_obj);\n                    // add class to user doc;\n                    new SuccessToast(`Created class \"${this.class_text(class_obj)}\"`, 2000);\n                    _status.log(\"🏫 Created class w/ ref\", class_doc_ref);\n                    yield this.add_class(((_a = this.active_doc) === null || _a === void 0 ? void 0 : _a.email) || ((_b = this.user) === null || _b === void 0 ? void 0 : _b.email), class_doc_ref.id, class_obj.name, class_obj.period);\n                    return Promise.resolve();\n                }\n                catch (e) {\n                    new ErrorToast(\"Couldn't create class\", cleanError(e), 2000);\n                    return Promise.reject(e);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function create_task\n         * @description Create a task with the given object, and add it to the classes specified in the object. (for teachers)\n         * @param {Object} task_obj The task object to with the task data, data will be added to /classes docs\n         * @param {Array} task_classes The classes to add the task to\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         */\n        create_task(task_obj, task_classes) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    if (!task_obj.name && (task_obj === null || task_obj === void 0 ? void 0 : task_obj.type) != \"note\") {\n                        return Promise.reject(\"No task name specified\");\n                    }\n                    else if (!task_classes || task_classes.length == 0) {\n                        return Promise.reject(\"No classes selected\");\n                    }\n                    // use firebase array add to add task to each class\n                    let batch = writeBatch(db);\n                    let updated_classes = Array.from(this.classes);\n                    task_classes.forEach((class_id) => {\n                        // fix any class_id that has the teacher email in it\n                        const displayed_class_id = class_id;\n                        const [_email, _id] = class_id.split(\"/\");\n                        // use this.teacher.collection_ref to get class collection ref, then update the class documents within\n                        const class_tasks_collection = collection(db, \"classes\", _email, \"classes\", _id, \"tasks\");\n                        task_obj.class_id = displayed_class_id;\n                        // batch add a new task doc with the data to the class_tasks_collection collection, using auto-generated id\n                        const task_ref = doc(class_tasks_collection);\n                        batch.set(task_ref, task_obj);\n                        updated_classes.forEach((class_obj) => {\n                            var _a;\n                            if (class_obj.id == displayed_class_id) {\n                                (_a = class_obj.tasks) === null || _a === void 0 ? void 0 : _a.push(Object.assign(Object.assign({}, task_obj), { ref: [_email, _id, task_ref.id].join(\"/\"), class_id: displayed_class_id, _proxy: true }));\n                            }\n                        });\n                    });\n                    yield batch.commit();\n                    // update this.classes.tasks for each, then rerun get_tasks to update this.tasks from updated classes\n                    this.classes = updated_classes;\n                    this.get_tasks();\n                    const name = task_obj.type == \"note\" ? \"\" : `\"${task_obj.name}\"`;\n                    new SuccessToast(`Added ${task_obj.type || \"task\"} ${name} to ${task_classes.length} class${task_classes.length == 1 ? \"\" : \"es\"}`, 2000);\n                    _status.log(`📝 Created task ${name} for ${task_classes.length} classes`);\n                    return Promise.resolve();\n                }\n                catch (e) {\n                    return Promise.reject(e);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function update_class\n         * @description Update an instance of a class (for teachers). Intended to be preformed from the EditClass Modal\n         * @param {String} class_ref the \"email/class_id\" String representation of the class ref in firebase\n         * @param {Object} class_obj The updated class object\n         * @returns {Promise} A promise that resolves to nothing or rejects with an error\n         */\n        update_class(class_ref, class_obj) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    let [_email, _id] = class_ref.split(\"/\");\n                    _email += this.ORG_DOMAIN;\n                    // update the document with the same id as the class from the classes collection\n                    yield updateDoc(doc(db, \"classes\", _email, \"classes\", _id), class_obj);\n                    _status.log(\"📝 Updated remote class\");\n                    let classes = this.classes;\n                    // update local version of class in classes\n                    const classIndex = classes.findIndex((class_obj) => class_obj.id === [_email, _id].join(\"/\"));\n                    if (classIndex !== -1) {\n                        // Update the class object within the classes array\n                        classes[classIndex] = Object.assign(Object.assign(Object.assign({}, classes[classIndex]), class_obj), { _proxy: true });\n                        _status.log(\"📝 Updated local class\");\n                    }\n                    // show changes\n                    this.classes = [...classes];\n                    this.get_tasks();\n                    // finish\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function update_task\n         * @description Update an instance of a task from a class (for teachers). Intended to be preformed from the EditTask Modal\n         * @param {String} task_ref the \"email/class_id/task_id\" String representation of the task ref in firebase\n         * @param {Object} task_obj The updated task object\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         */\n        update_task(task_ref, task_obj) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                try {\n                    delete task_obj.class_id;\n                    delete task_obj.ref;\n                    delete task_obj._class;\n                    let [_email, _id, task_id] = task_ref.split(\"/\");\n                    if (!_email.includes(this.ORG_DOMAIN)) {\n                        _email += this.ORG_DOMAIN;\n                    }\n                    // update the document with the same id as the task from the tasks collection\n                    yield updateDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id), task_obj);\n                    _status.log(\"📝 Updated remote task\");\n                    let classes = this.classes;\n                    // update local version of task in classes\n                    let class_id = [_email, _id].join(\"/\");\n                    const classIndex = classes.findIndex((class_obj) => class_obj.id === class_id);\n                    const ref = [_email, _id, task_id].join(\"/\");\n                    if (classIndex !== -1) {\n                        const taskIndex = (_a = classes[classIndex].tasks) === null || _a === void 0 ? void 0 : _a.findIndex((task) => task.ref === ref);\n                        if (taskIndex !== -1) {\n                            // Update the task object within the tasks array of the class_obj\n                            // TODO: TS doesn't like this, but should work always\n                            // @ts-ignore\n                            classes[classIndex].tasks[taskIndex] = Object.assign(Object.assign({}, task_obj), { ref: ref, class_id: class_id, _proxy: true });\n                            _status.log(\"📝 Updated local task\");\n                        }\n                    }\n                    // show changes\n                    this.classes = [...classes];\n                    this.get_tasks();\n                    // finish\n                    return Promise.resolve();\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function archive_task\n         * @description Archive an instance of a task from a class (for teachers). Intended to be preformed from the ViewTask Modal\n         * @param {String} task_ref the \"email/class_id\" String representation of the task ref in firebase\n         * @returns {Promise} A promise that resolves to nothing or rejects with an {String} error\n         * @see {@link create_task}\n         * @note This currently only removes the instance of the task being viewed. Could add a secondary modal to allow deletion of multiple instances instead?\n         */\n        archive_task(task_ref) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let [_email, _id, task_id] = task_ref.split(\"/\");\n                _email += this.ORG_DOMAIN;\n                try {\n                    // remove the document with the same id as the task from the tasks collection\n                    yield deleteDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id));\n                    _status.log(\"📄 Archived task\");\n                    try {\n                        let classes = this.classes;\n                        classes.forEach((class_obj) => {\n                            var _a;\n                            if (class_obj.id == [_email, _id].join(\"/\")) {\n                                class_obj.tasks = (_a = class_obj.tasks) === null || _a === void 0 ? void 0 : _a.filter((task) => {\n                                    return task.ref != [_email, _id, task_id].join(\"/\");\n                                });\n                            }\n                        });\n                        this.classes = classes;\n                        this.get_tasks();\n                    }\n                    catch (err) {\n                        _status.error(\"🔥 Error removing task from local\", err);\n                        throw err;\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n                return Promise.resolve();\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function task_from_ref\n         * @description Get the task object from a task reference\n         * @param {String} ref The task reference to get the task object from\n         * @returns {Promise} A promise that resolves to the task object or rejects with an {String} error\n         */\n        task_from_ref(ref) {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    let [_email, _id, task_id] = ref.split(\"/\");\n                    _email += this.ORG_DOMAIN;\n                    _status.log(\"📄 Getting task from ref:\", [_email, _id, task_id].join(\" - \"));\n                    const class_doc = yield getDoc(doc(db, \"classes\", _email, \"classes\", _id));\n                    if (!class_doc.exists())\n                        return Promise.resolve(null);\n                    let class_data = class_doc.data();\n                    delete class_data.tasks;\n                    _status.log(\"📚 Got class from ref\");\n                    const task_doc = yield getDoc(doc(db, \"classes\", _email, \"classes\", _id, \"tasks\", task_id));\n                    if (!task_doc.exists())\n                        return Promise.resolve(null);\n                    _status.log(\"📄 Got task from ref\");\n                    return Promise.resolve(Object.assign(Object.assign({}, task_doc.data()), { ref: ref, class_id: [_email, _id].join(\"/\"), class_name: this.class_text(class_data), _class: Object.assign(Object.assign({}, class_data), { ref: [_email.split(this.ORG_DOMAIN)[0], _id].join(\"~\") }) }));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function class_from_ref\n         * @description Get the class object from a class reference\n         * @param {String} ref The class reference to get the class object from\n         * @returns {Promise} A promise that resolves to the class object or rejects with an error\n         */\n        class_from_ref(ref_1) {\n            return __awaiter(this, arguments, void 0, function* (ref, include_tasks = false) {\n                try {\n                    let [_email, _id] = ref.split(\"/\");\n                    _email += this.ORG_DOMAIN;\n                    const class_doc = yield getDoc(doc(db, \"classes\", _email, \"classes\", _id));\n                    _status.log(\"📄 Got class doc\");\n                    if (!class_doc.exists())\n                        return Promise.reject(\"Class doesn't exist\");\n                    let class_data = class_doc.data();\n                    if (!include_tasks)\n                        delete class_data.tasks;\n                    _status.log(\"📚 Got class data\");\n                    return Promise.resolve(class_data);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function upcoming_from_ref\n         * @description Get the next 4 upcoming task objects for a given class reference\n         * @param {String} ref\n         * @param {Object} class_obj\n         */\n        upcoming_from_ref(class_ref, class_doc) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                try {\n                    if (!class_ref) {\n                        throw \"No class ref provided\";\n                    }\n                    if (!class_doc) {\n                        class_doc = (yield this.class_from_ref(class_ref));\n                    }\n                    let [_email, _id] = class_ref.split(\"/\");\n                    _email += this.ORG_DOMAIN;\n                    let class_snapshot = yield getDoc(doc(db, \"classes\", _email, \"classes\", _id));\n                    if (!class_snapshot.exists()) {\n                        throw \"Class doesn't exist\";\n                    }\n                    let class_tasks = ((_a = class_snapshot.data()) === null || _a === void 0 ? void 0 : _a.tasks) || [];\n                    class_tasks = class_tasks.filter((task) => {\n                        return task.type != \"note\" && compatDateObj(task.date).getTime() >= new Date().getTime();\n                    });\n                    class_tasks.sort((a, b) => {\n                        var _a, _b;\n                        return ((_a = compatDateObj(a.date)) === null || _a === void 0 ? void 0 : _a.getTime()) - ((_b = compatDateObj(b.date)) === null || _b === void 0 ? void 0 : _b.getTime());\n                    });\n                    // limit to 6\n                    class_tasks = class_tasks.slice(0, 6);\n                    let upcoming_tasks = [];\n                    class_tasks.forEach((task) => {\n                        const task_id = task.id;\n                        delete task.id;\n                        upcoming_tasks.push(Object.assign(Object.assign({}, task), { ref: [...class_ref.split(\"/\"), task_id].join(\"~\"), date: compatDateObj(task.date), color: class_doc === null || class_doc === void 0 ? void 0 : class_doc.color, class_id: [_email, _id].join(\"/\"), class_name: this.class_text(class_doc) }));\n                    });\n                    _status.log(\"📚 Got upcoming tasks\");\n                    return Promise.resolve(upcoming_tasks);\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            });\n        },\n        /**\n         * @memberOf .main.actions\n         * @function show_timeout\n         * @description Show a popup saying that the session has timed out\n         * @see {@link hide_timeout}\n         * @see {@link refresh_timeout}\n         */\n        show_timeout() {\n            var _a, _b;\n            _status.log(\"🕒 Showing timeout\" + (((_b = (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.prefs) === null || _b === void 0 ? void 0 : _b.hide_timeout) ? \" | Hidden locally due to prefs\" : \"\"));\n            this.paused = true;\n        },\n        /**\n         * @memberOf .main.actions\n         * @function hide_timeout\n         * @description Hide the popup saying that the session has timed out\n         * @see {@link show_timeout}\n         * @see {@link refresh_timeout}\n         */\n        hide_timeout() {\n            var _a, _b;\n            if (this.paused) {\n                if (!((_b = (_a = this.account_doc) === null || _a === void 0 ? void 0 : _a.prefs) === null || _b === void 0 ? void 0 : _b.hide_timeout)) {\n                    _status.log(\"🕒 Hiding timeout\");\n                }\n                this.paused = false;\n            }\n        },\n    },\n});\n","/**\n * This store mnages AI/ML tasks and requests, as well as other \"smart\" or api-drieven features\n * @file store/magic.ts\n * @namespace .magic\n * @memberOf store\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// setup Pinia store\nimport { _status } from \"@/common\";\nimport { defineStore } from \"pinia\";\nconst API_URL = `https://${process.env.VUE_APP_BRAND_DOMAIN__API}/`;\nexport const useMagic = defineStore({\n    id: \"magic\",\n    /**\n     * @namespace .magic.state\n     * @memberOf .magic\n     */\n    state: () => ({\n        /**\n         * @memberOf .magic.state\n         * @property {Object} last Keeps track of when each endpoint was last called and with what hash data in order to rate limit\n         */\n        last: {},\n        /**\n         * @memberOf .magic.state\n         * @property {Array} types List of task types and their short names, full names, list names, and keyboard shortcuts\n         */\n        types: [\n            { key: \"note\", name: \"Note\", list_as: \"Add a Note\", shortcuts: [\"n\"] },\n            {\n                key: \"task\",\n                name: \"Assignment\",\n                list_as: \"Schedule an Assignment\",\n                shortcuts: [\"a\"],\n            },\n            // socratic: \"Socratic Seminar\",\n            {\n                key: \"test\",\n                name: \"Test\",\n                list_as: \"Schedule a Test\",\n                shortcuts: [\"t\"],\n            },\n            // summative: \"Summative Assignment\",\n            // midterm: \"Midterm\",\n            {\n                key: \"project\",\n                name: \"Project\",\n                list_as: \"Schedule a Project\",\n                shortcuts: [\"p\"],\n            },\n            {\n                key: \"quiz\",\n                name: \"Quiz\",\n                list_as: \"Schedule a Quiz\",\n                shortcuts: [\"q\"],\n            },\n            {\n                key: \"exam\",\n                name: \"Exam\",\n                list_as: \"Schedule an Exam\",\n                shortcuts: [\"e\"],\n            },\n        ],\n        /**\n         * @memberOf .magic.state\n         * @property {Object} prefixes List of prefixes for each task type\n         */\n        prefixes: {\n            note: \"\",\n            task: \"Complete \",\n            // socratic: \"\",\n            test: \"Study for \",\n            // summative: \"\",\n            // midterm: \"\",\n            project: \"Prepare \",\n            quiz: \"Study for \",\n            exam: \"Study for \",\n        },\n        /**\n         * @memberOf .magic.state\n         * @property {Object} done_prefixes List of prefixes for making a task finished/unfinished\n         */\n        done_prefixes: {\n            note: \"\",\n            task: \"\",\n            // socratic: \"\",\n            test: \"Studying for \",\n            // summative: \"\",\n            // midterm: \"\",\n            project: \"Preparation for \",\n            quiz: \"Studying for \",\n            exam: \"Studying for \",\n        },\n    }),\n    /**\n     * @namespace .magic.getters\n     * @memberOf .magic\n     */\n    getters: {},\n    /**\n     * @namespace .magic.actions\n     * @memberOf .magic\n     */\n    actions: {\n        /**\n         * @memberOf .magic.actions\n         * @function prefix\n         * @description get the prefix for a given task\n         * @param {Object} task - the task object\n         * @returns {String} text - the prefix for the task\n         * @see prefixes\n         * @see types\n         */\n        prefix(task) {\n            return this.prefixes[task.type];\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function done_prefix\n         * @description get the done prefix for a given task\n         * @param {Object} task - the task object\n         * @returns {String} text - the done prefix for the task\n         * @see done_prefixes\n         * @see types\n         */\n        done_prefix(task) {\n            if (!(task === null || task === void 0 ? void 0 : task.type) || !task.name)\n                return \"Task\";\n            return `${this.done_prefixes[task.type]\n                ? this.done_prefixes[task.type] + task.type\n                : this.type_full(task.type)} \"${task.name}\"`;\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function type_full\n         * @description get the full type name from the short type\n         * @param {String} short_type - the short type of the task\n         * @returns {String} text - the full type name\n         * @see types\n         */\n        type_full(short_type) {\n            var _a;\n            return ((_a = this.types.find((t) => t.key === short_type)) === null || _a === void 0 ? void 0 : _a.name) || short_type;\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function path\n         * @description get the smart text associated with a given url\n         * @param {String} path\n         * @returns {String} text - the smart text associated with the url\n         */\n        text(path) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!path)\n                    return;\n                return yield this.rated_api_get(\"get/magic/link-text\", { path });\n            });\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function type\n         * @description get the smart type associated with a given description\n         * @param {String} text\n         */\n        type(task) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!task)\n                    return;\n                return yield this.rated_api_get(\"get/magic/task-type\", { task });\n            });\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function api_get\n         * @description do get request to url: API_URL + endpoint with request query of data\n         * @param {String} endpoint api endpoint\n         * @param {Object} data query params\n         * @returns {Promise<Object>} json\n         */\n        api_get(endpoint, data) {\n            return __awaiter(this, void 0, void 0, function* () {\n                data = data || {};\n                if (!endpoint)\n                    return;\n                // get url with query\n                const url = new URL(API_URL + endpoint);\n                Object.keys(data).forEach((key) => url.searchParams.append(key, data[key]));\n                const run_hash = Math.random().toString(36).substring(7);\n                _status.log(`🛜 Running API fetch | <${run_hash}>`);\n                // do request\n                this.last[endpoint] = { time: Date.now(), hash: run_hash };\n                try {\n                    const response = yield fetch(url.href, {\n                        method: \"GET\",\n                        headers: {\n                            \"Content-Type\": \"application/json\",\n                        },\n                    });\n                    // response\n                    if (!response.ok)\n                        throw \"Non-valid response\";\n                    const json = yield response.json();\n                    _status.log(`🛜 API fetch success | <${run_hash}>`);\n                    return json.data;\n                }\n                catch (err) {\n                    _status.error(`🛜 API fetch failed  | <${run_hash}>`, err);\n                    return null;\n                }\n            });\n        },\n        /**\n         * @memberOf .magic.actions\n         * @function rated_api_get\n         * @description do api_get but abide by rate limit (only eval once every 15 seconds)\n         */\n        rated_api_get(type, data) {\n            return __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c, _d;\n                _status.log(\"🛜 API fetch requested\");\n                const run_hash = Math.random().toString(36).substring(7);\n                const prev_time = (_a = this.last[type]) === null || _a === void 0 ? void 0 : _a.time;\n                const prev_hash = (_b = this.last[type]) === null || _b === void 0 ? void 0 : _b.hash;\n                if (Date.now() - prev_time < 2000) {\n                    _status.warn(\"🛜 API fetch rate limited\");\n                    // wait 15 seconds and see if it is still the most recent request\n                    yield new Promise((resolve) => setTimeout(resolve, 15000));\n                    if (((_c = this.last[type]) === null || _c === void 0 ? void 0 : _c.time) !== prev_time || ((_d = this.last[type]) === null || _d === void 0 ? void 0 : _d.hash) !== prev_hash) {\n                        _status.warn(\"🛜 Outdated API fetch skipped\");\n                        return;\n                    }\n                    else {\n                        _status.log(\"🛜 API fetch rate limit lifted\");\n                    }\n                }\n                return yield this.api_get(type, data);\n            });\n        },\n    },\n});\n","<template>\n  <main class=\"modal\" ref=\"modal\">\n    <header class=\"modal_header\" v-if=\"title\" ref=\"title\">\n      <h2 class=\"header_style modal_header_title\">{{ title }}</h2>\n    </header>\n    <div ref=\"contents\" class=\"overlay_contents\" v-if=\"content || html\">\n      <component\n        :is=\"content\"\n        ref=\"container\"\n        @update=\"$emit('update', $event)\"\n        @status=\"$emit('status', $event)\"\n        @skip=\"$emit('skip')\"\n        :load=\"load\"\n      />\n      <div class=\"overlay_contents__html\" v-if=\"html\" v-html=\"html\"></div>\n    </div>\n    <div class=\"bottom_actions\">\n      <button class=\"close_action click_escape\" v-if=\"skippable\" @click=\"$emit('skip')\">\n        {{ skip_text || (progress && progress.current > 1 ? \"Abandon\" : \"Close\") }}\n      </button>\n      <div class=\"progress_display\" v-if=\"progress && progress.total > 1\">\n        <span\n          class=\"progress_display__dot_container\"\n          v-for=\"i in progress.total\"\n          :key=\"i\"\n          @click=\"$emit('open', i - 1)\"\n        >\n          <span\n            class=\"progress_display__dot\"\n            :class=\"{ dot_active: i == progress.current, dot_finished: i < progress.current }\"\n          ></span>\n        </span>\n      </div>\n      <div class=\"flex_spacer\"></div>\n      <button\n        class=\"continue_action click_ctrlenter\"\n        @click=\"continue_action\"\n        :disabled=\"!can_continue\"\n      >\n        {{ button_text }}\n      </button>\n    </div>\n  </main>\n</template>\n\n<script>\n/**\n * @file Modal.vue\n * @displayName Modal\n * @description A modal view that displays title, content, progress and a continue action.\n * @property {String} title - The title of the modal.\n * @property {Object} content - A component to display in the modal.\n * @property {String} html - HTML to display in the modal, if content is not provided.\n * @property {Boolean} can_continue - Whether the continue action is enabled.\n * @property {Function} continue_action - The action to perform when the continue button is clicked.\n * @property {Object} progress - An object with current and total properties, to display progress.\n * @property {Boolean} is_notification - Whether the modal is a notification, and should not be closed.\n * @property {String} submit_text - The text to display on the continue button.\n * @property {String} skip_text - The text to display on the skip button.\n *  */\nimport smoothReflow from \"vue-smooth-reflow\";\nexport default {\n  name: \"ModalVue\",\n  mixins: [smoothReflow],\n  mounted() {\n    this.$smoothReflow({\n      el: this.$refs.contents,\n      hideOverflow: true,\n      childTransitions: true,\n    });\n    this.$smoothReflow({\n      el: this.$refs.title,\n      hideOverflow: true,\n    });\n  },\n  emits: [\"open\", \"update\", \"status\", \"skip\"],\n  data() {\n    return {};\n  },\n  props: {\n    load: {\n      type: Object,\n      default: () => ({}),\n    },\n    skippable: {\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    title: {\n      type: String,\n      default: \"\",\n      required: false,\n    },\n    content: {\n      type: Object,\n      default: null,\n      required: false,\n    },\n    html: {\n      type: String,\n      default: null,\n      required: false,\n    },\n    can_continue: {\n      type: Boolean,\n      required: true,\n    },\n    continue_action: {\n      type: Function,\n      default: () => {\n        this.$status.log(\"⏵ ModalVue: continue_action not provided\");\n        // close this modal view\n        window.onbeforeunload = null;\n        this.$router.push(\n          this.$route.query.redirect || {\n            name: \"portal\",\n            query: this.$route.query,\n          }\n        );\n      },\n      required: false,\n    },\n    progress: {\n      type: Object,\n      default: null,\n      required: false,\n    },\n    is_notification: {\n      type: Boolean,\n      default: false,\n      required: false,\n    },\n    submit_text: {\n      type: String,\n      required: false,\n    },\n    skip_text: {\n      type: String,\n      required: false,\n    },\n  },\n  computed: {\n    button_text() {\n      if (this.submit_text) {\n        return this.submit_text;\n      } else if (this.is_notification) {\n        return \"Ok\";\n      } else if (this.progress && this.progress.current == this.progress.total) {\n        return \"Finish\";\n      } else {\n        return \"Continue\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.modal:first-child.overlay_contents {\n  border-top: none;\n}\n/* for animating height */\n.modal {\n  transition: height 0.5s ease-in-out;\n}\n.progress_display {\n  /* layout */\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n  margin-left: 0;\n  /* interaction */\n  user-select: none;\n  /* sizing */\n  height: var(--size-modal-progress);\n}\n.progress_display span {\n  display: block;\n}\n.progress_display__dot_container {\n  padding: var(--margin-modal-progress-dot);\n}\n.progress_display__dot {\n  /* sizing */\n  width: var(--size-modal-progress-dot);\n  height: var(--size-modal-progress-dot);\n  border-radius: 50%;\n  /* appearance */\n  background-color: var(--color-modal-progress-dot);\n}\n.progress_display__dot.dot_active {\n  background-color: var(--color-modal-progress-dot-active);\n}\n.progress_display__dot.dot_finished {\n  transform: scale(0.75);\n  opacity: 0.6;\n}\n</style>\n","import { render } from \"./Modal.vue?vue&type=template&id=793cb3ff&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=793cb3ff&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-793cb3ff\"]])\n\nexport default __exports__","<template>\n  <div\n    class=\"overlay overlay_center_view overlay_slot__wrapper\"\n    :class=\"{ animate_out: animating_out }\"\n  >\n    <div class=\"overlay_close\" @click=\"closable ? close() : null\" :closable=\"closable\"></div>\n\n    <component v-if=\"component\" class=\"overlay_slot\" :is=\"component\" @close=\"close\" />\n    <slot v-else class=\"overlay_slot\" :close=\"close\" />\n  </div>\n</template>\n\n<script>\nimport \"@/assets/style/overlay.css\";\nexport default {\n  name: \"OverlayWrapper\",\n  emits: [\"close\"],\n  props: {\n    component: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      animating_out: false,\n    };\n  },\n  computed: {\n    closable() {\n      return this.$route?.meta?.block_close !== true;\n    },\n  },\n  methods: {\n    close() {\n      // animate out with scale for 0.25s, then emit close\n      this.animating_out = true;\n      setTimeout(() => {\n        window.onbeforeunload = null;\n        this.$emit(\"close\");\n        this.animating_out = false;\n      }, 250);\n    },\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./OverlayWrapper.vue?vue&type=template&id=30ce9620\"\nimport script from \"./OverlayWrapper.vue?vue&type=script&lang=js\"\nexport * from \"./OverlayWrapper.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"104\":\"c401d4ff\",\"107\":\"2a8ece25\",\"145\":\"5f6107c4\",\"162\":\"fcfe8328\",\"179\":\"f11d28bf\",\"186\":\"a1c2cbd0\",\"203\":\"32a79b5e\",\"253\":\"21fadb1a\",\"255\":\"46268019\",\"257\":\"35df713a\",\"272\":\"e921a74f\",\"284\":\"3597e155\",\"312\":\"c526fe3a\",\"339\":\"c8ff7666\",\"393\":\"0f372535\",\"401\":\"55d7741e\",\"442\":\"4e1950f9\",\"462\":\"a72ffc2e\",\"512\":\"b0461a09\",\"520\":\"89715dc6\",\"537\":\"75fda5e2\",\"546\":\"793ea4e5\",\"563\":\"fce539b3\",\"578\":\"aecd2a6b\",\"589\":\"9afb4e41\",\"619\":\"c6f38d9d\",\"661\":\"9711bce9\",\"706\":\"e0818671\",\"739\":\"6629dbf7\",\"770\":\"61ab333a\",\"803\":\"0a8c0da5\",\"809\":\"a6bad4c8\",\"829\":\"90ab560b\",\"855\":\"60919898\",\"877\":\"a9fb7894\",\"908\":\"32492500\",\"923\":\"a45eeeca\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"104\":\"2b0d65a8\",\"107\":\"be39b3eb\",\"145\":\"3d7b288d\",\"162\":\"73525aed\",\"179\":\"ca8b15ce\",\"186\":\"1aaa5a2d\",\"203\":\"393d89d9\",\"253\":\"ab5a12f0\",\"257\":\"383763c1\",\"284\":\"d9c24380\",\"312\":\"5cdab7df\",\"339\":\"56bd4e99\",\"393\":\"75a97a72\",\"401\":\"05185772\",\"442\":\"d576e19c\",\"462\":\"76b29f15\",\"512\":\"e7cd22dc\",\"537\":\"94b9ff58\",\"546\":\"2575b215\",\"563\":\"0e59c6ca\",\"578\":\"9e20b7b5\",\"589\":\"61dcd1ec\",\"619\":\"60f3120e\",\"661\":\"317ccfc2\",\"706\":\"7804db19\",\"739\":\"2402cdda\",\"770\":\"e873138f\",\"803\":\"06177424\",\"809\":\"df586b4e\",\"829\":\"328c80e9\",\"855\":\"834c139e\",\"877\":\"fb57c3bd\",\"923\":\"742e3057\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"mvtime:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"104\":1,\"107\":1,\"145\":1,\"162\":1,\"179\":1,\"186\":1,\"203\":1,\"253\":1,\"257\":1,\"284\":1,\"312\":1,\"339\":1,\"393\":1,\"401\":1,\"442\":1,\"462\":1,\"512\":1,\"537\":1,\"546\":1,\"563\":1,\"578\":1,\"589\":1,\"619\":1,\"661\":1,\"706\":1,\"739\":1,\"770\":1,\"803\":1,\"809\":1,\"829\":1,\"855\":1,\"877\":1,\"923\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmvtime\"] = self[\"webpackChunkmvtime\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8283); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_a","LogTone","tone","Info","log","log_time","Date","save","content","download","a","window","document","createElement","href","URL","createObjectURL","Blob","type","click","format_stream","stream","length","map","line","time","JSON","stringify","message","join","toISOString","getFirstNonStandardCharacter","str","match","err","_log","args","push","now","arguments","this","Log","extras","substring","trimStart","console","_status","print","bind","info","debug","Debug","warn","Warn","error","Error","clearStream","clear","getStream","types","filter","entry","includes","textStream","saveStream","id","date","data","setSeconds","downloadLogData","_getTone","_setTone","new_tone","_resetTone","split","replace","version","getElementById","textContent","compatDateObj","msToTime","ms","seconds","Math","floor","minutes","hours","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","functions","FIREBASE_region","onAuthStateChanged","user","authChangeAction","unsub","timeout","subscribed","store","set_user","unsubscribe","setupSnapshot","uid","startTimeout","hide_timeout","includeMetadataChanges","listening_doc","metadata","hasPendingWrites","exists","create_doc","listening_doc_data","account_doc","linked_account_doc","code","show_prompt","clearTimeout","show_timeout","msToText","delay","setTimeout","refreshTimeout","personal_account","linked_to","currentRoute","value","path","startsWith","fetch_classes","class","ref","_createElementVNode","_createElementBlock","_normalizeClass","simplified","_ctx","$store","_theme","$options","theme","onClick","_cache","onKeydown","onFocus","do_timeout","paused","$data","animating","_createBlock","_component_OverlayWrapper","key","style","default","_withCtx","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","$env","VUE_APP_BRAND_NAME_SHORT","_","_createCommentVNode","logout_prompt","onClose","$event","scope","_createVNode","_component_LogoutModal","close","show_shortcuts","animating_shortcuts","_component_ShortcutsModal","show_tutorial","$route","fullPath","_component_TutorialBlurb","title","tutorial","options","html","button_text","next_text","skip_text","prev_text","trackel","el","onNext","tutorial_nav","onSkip","onVnodeUnmounted","tutorial_page","_component_router_view","_hoisted_1","_component_Modal","can_continue","continue_action","logout","skippable","$emit","submit_text","name","emits","components","Modal","methods","mounted","__exports__","empty","sections","_Fragment","_renderList","section","tag","list","shortcut","tabindex","keys","description","computed","$shortcuts","$refs","shortcuts_modal","focus","beforeUnmount","$props","track","tutorial_end","is_end","_normalizeStyle","top","left","height","width","radius","fake_y","fake_x","blurb","blurb_x","_resolveDynamicComponent","innerHTML","props","String","required","Object","Boolean","done_welcome","shortcuts","mixins","smoothReflow","$smoothReflow","contents","hideOverflow","childTransitions","addEventListener","next_key","register_all","track_flush","setInterval","removeEventListener","remove_tag","clearInterval","end","track_fn","padding","undefined","$","screen","w","innerWidth","h","innerHeight","pad","dialog","offsetHeight","offset","rail_pad","outerWidth","outerHeight","x","y","max","min","SuccessToast","e","preventDefault","stopPropagation","done_tutorial","reclick","pagename","$router","watch","OverlayWrapper","LogoutModal","TutorialBlurb","ShortcutsModal","platform","isElectron","prefs","pageTitle","get_theme","tutorial_pages","page","disable_prev","navigator","userAgent","toLowerCase","indexOf","query","location","search","$status","set_theme","global_keydown","target","url","hostname","VUE_APP_BRAND_DOMAIN","open","encodeURIComponent","created","systemTheme","matchMedia","matches","storedTheme","localStorage","getItem","isDarkMode","ignore","shiftKey","ctrlKey","metaKey","report_logs","toggle_simplified","toggle_theme","not","first","change","click_on_complete","finish_tutorial","then","catch","ErrorToast","refresh_timeout","attr","new_val","old_val","$nextTick","pause_modal","overlay","shortcuts_overlay","render","ready","registered","cached","updatefound","updated","reload","offline","clean_key","k","useShortcuts","state","active","getters","s","assign","tags","Set","i","actions","get","find","get_key","register","skipSort","sort","remove","splice","remove_all","remove_key","remove_keys","b","localeCompare","set_activity","shortName","is_active","useNotifications","enabled","Notification","permission","force","requestPermission","add","notification","icon","badge","renotify","timestamp","play","file","Audio","_b","toast","App","use","router","notify","mixin","$magic","$notify","preLoad","attempt","mount","setItem","main","deep","onLine","body","on","hasClass","login","afterEach","to","_c","_d","_e","_f","_g","_h","meta","page_title","theme_light","theme_color","light","theme_dark","dark","documentElement","setProperty","text_light","text_dark","beforeEach","requiresAuth","redirect","requiresTeacher","is_teacher","requiresAdmin","is_admin","history","routes","component","children","close_path","blockStandardRedirect","block_close","noSurvey","parseQuery","Theme","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","apply","provider","ORG_DOMAIN","validOrgAcc","userEmail","isIFrame","self","addScope","useDeviceLanguage","setCustomParameters","login_hint","today","getTime","getTimezoneOffset","useMainStore","classes","tasks","loaded_email","loaded_classes","teacher","doc_ref","collection_ref","local","parse","linked_accounts","active_doc","linked","upcoming","morning","task","upcoming_todo","finished_tasks","non_recent_signin","last_signin","lastSignInTime","diff","recently_joined","creation_time","creationTime","teacher_mode","email","last","test","done_daily_survey","skip_survey","VUE_APP_NOSURVEY","done_surveys","done_join_form","join_form","account_ref","linked_account_ref","active_ref","local_theme","account_doc_theme","new_theme","Dark","Light","update_wrapper_acc_doc","get_loaded_classes","class_obj","is_joined","finished","notes","streamObj","streamText","docRef","date_inversed","json","text","class_text","period","set_account_pref","pref","update_wrapper_with_merge","get_surveys","dates","survey_refs","survey_promises","surveys","all","doc","get_cached_surveys","dates_1","force_refresh","processed_ref","current_get","current","current_dates","errored_dates","all_dates","every","added_dates","added_surveys","new_surveys","merge","note_for","ref_to_path","set_note","note","set_active","update_remote","set_finished","paths","Array","isArray","p","done_prefix","path_to_ref","_email","_id","task_id","hash","toString","code_from_ref","code_ref","class_ref","ref_from_code","code_doc","toggle_teacher","prev","new_text","get_tasks","class_tasks","j","year","month","day","isNaN","color","class_name","removeItem","doc_from_uid","linked_doc","link_account_uid","invite_linked","email_queue","sent_email","cc","from","fromname","template","sender_name","sender_uid","email_doc_ref","email_doc","checks","delivery","attempts","accepted","uninvite_linked","filtered_linked","login_promise","interval","save_join_form","responses","save_daily_survey","survey_ref","updated_surveys","remove_class_id_helper","class_id","filtered_classes","c","remove_invalid","remove_class","userDoc","_j","_k","_l","_m","_o","_p","_q","signOut","get_remote","displayName","login_personal","personal_provider","r","create_teacher_doc","teacher_ref","run_hash","random","len","unique","class_path","teacher_classes","subclass_ref","subclass_doc","doc_data","class_data","fetch_classes_by_email","classes_subcollection","classes_subcollection_snapshot","forEach","class_doc","add_class","teacher_email","class_period","class_key","create_class","class_doc_ref","create_task","task_obj","task_classes","batch","updated_classes","displayed_class_id","class_tasks_collection","task_ref","set","_proxy","commit","update_class","classIndex","findIndex","update_task","_class","taskIndex","archive_task","task_from_ref","task_doc","class_from_ref","ref_1","include_tasks","upcoming_from_ref","class_snapshot","slice","upcoming_tasks","API_URL","useMagic","list_as","prefixes","project","quiz","exam","done_prefixes","prefix","type_full","short_type","t","rated_api_get","api_get","endpoint","searchParams","append","response","fetch","method","headers","ok","prev_time","prev_hash","onUpdate","onStatus","load","progress","total","dot_active","dot_finished","disabled","_hoisted_10","Function","onbeforeunload","is_notification","animate_out","animating_out","closable","_renderSlot","$slots","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","n","getter","__esModule","d","definition","o","defineProperty","enumerable","f","chunkId","reduce","promises","u","miniCssF","g","globalThis","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","src","onScriptComplete","event","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","Symbol","toStringTag","createStylesheet","fullhref","oldTag","linkTag","rel","nonce","onLinkComplete","errorType","realHref","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}