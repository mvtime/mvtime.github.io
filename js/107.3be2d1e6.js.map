{"version":3,"file":"js/107.3be2d1e6.js","mappings":"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","sources":["webpack://mvtime/./src/views/Admin/pages/LogDebug.vue","webpack://mvtime/./src/views/Admin/pages/LogDebug.vue?71df"],"sourcesContent":["<template>\n  <div class=\"logdebug\">\n    <div class=\"docs_wrapper\">\n      <nav class=\"docs_nav admin_in\" v-if=\"pages.length\">\n        <button class=\"docs_nav_button prev\" @click=\"prev\" :disabled=\"!(total.length || pages.length) || !page_index\" title=\"Previous Page\"></button>\n        <input type=\"text\" v-model=\"search\" class=\"docs_nav_search\" placeholder=\"Search Log Reference, User ID, or Email\" enterkeyhint=\"search\" @keydown.enter=\"submit\" />\n        <button v-if=\"manual && loaded && loaded == search\" class=\"docs_nav_button clear\" @click=\"clear\" :title=\"`Clear query '${this.loaded}'`\" :class=\"{ click_escape: active == null }\"></button>\n        <button\n          v-else-if=\"search\"\n          class=\"docs_nav_button search\"\n          :disabled=\"(search.length < 10 && !search.includes('@')) || search.length > 100\"\n          @click=\"submit\"\n          title=\"Submit query (10+ characters or user email)\"\n          :class=\"{\n            click_ctrlenter: active == null && !((search.length < 10 && !search.includes('@')) || search.length > 100),\n          }\"\n        ></button>\n        <div class=\"docs_nav__loaded\">\n          <span v-if=\"manual\">{{ manual_page.length }} Result{{ manual_page.length == 1 ? \"\" : \"s\" }}</span>\n          <span v-else>\n            {{ total.length + (more && pages.length && pages[pages.length - 1].length && pages[pages.length - 1].length == page_size ? \"+\" : \"\") }}\n            Result{{ total.length == 1 ? \"\" : \"s\" }}</span\n          >\n        </div>\n        <button v-if=\"!(manual && search)\" class=\"docs_nav_button next\" @click=\"next\" :disabled=\"!(total.length || pages.length) || !more\" title=\"Next Page\"></button>\n      </nav>\n      <div class=\"docs\" v-if=\"pages.length && total.length\">\n        <div class=\"doc admin_in\" v-for=\"(doc, index) in page\" :key=\"doc.id\" :class=\"{ active: active == doc.id }\" :style=\"{ animationDelay: `${(index + 2) * 0.03}s` }\">\n          <button class=\"doc_details__toggle\" :class=\"{ click_escape: active == doc.id }\" @click=\"active = active == doc.id ? null : doc.id\" title=\"Close details pane\">\n            <div class=\"doc_details__toggle__icon themed_icon\" :title=\"`${active == doc.id ? 'Collapse' : 'Expand'} log ${doc.id}`\"></div>\n          </button>\n          <div class=\"doc_title\" v-if=\"active != doc.id\">\n            <a\n              class=\"doc_title__email\"\n              :href=\"`./logs?search=${doc.data().email}`\"\n              @click=\"\n                if (!search || loaded != search) {\n                  search = doc.data().email;\n                  submit();\n                }\n                $event.preventDefault();\n              \"\n            >\n              <span class=\"doc_title__email_user\">{{ doc.data().email.split(\"@\")[0] }}</span\n              ><span class=\"doc_title__email_domain\">@{{ doc.data().email.split(\"@\")[1] }} </span>\n            </a>\n            <span class=\"doc_title__ref\">{{ doc.id }}</span>\n            <span class=\"doc_title__time\">{{ doc.data().date.toDate().getTime() }}</span>\n          </div>\n          <div class=\"doc_details\" v-else>\n            <table class=\"doc_details_table\">\n              <tr>\n                <th>Email:</th>\n                <td>\n                  <a\n                    class=\"doc_title__email\"\n                    :href=\"`./logs?search=${doc.data().email}`\"\n                    @click=\"\n                      if (!search || loaded != search) {\n                        search = doc.data().email;\n                        submit();\n                      }\n                      $event.preventDefault();\n                    \"\n                  >\n                    {{ doc.data().email }}\n                  </a>\n                </td>\n              </tr>\n              <tr>\n                <th>User:</th>\n                <td>{{ doc.data().user }}</td>\n              </tr>\n              <tr>\n                <th>Date:</th>\n                <td>{{ doc.data().date.toDate() }}</td>\n              </tr>\n              <tr>\n                <th>Ref:</th>\n                <td>{{ doc.id }}</td>\n              </tr>\n            </table>\n            <button class=\"doc_save click_ctrlenter\" @click=\"downloadLogData(doc.data().stream.json, doc.data().date.toDate(), `cloud-${doc.data().email}-${doc.data().user}`)\">Download</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"docs_placeholder docs_placeholder__empty\" v-else-if=\"!total.length && pages.length\">No logs to display</div>\n      <div class=\"docs_placeholder docs_placeholder__loading\" v-else>\n        <i>Loading logs</i>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { collection, query, orderBy, startAfter, limit, getDocs, getDoc, doc, where } from \"firebase/firestore\";\nimport { db } from \"@/firebase\";\nimport { downloadLogData } from \"@/common\";\nimport { WarningToast, SuccessToast } from \"@svonk/util\";\nexport default {\n  data() {\n    return {\n      active: null,\n      page_index: 0,\n      page_size: 10,\n      pages: [],\n      search: \"\",\n      loaded: \"\",\n      manual_page: [],\n    };\n  },\n  computed: {\n    page() {\n      return this.manual ? this.manual_page : this.pages[this.page_index];\n    },\n    total() {\n      return this.pages.flat(1);\n    },\n    more() {\n      return !this.page || (this.page.length === this.page_size && (this.page_index == this.pages.length - 1 || this.pages[this.page_index + 1]?.length));\n    },\n    shortcuts() {\n      return [\n        {\n          key: \"Enter\",\n          description: \"Submit search\",\n        },\n        {\n          key: \"Ctrl + Enter\",\n          description: \"Download active log\",\n          top: true,\n        },\n        {\n          key: \"Escape\",\n          description: \"Collapse active log, clear search\",\n          top: true,\n        },\n      ];\n    },\n    manual() {\n      return this.loaded && this.manual_page.length;\n    },\n  },\n  async mounted() {\n    this.$shortcuts.register_all(this.shortcuts, \"Admin - Logs & Debugging\");\n    if (this.$route.query.search) {\n      this.search = this.$route.query.search;\n      this.submit();\n    }\n    await this.init();\n  },\n  beforeUnmount() {\n    this.$shortcuts.remove_tag(\"Admin - Logs & Debugging\");\n  },\n  methods: {\n    async init() {\n      const q = query(collection(db, \"logs\"), orderBy(\"date_inversed\"), limit(this.page_size));\n      const docs = await getDocs(q);\n      this.pages = [[...docs.docs]];\n      this.$status.log(`üìú Loaded first ${this.page_size} documents`);\n    },\n    downloadLogData,\n    prev() {\n      if (this.page_index > 0) {\n        this.page_index--;\n      }\n    },\n    async next() {\n      if (this.page_index < this.pages.length - 1 && this.pages[this.page_index + 1].length) {\n        this.page_index++;\n        return;\n      } else if (this.page.length && this.page.length === this.page_size) {\n        const q = query(collection(db, \"logs\"), orderBy(\"date_inversed\"), startAfter(this.page[this.page.length - 1]), limit(this.page_size));\n        const docs = await getDocs(q);\n        this.pages[this.page_index + 1] = [...docs.docs];\n        this.$status.log(`üìú Loaded next ${docs.docs.length} of ${this.page_size} documents`);\n        this.next();\n      } else {\n        this.$status.log(`üìú No more documents to load (${this.total.length} loaded)`);\n      }\n    },\n    clear() {\n      this.search = \"\";\n      this.loaded = \"\";\n      this.manual_page = [];\n      // clear search from query\n      this.$router.push({ query: { ...this.$route.query, search: undefined } });\n    },\n    async submit() {\n      this.active = null;\n      // EMAIL\n      if (this.search.includes(\"@\")) {\n        // get logs where email == this.search\n        const emailDocs = await getDocs(query(collection(db, \"logs\"), where(\"email\", \"==\", this.search), orderBy(\"date_inversed\")));\n        if (emailDocs.docs.length) {\n          this.manual_page = [...emailDocs.docs];\n          new SuccessToast(`Found ${emailDocs.docs.length} log${emailDocs.docs.length == 1 ? \"\" : \"s\"} with email ${this.search}`, 3500);\n        } else {\n          this.$status.warn(`üîç No logs found with email <${this.search}>`);\n          new WarningToast(`No logs found with that email address`, 3500);\n          this.clear();\n        }\n      }\n      // REF / USER\n      else if (this.search.length >= 10) {\n        // REF\n        const logDoc = await getDoc(doc(db, \"logs\", this.search));\n        if (logDoc.exists()) {\n          this.manual_page = [logDoc];\n          new SuccessToast(`Found log with reference ${this.search}`, 3500);\n        }\n        // USER\n        else {\n          this.$status.warn(`üîç No logs found with reference <${this.search}>, searching for matching user`);\n          new WarningToast(`No logs found with that reference, checking for matching users`, 3500);\n          const userDocs = await getDocs(query(collection(db, \"logs\"), where(\"user\", \"==\", this.search), orderBy(\"date_inversed\")));\n          if (userDocs.docs.length) {\n            this.manual_page = [...userDocs.docs];\n            new SuccessToast(`Found ${userDocs.docs.length} log${userDocs.docs.length == 1 ? \"\" : \"s\"} with user ${this.search}`, 3500);\n          } else {\n            this.$status.warn(`üîç No logs found with user <${this.search}>`);\n            new WarningToast(`No logs found with that user id or reference`, 3500);\n            this.clear();\n          }\n        }\n      }\n      // FAIL\n      else {\n        this.$status.warn(\"üîç Invalid search query for logs\");\n        new WarningToast(\"Invalid search query for logs, must be 10+ characters or email\", 3500);\n      }\n      this.loaded = this.search;\n      this.$router.push({ query: { ...this.$route.query, search: this.search } });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.docs_wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n.docs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.docs_placeholder {\n  padding: 20px 40px;\n  text-align: center;\n  width: 100%;\n}\n.docs .doc {\n  background-color: var(--color-on-bg);\n  padding: 7px 7px 7px 15px;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n  position: relative;\n}\n.docs .doc.active {\n  padding: 10px 15px 15px 15px;\n}\n.docs .doc .doc_title {\n  display: flex;\n  flex-flow: row;\n  justify-content: stretch;\n  gap: 20px;\n  align-items: center;\n}\n\n.docs .doc .doc_title span {\n  flex: 1 1 200px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.docs .doc .doc_title span.doc_title__email {\n  font-weight: 500;\n  cursor: pointer;\n}\n.docs .doc .doc_title .doc_title__time {\n  font-family: \"Source Code Pro\", monospace;\n  flex-grow: 10;\n  text-align: right;\n  margin-right: 35px;\n  line-height: 25px;\n  display: block;\n}\n\n.doc_title__toggle {\n  visibility: hidden;\n}\n.doc_title__toggle,\n.doc_details__toggle {\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar) - 7px);\n  width: 25px;\n  height: 25px;\n  padding: 0;\n  border: none;\n  background: var(--color-bg);\n}\n\n.doc .doc_details__toggle {\n  position: absolute;\n  top: 7px;\n  right: 7px;\n}\n\n.doc_details__toggle__icon {\n  width: 100%;\n  height: 100%;\n  background-image: url(\"@/assets/img/general/portal/admin/add.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/add.svg\");\n  transition: rotate 0.2s cubic-bezier(0.49, -0.02, 0.16, 1.94);\n}\n\n.doc.active .doc_details__toggle__icon {\n  rotate: 45deg;\n}\n\n.doc_details_table th {\n  font-weight: 500;\n  text-align: left;\n  padding-right: 10px;\n}\n\nnav.docs_nav {\n  display: flex;\n  flex-flow: row nowrap;\n  gap: 10px;\n  justify-content: stretch;\n}\nnav.docs_nav .docs_nav_search,\nnav.docs_nav .docs_nav__loaded {\n  background: var(--color-on-bg);\n  color: var(--color-text);\n  border: none;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n  width: unset;\n  flex: 1 1 auto;\n  font-size: 14px;\n  padding: 0 15px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n}\nnav.docs_nav .docs_nav__loaded {\n  width: max-content;\n  flex: 0 0 auto;\n  color: var(--color-text);\n  user-select: none;\n  padding: 0 10px;\n  line-height: 35px;\n}\nnav.docs_nav .docs_nav__loaded span {\n  opacity: 0.5;\n  font-weight: 500;\n}\n\nnav.docs_nav .docs_nav_search[disabled] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\nnav.docs_nav .docs_nav_button,\n.doc_save {\n  flex: 0 0 35px;\n  height: 35px;\n  width: 35px;\n  background-size: contain;\n  padding: 0;\n  border: none;\n  cursor: pointer;\n  font-size: 14px;\n  background-color: var(--color-overlay-action);\n  color: var(--color-on-overlay-action);\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n}\n\n.doc_save {\n  padding: 10px 20px;\n  height: auto;\n  width: auto;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar) - 5px);\n  position: relative;\n  bottom: -8px;\n  right: -8px;\n  float: right;\n}\n\n.docs_nav_button.prev {\n  background-image: url(\"@/assets/img/general/portal/admin/prev.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/prev.svg\");\n}\n.docs_nav_button.next {\n  background-image: url(\"@/assets/img/general/portal/admin/next.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/next.svg\");\n}\n.docs_nav_button.search {\n  background-image: url(\"@/assets/img/general/portal/admin/search.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/search.svg\");\n}\n.docs_nav_button.clear {\n  background-image: url(\"@/assets/img/general/portal/admin/clear.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/clear.svg\");\n}\nnav.docs_nav .docs_nav_button[disabled] {\n  background-color: var(--color-on-bg);\n  color: var(--color-bg);\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n@media (max-width: 670px) {\n  .docs .doc .doc_title .doc_title__ref,\n  .docs .doc .doc_title .doc_title__email_domain,\n  .docs_nav .docs_nav__loaded {\n    display: none;\n  }\n}\n</style>\n","import { render } from \"./LogDebug.vue?vue&type=template&id=a16650b8&scoped=true\"\nimport script from \"./LogDebug.vue?vue&type=script&lang=js\"\nexport * from \"./LogDebug.vue?vue&type=script&lang=js\"\n\nimport \"./LogDebug.vue?vue&type=style&index=0&id=a16650b8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a16650b8\"]])\n\nexport default __exports__"],"names":["class","key","_createElementVNode","_hoisted_30","_createElementBlock","_hoisted_1","_hoisted_2","$data","pages","length","_hoisted_3","onClick","_cache","args","$options","prev","disabled","total","page_index","title","_hoisted_4","type","$event","search","placeholder","enterkeyhint","onKeydown","_withKeys","submit","manual","loaded","_normalizeClass","click_escape","active","clear","_hoisted_5","includes","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_toDisplayString","manual_page","_hoisted_9","more","page_size","next","_hoisted_10","_hoisted_11","_Fragment","_renderList","page","doc","index","id","style","_normalizeStyle","animationDelay","_hoisted_13","_hoisted_12","_hoisted_14","href","data","email","preventDefault","_hoisted_16","split","_hoisted_17","_hoisted_15","_hoisted_18","_hoisted_19","date","toDate","getTime","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","user","_hoisted_25","_hoisted_26","downloadLogData","stream","json","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_31","computed","this","flat","shortcuts","description","top","mounted","$shortcuts","register_all","$route","query","init","beforeUnmount","remove_tag","methods","q","collection","db","orderBy","limit","docs","getDocs","$status","log","startAfter","$router","push","undefined","emailDocs","where","SuccessToast","warn","WarningToast","logDoc","getDoc","exists","userDocs","__exports__","render"],"sourceRoot":""}