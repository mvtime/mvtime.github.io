{"version":3,"file":"js/146.d8b11de2.js","mappings":"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","sources":["webpack://mvtime/./src/views/Admin/pages/LogDebug.vue","webpack://mvtime/./src/views/Admin/pages/LogDebug.vue?71df"],"sourcesContent":["<template>\n  <div class=\"logdebug\">\n    <div class=\"docs_wrapper\">\n      <nav class=\"docs_nav admin_in\" v-if=\"pages.length\">\n        <button\n          class=\"docs_nav_button prev\"\n          @click=\"prev\"\n          :disabled=\"!(total.length || pages.length) || !page_index\"\n          title=\"Previous Page\"\n        ></button>\n        <input\n          type=\"text\"\n          v-model=\"search\"\n          class=\"docs_nav_search\"\n          placeholder=\"Search Log Reference, User ID, or Email\"\n          enterkeyhint=\"search\"\n          @keydown.enter=\"submit\"\n        />\n        <button\n          v-if=\"manual && loaded && loaded == search\"\n          class=\"docs_nav_button clear\"\n          @click=\"clear\"\n          :title=\"`Clear query '${this.loaded}'`\"\n          :class=\"{ click_escape: active == null }\"\n        ></button>\n        <button\n          v-else-if=\"search\"\n          class=\"docs_nav_button search\"\n          :disabled=\"(search.length < 10 && !search.includes('@')) || search.length > 100\"\n          @click=\"submit\"\n          title=\"Submit query (10+ characters or user email)\"\n          :class=\"{\n            click_ctrlenter:\n              active == null &&\n              !((search.length < 10 && !search.includes('@')) || search.length > 100),\n          }\"\n        ></button>\n        <div class=\"docs_nav__loaded\">\n          <span v-if=\"manual\"\n            >{{ manual_page.length }} Result{{ manual_page.length == 1 ? \"\" : \"s\" }}</span\n          >\n          <span v-else>\n            {{\n              total.length +\n              (more &&\n              pages.length &&\n              pages[pages.length - 1].length &&\n              pages[pages.length - 1].length == page_size\n                ? \"+\"\n                : \"\")\n            }}\n            Result{{ total.length == 1 ? \"\" : \"s\" }}</span\n          >\n        </div>\n        <button\n          v-if=\"!(manual && search)\"\n          class=\"docs_nav_button next\"\n          @click=\"next\"\n          :disabled=\"!(total.length || pages.length) || !more\"\n          title=\"Next Page\"\n        ></button>\n      </nav>\n      <div class=\"docs\" v-if=\"pages.length && total.length\">\n        <div\n          class=\"doc admin_in\"\n          v-for=\"(doc, index) in page\"\n          :key=\"doc.id\"\n          :class=\"{ active: active == doc.id }\"\n          :style=\"{ animationDelay: `${(index + 2) * 0.03}s` }\"\n        >\n          <button\n            class=\"doc_details__toggle\"\n            :class=\"{ click_escape: active == doc.id }\"\n            @click=\"active = active == doc.id ? null : doc.id\"\n            title=\"Close details pane\"\n          >\n            <div\n              class=\"doc_details__toggle__icon themed_icon\"\n              :title=\"`${active == doc.id ? 'Collapse' : 'Expand'} log ${doc.id}`\"\n            ></div>\n          </button>\n          <div class=\"doc_title\" v-if=\"active != doc.id\">\n            <a\n              class=\"doc_title__email\"\n              :href=\"`./logs?search=${doc.data().email}`\"\n              @click=\"\n                $router.push({\n                  name: 'admin_logs',\n                  query: { ...this.$route.query, search: doc.data().email },\n                })\n              \"\n            >\n              <span class=\"doc_title__email_user\">{{ doc.data().email.split(\"@\")[0] }}</span\n              ><span class=\"doc_title__email_domain\">@{{ doc.data().email.split(\"@\")[1] }} </span>\n            </a>\n            <span class=\"doc_title__ref\">{{ doc.id }}</span>\n            <span class=\"doc_title__time\">{{ doc.data().date.toDate().getTime() }}</span>\n          </div>\n          <div class=\"doc_details\" v-else>\n            <table class=\"doc_details_table\">\n              <tr>\n                <th>Email:</th>\n                <td>{{ doc.data().email }}</td>\n              </tr>\n              <tr>\n                <th>User:</th>\n                <td>{{ doc.data().user }}</td>\n              </tr>\n              <tr>\n                <th>Date:</th>\n                <td>{{ doc.data().date.toDate() }}</td>\n              </tr>\n              <tr>\n                <th>Ref:</th>\n                <td>{{ doc.id }}</td>\n              </tr>\n            </table>\n            <button\n              class=\"doc_save click_ctrlenter\"\n              @click=\"\n                downloadLogData(\n                  doc.data().stream.json,\n                  doc.data().date.toDate(),\n                  `cloud-${doc.data().email}-${doc.data().user}`\n                )\n              \"\n            >\n              Download\n            </button>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"docs_placeholder docs_placeholder__empty\"\n        v-else-if=\"!total.length && pages.length\"\n      >\n        No logs to display\n      </div>\n      <div class=\"docs_placeholder docs_placeholder__loading\" v-else>\n        <i>Loading logs</i>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  collection,\n  query,\n  orderBy,\n  startAfter,\n  limit,\n  getDocs,\n  getDoc,\n  doc,\n  where,\n} from \"firebase/firestore\";\nimport { db } from \"@/firebase\";\nimport { downloadLogData } from \"@/common\";\nimport { WarningToast, SuccessToast } from \"@svonk/util\";\nexport default {\n  data() {\n    return {\n      active: null,\n      page_index: 0,\n      page_size: 10,\n      pages: [],\n      search: \"\",\n      loaded: \"\",\n      manual_page: [],\n    };\n  },\n  computed: {\n    page() {\n      return this.manual ? this.manual_page : this.pages[this.page_index];\n    },\n    total() {\n      return this.pages.flat(1);\n    },\n    more() {\n      return (\n        !this.page ||\n        (this.page.length === this.page_size &&\n          (this.page_index == this.pages.length - 1 || this.pages[this.page_index + 1]?.length))\n      );\n    },\n    shortcuts() {\n      return [\n        {\n          key: \"Enter\",\n          description: \"Submit search\",\n        },\n        {\n          key: \"Ctrl + Enter\",\n          description: \"Download active log\",\n          top: true,\n        },\n        {\n          key: \"Escape\",\n          description: \"Collapse active log, clear search\",\n          top: true,\n        },\n      ];\n    },\n    manual() {\n      return this.loaded && this.manual_page.length;\n    },\n  },\n  async mounted() {\n    this.$shortcuts.register_all(this.shortcuts, \"Admin - Logs & Debugging\");\n    if (this.$route.query.search) {\n      this.search = this.$route.query.search;\n      this.submit();\n    }\n    await this.init();\n  },\n  beforeUnmount() {\n    this.$shortcuts.remove_tag(\"Admin - Logs & Debugging\");\n  },\n  methods: {\n    async init() {\n      const q = query(collection(db, \"logs\"), orderBy(\"date_inversed\"), limit(this.page_size));\n      const docs = await getDocs(q);\n      this.pages = [[...docs.docs]];\n      this.$status.log(`📜 Loaded first ${this.page_size} documents`);\n    },\n    downloadLogData,\n    prev() {\n      if (this.page_index > 0) {\n        this.page_index--;\n      }\n    },\n    async next() {\n      if (this.page_index < this.pages.length - 1 && this.pages[this.page_index + 1].length) {\n        this.page_index++;\n        return;\n      } else if (this.page.length && this.page.length === this.page_size) {\n        const q = query(\n          collection(db, \"logs\"),\n          orderBy(\"date_inversed\"),\n          startAfter(this.page[this.page.length - 1]),\n          limit(this.page_size)\n        );\n        const docs = await getDocs(q);\n        this.pages[this.page_index + 1] = [...docs.docs];\n        this.$status.log(`📜 Loaded next ${docs.docs.length} of ${this.page_size} documents`);\n        this.next();\n      } else {\n        this.$status.log(`📜 No more documents to load (${this.total.length} loaded)`);\n      }\n    },\n    clear() {\n      this.search = \"\";\n      this.loaded = \"\";\n      this.manual_page = [];\n      // clear search from query\n      this.$router.push({ query: { ...this.$route.query, search: undefined } });\n    },\n    async submit() {\n      // EMAIL\n      if (this.search.includes(\"@\")) {\n        // get logs where email == this.search\n        const emailDocs = await getDocs(\n          query(collection(db, \"logs\"), where(\"email\", \"==\", this.search), orderBy(\"date_inversed\"))\n        );\n        if (emailDocs.docs.length) {\n          this.manual_page = [...emailDocs.docs];\n          new SuccessToast(\n            `Found ${emailDocs.docs.length} log${\n              emailDocs.docs.length == 1 ? \"\" : \"s\"\n            } with email ${this.search}`,\n            3500\n          );\n        } else {\n          this.$status.warn(`🔍 No logs found with email <${this.search}>`);\n          new WarningToast(`No logs found with that email address`, 3500);\n          this.clear();\n        }\n      }\n      // REF / USER\n      else if (this.search.length >= 10) {\n        // REF\n        const logDoc = await getDoc(doc(db, \"logs\", this.search));\n        if (logDoc.exists()) {\n          this.manual_page = [logDoc];\n          new SuccessToast(`Found log with reference ${this.search}`, 3500);\n        }\n        // USER\n        else {\n          this.$status.warn(\n            `🔍 No logs found with reference <${this.search}>, searching for matching user`\n          );\n          new WarningToast(`No logs found with that reference, checking for matching users`, 3500);\n          const userDocs = await getDocs(\n            query(\n              collection(db, \"logs\"),\n              where(\"user\", \"==\", this.search),\n              orderBy(\"date_inversed\")\n            )\n          );\n          if (userDocs.docs.length) {\n            this.manual_page = [...userDocs.docs];\n            new SuccessToast(\n              `Found ${userDocs.docs.length} log${userDocs.docs.length == 1 ? \"\" : \"s\"} with user ${\n                this.search\n              }`,\n              3500\n            );\n          } else {\n            this.$status.warn(`🔍 No logs found with user <${this.search}>`);\n            new WarningToast(`No logs found with that user id or reference`, 3500);\n            this.clear();\n          }\n        }\n      }\n      // FAIL\n      else {\n        this.$status.warn(\"🔍 Invalid search query for logs\");\n        new WarningToast(\"Invalid search query for logs, must be 10+ characters or email\", 3500);\n      }\n      this.loaded = this.search;\n      this.$router.push({ query: { ...this.$route.query, search: this.search } });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.logdebug {\n  --padding-sidebar: 10px;\n}\n.docs_wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n.docs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.docs_placeholder {\n  padding: 20px 40px;\n  text-align: center;\n  width: 100%;\n}\n.docs .doc {\n  background-color: var(--color-on-bg);\n  padding: 7px 7px 7px 15px;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n  position: relative;\n}\n.docs .doc.active {\n  padding: 10px 15px 15px 15px;\n}\n.docs .doc .doc_title {\n  display: flex;\n  flex-flow: row;\n  justify-content: stretch;\n  gap: 20px;\n  align-items: center;\n}\n\n.docs .doc .doc_title span {\n  flex: 1 1 200px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.docs .doc .doc_title span.doc_title__email {\n  font-weight: 500;\n  cursor: pointer;\n}\n.docs .doc .doc_title .doc_title__time {\n  font-family: \"Source Code Pro\", monospace;\n  flex-grow: 10;\n  text-align: right;\n  margin-right: 35px;\n  line-height: 25px;\n  display: block;\n}\n\n.doc_title__toggle {\n  visibility: hidden;\n}\n.doc_title__toggle,\n.doc_details__toggle {\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar) - 7px);\n  width: 25px;\n  height: 25px;\n  padding: 0;\n  border: none;\n  background: var(--color-bg);\n}\n\n.doc .doc_details__toggle {\n  position: absolute;\n  top: 7px;\n  right: 7px;\n}\n\n.doc_details__toggle__icon {\n  width: 100%;\n  height: 100%;\n  background-image: url(\"@/assets/img/general/portal/admin/add.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/add.svg\");\n  transition: rotate 0.2s cubic-bezier(0.49, -0.02, 0.16, 1.94);\n}\n\n.doc.active .doc_details__toggle__icon {\n  rotate: 45deg;\n}\n\n.doc_details_table th {\n  font-weight: 500;\n  text-align: left;\n  padding-right: 10px;\n}\n\nnav.docs_nav {\n  display: flex;\n  flex-flow: row nowrap;\n  gap: 10px;\n  justify-content: stretch;\n}\nnav.docs_nav .docs_nav_search,\nnav.docs_nav .docs_nav__loaded {\n  background: var(--color-on-bg);\n  color: var(--color-text);\n  border: none;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n  width: unset;\n  flex: 1 1 auto;\n  font-size: 14px;\n  padding: 0 15px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n}\nnav.docs_nav .docs_nav__loaded {\n  width: max-content;\n  flex: 0 0 auto;\n  color: var(--color-text);\n  user-select: none;\n  padding: 0 10px;\n  line-height: 35px;\n}\nnav.docs_nav .docs_nav__loaded span {\n  opacity: 0.5;\n  font-weight: 500;\n}\n\nnav.docs_nav .docs_nav_search[disabled] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\nnav.docs_nav .docs_nav_button,\n.doc_save {\n  flex: 0 0 35px;\n  height: 35px;\n  width: 35px;\n  background-size: contain;\n  padding: 0;\n  border: none;\n  cursor: pointer;\n  font-size: 14px;\n  background-color: var(--color-overlay-action);\n  color: var(--color-on-overlay-action);\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar));\n}\n\n.doc_save {\n  padding: 10px 20px;\n  height: auto;\n  width: auto;\n  border-radius: calc(var(--radius-sidebar) - var(--padding-sidebar) - 5px);\n  position: relative;\n  bottom: -8px;\n  right: -8px;\n  float: right;\n}\n\n.docs_nav_button.prev {\n  background-image: url(\"@/assets/img/general/portal/admin/prev.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/prev.svg\");\n}\n.docs_nav_button.next {\n  background-image: url(\"@/assets/img/general/portal/admin/next.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/next.svg\");\n}\n.docs_nav_button.search {\n  background-image: url(\"@/assets/img/general/portal/admin/search.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/search.svg\");\n}\n.docs_nav_button.clear {\n  background-image: url(\"@/assets/img/general/portal/admin/clear.png\");\n  background-image: url(\"@/assets/img/general/portal/admin/clear.svg\");\n}\nnav.docs_nav .docs_nav_button[disabled] {\n  background-color: var(--color-on-bg);\n  color: var(--color-bg);\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n@media (max-width: 670px) {\n  .docs .doc .doc_title .doc_title__ref,\n  .docs .doc .doc_title .doc_title__email_domain,\n  .docs_nav .docs_nav__loaded {\n    display: none;\n  }\n}\n</style>\n","import { render } from \"./LogDebug.vue?vue&type=template&id=c8762ad0&scoped=true\"\nimport script from \"./LogDebug.vue?vue&type=script&lang=js\"\nexport * from \"./LogDebug.vue?vue&type=script&lang=js\"\n\nimport \"./LogDebug.vue?vue&type=style&index=0&id=c8762ad0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c8762ad0\"]])\n\nexport default __exports__"],"names":["class","key","_createElementVNode","_hoisted_29","_createElementBlock","_hoisted_1","_hoisted_2","$data","pages","length","_hoisted_3","onClick","_cache","args","$options","prev","disabled","total","page_index","title","_hoisted_4","type","$event","search","placeholder","enterkeyhint","onKeydown","_withKeys","submit","manual","loaded","_normalizeClass","click_escape","active","clear","_hoisted_5","includes","_hoisted_6","_createCommentVNode","_hoisted_7","_hoisted_8","_toDisplayString","manual_page","_hoisted_9","more","page_size","next","_hoisted_10","_hoisted_11","_Fragment","_renderList","page","doc","index","id","style","_normalizeStyle","animationDelay","_hoisted_13","_hoisted_12","_hoisted_14","href","data","email","_ctx","$router","push","$route","query","_hoisted_16","split","_hoisted_17","_hoisted_15","_hoisted_18","_hoisted_19","date","toDate","getTime","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","user","_hoisted_24","_hoisted_25","downloadLogData","stream","json","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_30","computed","flat","this","shortcuts","description","top","mounted","$shortcuts","register_all","init","beforeUnmount","remove_tag","methods","q","collection","db","orderBy","limit","docs","getDocs","$status","log","startAfter","undefined","emailDocs","where","SuccessToast","warn","WarningToast","logDoc","getDoc","exists","userDocs","__exports__","render"],"sourceRoot":""}