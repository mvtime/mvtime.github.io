"use strict";(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[480],{9480:function(e,t,s){s.r(t),s.d(t,{default:function(){return Et}});s(7658);var a=s(3396),n=s(7139);const i={class:"portal"},l={class:"portal_content__spaced"},o={class:"portal_info"},r={class:"portal_info_title"},c={class:"portal_info_usertype"},_={class:"portal_info_date"},d={class:"portal_info_welcome"};function h(e,t,s,h,u,m){const p=(0,a.up)("LeftBar"),g=(0,a.up)("CalendarBlock"),v=(0,a.up)("RightBar"),k=(0,a.up)("router-view"),y=(0,a.up)("OverlayWrapper");return(0,a.wg)(),(0,a.iD)("main",i,[(0,a.Wm)(p,{ref:"LeftBar",onToggle_filtered_class:m.toggle_filtered_class,onClear_filters:t[0]||(t[0]=e=>u.filtered_classes=[]),onClose_right_bar:m.close_right_bar,filtered_classes:u.filtered_classes},null,8,["onToggle_filtered_class","onClose_right_bar","filtered_classes"]),(0,a._)("div",{class:"portal_content",onClick:t[3]||(t[3]=e=>{m.close_right_bar(),m.close_left_bar()})},[(0,a._)("div",l,[(0,a._)("header",o,[(0,a._)("div",r,[(0,a._)("span",c,(0,n.zw)(m.store.is_teacher?"Teacher":"Student")+" Dashboard",1),(0,a._)("span",_,(0,n.zw)((new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1)]),(0,a._)("div",d,(0,n.zw)(m.store.recently_joined?"Welcome to MVTT":m.store.non_recent_signin?"Welcome Back":m.random_welcome)+" "+(0,n.zw)(m.name)+"! ",1)]),(0,a.Wm)(g,{filtered_classes:u.filtered_classes,onTaskclick:t[1]||(t[1]=e=>m.show_task(e)),ref:"calendar",onMounted:t[2]||(t[2]=t=>{u.loaded&&e.$refs.calendar.run_get_tasks()})},null,8,["filtered_classes"])])]),(0,a.Wm)(v,{ref:"RightBar",onClose_left_bar:m.close_left_bar},null,8,["onClose_left_bar"]),"portal"!==e.$route.name?((0,a.wg)(),(0,a.j4)(y,{key:0,onClose:t[5]||(t[5]=t=>m.close_path?e.$router.push(m.close_path):e.$router.push("/portal"))},{default:(0,a.w5)((e=>[(0,a.Wm)(k,{class:"router_center_view",onClose:e.close,onClear_filters:t[4]||(t[4]=e=>u.filtered_classes=[])},null,8,["onClose"])])),_:1})):(0,a.kq)("",!0)])}const u=e=>((0,a.dD)("data-v-1dc42f14"),e=e(),(0,a.Cn)(),e),m={class:"sidebar_overflow"},p=u((()=>(0,a._)("div",{class:"branding-title gohome"},"MV Test Tracker",-1))),g=u((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),v=u((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),k=["_theme"],y=u((()=>(0,a._)("div",{class:"theme_icon"},null,-1))),f=u((()=>(0,a._)("div",{class:"toggle_text"},"Switch Theme",-1))),w=[y,f];function b(e,t,s,i,l,o){const r=(0,a.up)("ActionsPanel"),c=(0,a.up)("ClassList"),_=(0,a.up)("SidebarToggle");return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["left-bar portal_sidebar",{active:l.sidebar_open}]),onClick:t[1]||(t[1]=(...e)=>o.show_if_inactive&&o.show_if_inactive(...e))},[(0,a._)("div",m,[p,g,o.store&&o.store.is_teacher?((0,a.wg)(),(0,a.j4)(r,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(c,(0,n.vs)((0,a.F4)(e.$attrs)),null,16),v]),(0,a._)("button",{_theme:o.store.get_theme,class:"theme_button click-action",title:"Switch Theme",onClick:t[0]||(t[0]=(...e)=>o.store.toggle_theme&&o.store.toggle_theme(...e))},w,8,k),(0,a.Wm)(_,{class:"right",onClick:o.close_sidebar},null,8,["onClick"])],2)}const C=e=>((0,a.dD)("data-v-2e4cb15c"),e=e(),(0,a.Cn)(),e),D={class:"sidebar_toggle click-action",title:"Close Sidebar"},T=C((()=>(0,a._)("div",{class:"arrow-icon"},null,-1))),$=[T];function S(e,t,s,n,i,l){return(0,a.wg)(),(0,a.iD)("button",D,$)}var x={name:"SidebarToggle"},L=s(89);const z=(0,L.Z)(x,[["render",S],["__scopeId","data-v-2e4cb15c"]]);var M=z;const j=e=>((0,a.dD)("data-v-fc002136"),e=e(),(0,a.Cn)(),e),W={class:"class_list"},E=["title"],B=j((()=>(0,a._)("hr",{class:"class_list_hr"},null,-1))),N=["onClick"],P=["title","onClick"],Z={key:0,class:"class_swatch__icon class_swatch_remove__icon"},H={key:1,class:"class_swatch__icon class_swatch_edit__icon"},I={key:0,class:"class_name"},O={key:1,class:"class_name"},U=j((()=>(0,a._)("div",{class:"class_swatch"},[(0,a._)("div",{class:"class_swatch__add_icon"})],-1))),q=j((()=>(0,a._)("span",{class:"class_name"},"Join a Class",-1))),Y=[U,q];function A(e,t,s,i,l,o){return(0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("div",{class:(0,n.C_)(["class_list__not_empty",{filtering:!!s.filtered_classes.length}])},[(0,a._)("h5",{onClick:t[0]||(t[0]=t=>e.$emit("clear_filters")),title:s.filtered_classes.length?"Click to clear filters":""}," Classes ",8,E),B,(0,a._)("div",{class:(0,n.C_)(["classes_container",{filtering:!!s.filtered_classes.length}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.classes,(t=>((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["classes_container_class",{filter_active:s.filtered_classes.includes(t.id)}]),key:t.name,onClick:s=>e.$emit("toggle_filtered_class",t.id),style:(0,n.j5)({"--color-class":t.color,"--color-class-alt":t.color+"40"})},[(0,a._)("div",{class:"class_swatch",title:o.store.is_teacher?"Edit Class":"Leave Class",onClick:e=>{o.store.is_teacher?o.edit_class(t):o.leave_class(t),e.stopPropagation()}},[o.store.is_teacher?((0,a.wg)(),(0,a.iD)("div",H)):((0,a.wg)(),(0,a.iD)("div",Z))],8,P),t.period?((0,a.wg)(),(0,a.iD)("span",I,"P"+(0,n.zw)(t.period)+" - "+(0,n.zw)(t.name),1)):((0,a.wg)(),(0,a.iD)("span",O,(0,n.zw)(t.name),1))],14,N)))),128)),(o.store.is_teacher,(0,a.wg)(),(0,a.iD)("div",{key:0,class:"classes_container_class classes_container_class__add_class",onClick:t[1]||(t[1]=t=>e.$router.push("/portal/add"))},Y))],2)],2)])}var K=s(8980),R={props:{filtered_classes:{type:Array,default:()=>[]}},name:"ClassList",computed:{store(){return(0,K.h)()},classes(){return this.store.classes}},emits:["toggle_filtered_class","clear_filters"],methods:{clean_ref(e){let[t,s]=e.split("/");return t=t.split("@")[0],[t,s].join("~")},leave_class(e){this.$router.push({name:"leave",params:{ref:this.clean_ref(e.id)}})},edit_class(e){this.$router.push({name:"editclass",params:{ref:this.clean_ref(e.id)}})}}};const F=(0,L.Z)(R,[["render",A],["__scopeId","data-v-fc002136"]]);var V=F;const J={class:"teacher_actions"},Q=["onClick"],G=(0,a._)("div",{class:"teacher_action__icon icon__add"},null,-1),X={class:"teacher_action__text"},ee=(0,a._)("div",{class:"teacher_action__icon icon__create"},null,-1),te=(0,a._)("div",{class:"teacher_action__text"},"Create a Class",-1),se=[ee,te];function ae(e,t,s,i,l,o){return(0,a.wg)(),(0,a.iD)("div",J,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.task_types,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t[0],class:"teacher_action",onClick:s=>e.$router.push({name:"newtask",params:{tasktype:t[0]}})},[G,(0,a._)("div",X,(0,n.zw)(t[1]),1)],8,Q)))),128)),(0,a._)("div",{class:"teacher_action",onClick:t[0]||(t[0]=t=>e.$router.push("/portal/create"))},se)])}var ne={data(){return{task_types:[["note","Add a Note"],["task","Schedule a Task or Test"]]}}};const ie=(0,L.Z)(ne,[["render",ae]]);var le=ie,oe=s(1708),re={name:"LeftBar",components:{SidebarToggle:M,ClassList:V,ActionsPanel:le},emits:["close_right_bar","set_class"],data(){return{sidebar_open:!1}},computed:{store(){return(0,K.h)()}},mounted(){window.addEventListener("resize",this.close_sidebar)},unmounted(){window.removeEventListener("resize",this.close_sidebar)},methods:{placeholderToast:oe.gy,show_if_inactive(){this.sidebar_open||(this.sidebar_open=!0),this.$emit("close_right_bar")},close_sidebar(){this.sidebar_open&&setTimeout((()=>this.sidebar_open=!1),10)},set_class(e){this.$emit("set_class",e)}}};const ce=(0,L.Z)(re,[["render",b],["__scopeId","data-v-1dc42f14"]]);var _e=ce;const de=e=>((0,a.dD)("data-v-5aaaf33a"),e=e(),(0,a.Cn)(),e),he={class:"sidebar_overflow"},ue=de((()=>(0,a._)("div",{class:"auth-action can-logout doprompt"},"Log Out",-1))),me=de((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),pe=de((()=>(0,a._)("div",{class:"flex_spacer"},null,-1))),ge=de((()=>(0,a._)("div",{class:"settings_icon"},null,-1))),ve=[ge];function ke(e,t,s,i,l,o){const r=(0,a.up)("UpcomingTests"),c=(0,a.up)("SidebarToggle");return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["right-bar portal_sidebar",{active:l.sidebar_open}]),onClick:t[1]||(t[1]=(...e)=>o.show_if_inactive&&o.show_if_inactive(...e))},[(0,a._)("div",he,[ue,me,(0,a.Wm)(r),pe]),(0,a._)("button",{class:"settings_button click-action",title:"Settings",onClick:t[0]||(t[0]=t=>e.$router.push("/settings"))},ve),(0,a.Wm)(c,{onClick:o.close_sidebar},null,8,["onClick"])],2)}const ye=e=>((0,a.dD)("data-v-6d1c2a97"),e=e(),(0,a.Cn)(),e),fe={class:"upcoming_tasks"},we={key:0,class:"upcoming_tasks__not_empty"},be=ye((()=>(0,a._)("h5",null,"Upcoming",-1))),Ce=ye((()=>(0,a._)("hr",{class:"upcoming_tasks_hr"},null,-1))),De={class:"tasks_container"},Te={key:1,class:"upcoming_tasks__empty"},$e=ye((()=>(0,a._)("h5",null,"No Upcoming Tasks!",-1))),Se=[$e];function xe(e,t,s,n,i,l){const o=(0,a.up)("ExamCard");return(0,a.wg)(),(0,a.iD)("div",fe,[l.tasks&&l.tasks.length?((0,a.wg)(),(0,a.iD)("div",we,[be,Ce,(0,a._)("div",De,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.tasks,(e=>((0,a.wg)(),(0,a.j4)(o,{class:"tasks_container_task",task:e,key:e.name,onClick:t=>l.show_task(e)},null,8,["task","onClick"])))),128))])])):((0,a.wg)(),(0,a.iD)("div",Te,Se))])}const Le=(0,a._)("div",{class:"task_card_icon"},[(0,a._)("div",{class:"task_card_icon_container"},[(0,a._)("div",{class:"task_card_icon_container__img"})])],-1),ze={class:"task_card_details"},Me={class:"task_card_details__title"},je={class:"task_card_details__extended"},We={class:"task_card_details__extended__date"},Ee={class:"task_card_details__extended__type"};function Be(e,t,s,i,l,o){return(0,a.wg)(),(0,a.iD)("div",{class:"task_card",style:(0,n.j5)({"--color-calendar-task":s.task.color})},[Le,(0,a._)("div",ze,[(0,a._)("div",Me,(0,n.zw)(s.task.name),1),(0,a._)("div",je,[(0,a._)("span",We,(0,n.zw)(s.task.date.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})),1),(0,a.Uk)(" Â |Â  "),(0,a._)("span",Ee,(0,n.zw)(o.type_full),1)])])],4)}var Ne={name:"ExamCard",props:{task:{type:Object,required:!0}},computed:{type_full(){return{note:"Note",task:"Assignment",test:"Test",project:"Project",quiz:"Quiz",exam:"Exam"}[this.task.type]}}};const Pe=(0,L.Z)(Ne,[["render",Be]]);var Ze=Pe,He={name:"UpcomingTasks",components:{ExamCard:Ze},computed:{store(){return(0,K.h)()},tasks(){return this.store.tasks?this.store.tasks.filter((e=>(e?.date?.getTime?e.date.getTime():0)>=Date.now()&&!e.is_assignment&&"note"!=e.type)).sort(((e,t)=>e.date<t.date?-1:e.date>t.date?1:0)).slice(0,4):[]}},methods:{show_task(e){this.$router.push({name:"viewtask",params:{ref:e.ref.replace("@mvla.net","").split("/").join("~")}})}}};const Ie=(0,L.Z)(He,[["render",xe],["__scopeId","data-v-6d1c2a97"]]);var Oe=Ie,Ue={name:"RightBar",components:{SidebarToggle:M,UpcomingTests:Oe},emits:["close_left_bar"],data(){return{sidebar_open:!1}},mounted(){window.addEventListener("resize",this.close_sidebar)},unmounted(){window.removeEventListener("resize",this.close_sidebar)},methods:{show_if_inactive(){this.sidebar_open||(this.sidebar_open=!0),this.$emit("close_left_bar")},close_sidebar(){this.sidebar_open&&setTimeout((()=>this.sidebar_open=!1),10)}}};const qe=(0,L.Z)(Ue,[["render",ke],["__scopeId","data-v-5aaaf33a"]]);var Ye=qe;const Ae=e=>((0,a.dD)("data-v-2c1bbb87"),e=e(),(0,a.Cn)(),e),Ke={class:"calendar"},Re={class:"calendar_header"},Fe=["title"],Ve={class:"calendar_actions"},Je=Ae((()=>(0,a._)("div",{class:"action_icon arrow-icon left"},null,-1))),Qe=[Je],Ge=Ae((()=>(0,a._)("div",{class:"action_icon arrow-icon right"},null,-1))),Xe=[Ge],et={class:"calendar_days_container"},tt={class:"calendar_days"},st={class:"calendar_day__weekday_label__text"},at=["_date"],nt={class:"calendar_day_date"},it={class:"calendar_day_date__short"},lt={class:"calendar_day_date__long",style:{display:"none"}},ot={class:"calendar_day_tasks"},rt=["is_note","title","onClick"],ct={key:0},_t=Ae((()=>(0,a._)("span",{class:"calendar_day_task__swatch"},null,-1))),dt=Ae((()=>(0,a._)("span",{class:"calendar_day_task__note"}," NOTE ",-1))),ht=[_t,dt],ut={key:1},mt={key:0,class:"calendar__no_tasks",style:{display:"none"}};function pt(e,t,s,i,l,o){const r=(0,a.up)("LoadingCover");return(0,a.wg)(),(0,a.iD)("main",Ke,[l.is_ready?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,class:"calendar_loading",covering:"Calendar Tasks"})),(0,a._)("div",Re,[(0,a._)("div",{class:"calendar_date",title:"Currently viewing "+l.loaded_month.toLocaleDateString(void 0,{month:"long",year:"numeric"})},(0,n.zw)(l.loaded_month.toLocaleDateString("en-US",{month:"long",year:"numeric"})),9,Fe),(0,a._)("nav",Ve,[(0,a._)("button",{class:"calendar_action",onClick:t[0]||(t[0]=(...e)=>o.prev_month&&o.prev_month(...e)),title:"Previous month"},Qe),(0,a._)("button",{class:"calendar_action",onClick:t[1]||(t[1]=(...e)=>o.this_month&&o.this_month(...e)),title:"Current month"},[(0,a._)("div",{class:(0,n.C_)(["action_icon cal-icon",{alt:l.tasks.length}])},null,2)]),(0,a._)("button",{class:"calendar_action",onClick:t[2]||(t[2]=(...e)=>o.next_month&&o.next_month(...e)),title:"Next month"},Xe)])]),(0,a._)("div",et,[(0,a._)("div",tt,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],(e=>(0,a._)("div",{class:"calendar_day calendar_day__weekday_label",key:e},[(0,a._)("span",st,(0,n.zw)(e),1)]))),64)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.days,(t=>((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["calendar_day",{calendar_day__placeholder:t.is_placeholder,calendar_day__hastask:!!t.tasks&&t.tasks.length,calendar_day__today:t.is_today}]),_date:t.date.toISOString().split("T")[0],key:t.date},[(0,a._)("div",nt,[(0,a._)("span",it,(0,n.zw)(new Date(t.date).getDate()),1),(0,a._)("span",lt,(0,n.zw)(new Date(t.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})),1)]),(0,a._)("div",ot,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.tasks,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"calendar_day_task click-action",is_note:"note"===t.type,key:t.name,title:t.classes_class,style:(0,n.j5)({"--color-calendar-task":t.color}),onClick:s=>e.$emit("taskclick",t)},["note"===t.type?((0,a.wg)(),(0,a.iD)("span",ct,ht)):((0,a.wg)(),(0,a.iD)("span",ut,(0,n.zw)(t.name),1))],12,rt)))),128))])],10,at)))),128)),o.tasks_loaded_month?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",mt," Relax! No Tasks. "))])])])}const gt=e=>((0,a.dD)("data-v-5a6b564c"),e=e(),(0,a.Cn)(),e),vt=["title"],kt=gt((()=>(0,a._)("div",{class:"loading_cover__overlay"},null,-1))),yt={class:"loading_cover__content"},ft={class:"loading_cover__content__icon"},wt=(0,a.uE)('<defs data-v-5a6b564c><circle id="dot" r="3" data-v-5a6b564c></circle></defs><g fill="var(--color-loading-dot, #000)" data-v-5a6b564c><circle cx="33%" cy="50%" r="3" data-v-5a6b564c><animate attributeName="r" values="3;7;3" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" data-v-5a6b564c></animate><animate attributeName="opacity" values="0.2;1;0.2" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" data-v-5a6b564c></animate></circle><circle cx="50%" cy="50%" r="3" data-v-5a6b564c><animate attributeName="r" values="3;7;3" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" begin="0.2s" data-v-5a6b564c></animate><animate attributeName="opacity" values="0.2;1;0.2" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" begin="0.2s" data-v-5a6b564c></animate></circle><circle cx="67%" cy="50%" r="3" data-v-5a6b564c><animate attributeName="r" values="3;7;3" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" begin="0.4s" data-v-5a6b564c></animate><animate attributeName="opacity" values="0.2;1;0.2" dur="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.42 0 0.58 1;0.42 0 0.58 1" begin="0.4s" data-v-5a6b564c></animate></circle></g>',2),bt=[wt];function Ct(e,t,s,i,l,o){return(0,a.wg)(),(0,a.iD)("div",{class:"loading_cover",title:"Loading "+s.covering},[kt,(0,a._)("div",yt,[(0,a._)("div",ft,[((0,a.wg)(),(0,a.iD)("svg",{viewBox:"0 0 100 20",style:(0,n.j5)({width:"calc(33% + 100px)",minWidth:"100px",maxWidth:"400px"})},bt,4))]),(0,a.WI)(e.$slots,"default",{},void 0,!0)])],8,vt)}var Dt={name:"LoadingCover",props:{covering:{type:String,default:"Content"}}};const Tt=(0,L.Z)(Dt,[["render",Ct],["__scopeId","data-v-5a6b564c"]]);var $t=Tt,St=s(2745),xt={name:"CalendarBlock",components:{LoadingCover:$t},props:{filtered_classes:Array,default:()=>[]},emits:["taskclick","mounted"],data(){return{loaded_month:new Date((new Date).setDate(1)),is_ready:!1,tasks:[]}},mounted(){(0,St.E)("ðŸ“… Calendar mounted"),this.$emit("mounted"),this.tasks=this.store.tasks},methods:{day_matches(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},get_day_tasks(e){return this.tasks.filter((t=>{const s=new Date(t.date);return this.day_matches(s,e)&&(!this.filtered_classes.length||this.filtered_classes.includes(t.class_id))})).sort(((e,t)=>{if("note"==e.type&&"note"!=t.type)return-1}))},next_month(){this.loaded_month=new Date(this.loaded_month.setMonth(this.loaded_month.getMonth()+1))},this_month(){this.loaded_month=new Date((new Date).setDate(1))},prev_month(){this.loaded_month=new Date(this.loaded_month.setMonth(this.loaded_month.getMonth()-1))},run_get_tasks(){this.tasks=this.store.tasks,this.is_ready=!0}},computed:{tasks_loaded_month(){return this.tasks.some((e=>{new Date(e.date);return!0}))},store(){return(0,K.h)()},days(){const e=[],t=this.loaded_month.getTime();function s(){return new Date(t)}const a=new Date(s().setDate(1)),n=new Date(s().setMonth(s().getMonth()+1,0));for(let i=a.getDay();i>0;i--){const t=new Date(s().setDate(-i));e.push({date:t,tasks:this.get_day_tasks(t),is_placeholder:!0})}for(let i=1;i<=n.getDate();i++){const t=new Date(s().setDate(i));e.push({date:t,tasks:this.get_day_tasks(t),is_today:this.day_matches(t,new Date)})}for(let i=1;e.length<42;i++){const t=new Date(s().setDate(n.getDate()+i));e.push({date:t,tasks:this.get_day_tasks(t),is_placeholder:!0})}return e}},watch:{"store.classes":{handler(e,t){e.length!=t.length&&this.is_ready&&((0,St.E)("ðŸ“¦ Classes array length changed, calendar updating tasks"),this.store.fetch_classes().then((()=>{this.run_get_tasks()})).catch((e=>{(0,St.E)("ðŸ”¥ Couldn't fetch classes",e)})))},deep:!0},"store.tasks":{handler(){this.tasks=this.store.tasks},deep:!0}}};const Lt=(0,L.Z)(xt,[["render",pt],["__scopeId","data-v-2c1bbb87"]]);var zt=Lt,Mt=s(3917),jt={name:"AppPortal",components:{LeftBar:_e,RightBar:Ye,CalendarBlock:zt,OverlayWrapper:Mt.Z},data(){return{filtered_classes:[],welcomes:["Welcome","Hi","Hello","Hey","Howdy"],loaded:!1}},computed:{close_path(){return this.$route?.query?.redirect||this.$route?.meta?.close_path},name(){return this.store.user?.displayName?.split(" ")[0]||"User"},did_survey(){return this.store.done_daily_survey},random_welcome(){return this.welcomes[Math.floor(Math.random()*this.welcomes.length)]},store(){return(0,K.h)()}},methods:{do_survey(){this.$router.replace({name:"daily",query:{redirect:this.$route.fullPath}}),new oe.OO("Please complete the daily survey to use MVTT today!",3e3)},close_left_bar(){this.$refs.LeftBar.close_sidebar()},close_right_bar(){this.$refs.RightBar.close_sidebar()},show_task(e){this.$router.push({name:"viewtask",params:{ref:e.ref.replace("@mvla.net","").split("/").join("~")}})},toggle_filtered_class(e){this.filtered_classes.includes(e)?this.filtered_classes=this.filtered_classes.filter((t=>t!==e)):this.filtered_classes.push(e)},check_and_do_survey(){this?.store?.user&&!this?.did_survey&&!0!==this.$route?.meta?.noSurvey&&this.do_survey()},check_and_do_join(){this.store.done_join_form||(this.$router.push({name:"join",query:{redirect:this.$route.fullPath}}),new oe.OO("Please fill out the join form to use MVTT!",3e3))}},mounted(){(0,St.E)("ðŸ— Portal mounted"),this.check_and_do_join(),this.check_and_do_survey(),this.store.fetch_classes().then((()=>{this.$refs.calendar.run_get_tasks(),this.loaded=!0})).catch((e=>{(0,St.E)("ðŸ”¥ Couldn't fetch classes",e)}))},watch:{did_survey(){this.check_and_do_survey()},$route(){this.check_and_do_survey()},store:{handler(){this.check_and_do_join()},deep:!0}}};const Wt=(0,L.Z)(jt,[["render",h],["__scopeId","data-v-2f1e8a39"]]);var Et=Wt}}]);
//# sourceMappingURL=480.838d7119.js.map