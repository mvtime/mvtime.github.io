{"version":3,"file":"js/54.6a633a4e.js","mappings":"yOACEA,EAAAA,EAAAA,IASEC,EAAA,CARCC,cAAc,EACdC,MAAK,WAAeC,EAAAC,KAAKC,yBACzBC,KAAMC,EAAAC,SACNC,gBAAiBF,EAAAG,KACjBC,WAAW,EACXC,UAAW,SACXC,OAAIC,EAAA,KAAAA,EAAA,GAAAC,GAAEZ,EAAAa,MAAM,UACZC,YAAa,Y,2FAalB,GACEC,KAAM,eACNC,WAAY,CACVC,MAAKA,EAAAA,GAEPC,MAAO,CAAC,SACRC,IAAAA,GACE,MAAO,CAAEC,KAAM,GACjB,EACAC,OAAAA,GACEC,KAAKF,KAAOE,KAAKC,QAAQC,QAAQJ,KAC5BE,KAAKF,KAKRE,KAAKF,KAAOE,KAAKF,KAAKK,WAAW,QAAUH,KAAKF,KAAQ,WAAUE,KAAKF,QAJvE,IAAIM,EAAAA,GAAa,yBACjBJ,KAAKT,MAAM,UAKb,IACE,MAAMc,EAAM,IAAIC,IAAIN,KAAKF,MAEzB,GACEE,KAAKrB,KAAK4B,sBAAwBF,EAAIG,MACtCH,EAAIG,KAAKC,SAAS,IAAMT,KAAKrB,KAAK4B,sBAIlC,OAFAP,KAAKU,QAAQC,IAAK,qBAAoBX,KAAKrB,KAAKC,iCAChDoB,KAAKf,OAIP,MAAM2B,GAAmBZ,KAAKrB,KAAKkC,6BAA+B,IAC/DC,MAAM,KACNC,MAAMP,GACEA,EAAKQ,SAAS,KAAOX,EAAIG,KAAKC,SAASD,EAAKS,QAAQ,IAAK,KAAOZ,EAAIG,MAAQA,IAEnFI,IACFZ,KAAKU,QAAQC,IAAK,uCAAsCC,mBAExDZ,KAAKf,OAET,CAAE,MACAe,KAAKU,QAAQC,IACV,0CAAyCX,KAAKrB,KAAKC,2BAExD,CACF,EACAsC,SAAU,CACRnC,QAAAA,GACE,OAAOiB,KAAKF,KACP,wCAAuCE,KAAKF,SAAS,IAAIQ,IAAIN,KAAKF,MAAMU,iEAGtER,KAAKrB,KAAKC,0EAEb,uBACN,GAEFuC,QAAS,CACPlC,IAAAA,GACEe,KAAKT,MAAM,SACX6B,OAAOC,SAASJ,QAAQjB,KAAKF,KAC/B,I,UC9EJ,MAAMwB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://mvtime/./src/views/Home/Redirect.vue","webpack://mvtime/./src/views/Home/Redirect.vue?00b7"],"sourcesContent":["<template>\n  <Modal\n    :can_continue=\"true\"\n    :title=\"'Leaving ' + $env.VUE_APP_BRAND_SHORT_NAME\"\n    :html=\"contents\"\n    :continue_action=\"open\"\n    :skippable=\"true\"\n    :skip_text=\"'Cancel'\"\n    @skip=\"$emit('close')\"\n    :submit_text=\"'Continue'\"\n  />\n</template>\n\n<script>\n/**\n * @file Redirect.vue\n * @displayName Redirect\n * @description A view that redirects to the path specified in the route \"path\" prop.\n */\n\nimport Modal from \"@/components/Modal/Modal.vue\";\nimport { WarningToast } from \"@svonk/util\";\nexport default {\n  name: \"RedirectView\",\n  components: {\n    Modal,\n  },\n  emits: [\"close\"],\n  data() {\n    return { path: \"\" };\n  },\n  mounted() {\n    this.path = this.$route?.params?.path;\n    if (!this.path) {\n      new WarningToast(\"Missing redirect path\");\n      this.$emit(\"close\");\n    } else {\n      // fix path to add protocol if it's missing\n      this.path = this.path.startsWith(\"http\") ? this.path : `https://${this.path}`;\n    }\n    try {\n      const url = new URL(this.path);\n      // check against brand domain\n      if (\n        this.$env.VUE_APP_BRAND_DOMAIN == url.host ||\n        url.host.endsWith(\".\" + this.$env.VUE_APP_BRAND_DOMAIN)\n      ) {\n        this.$status.log(`ðŸ”— Redirecting to ${this.$env.VUE_APP_BRAND_SHORT_NAME}`);\n        this.open();\n        return;\n      }\n      // check against allowed domains (may have * for wildcards) in this.$env.VUE_APP_BRAND_ALLOWED_HOSTS\n      const allowed_pattern = (this.$env.VUE_APP_BRAND_ALLOWED_HOSTS || \"\")\n        .split(\",\")\n        .some((host) => {\n          return host.includes(\"*\") ? url.host.endsWith(host.replace(\"*\", \"\")) : url.host == host;\n        });\n      if (allowed_pattern) {\n        this.$status.log(`ðŸ”— Redirecting to permitted pattern ${allowed_pattern} automatically`);\n\n        this.open();\n      }\n    } catch {\n      this.$status.log(\n        `Couldn't not verify path domain is not ${this.$env.VUE_APP_BRAND_SHORT_NAME}`\n      );\n    }\n  },\n  computed: {\n    contents() {\n      return this.path\n        ? `You are being redirected to <a href=\"${this.path}\">${new URL(this.path).host}</a>\n            <br><br>\n           Content outside of ${\n             this.$env.VUE_APP_BRAND_SHORT_NAME\n           } is not vetted by our team, and may be harmful.`\n        : \"Missing redirect path\";\n    },\n  },\n  methods: {\n    open() {\n      this.$emit(\"close\");\n      window.location.replace(this.path);\n    },\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./Redirect.vue?vue&type=template&id=38201773\"\nimport script from \"./Redirect.vue?vue&type=script&lang=js\"\nexport * from \"./Redirect.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_Modal","can_continue","title","_ctx","$env","VUE_APP_BRAND_SHORT_NAME","html","$options","contents","continue_action","open","skippable","skip_text","onSkip","_cache","$event","$emit","submit_text","name","components","Modal","emits","data","path","mounted","this","$route","params","startsWith","WarningToast","url","URL","VUE_APP_BRAND_DOMAIN","host","endsWith","$status","log","allowed_pattern","VUE_APP_BRAND_ALLOWED_HOSTS","split","some","includes","replace","computed","methods","window","location","__exports__","render"],"sourceRoot":""}