(self["webpackChunkmvtime"]=self["webpackChunkmvtime"]||[]).push([[770],{770:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return R}});var s=o(6768),n=o(4232),r=o(5130);const a=e=>((0,s.Qi)("data-v-b34986d8"),e=e(),(0,s.jt)(),e),i={class:"onboardng",ref:"modal",id:"join_modal"},l={class:"overlay_contents_wrapper nopad"},c={class:"modal_art_part contrast_small_dark"},u={key:0,class:"overlay_contents overlay_contents__page overlay_more_pad_horizontal pad_overlay"},d={class:"header_style modal_header_title overlay_title"},_={class:"overlay_inputs inputs_column"},p=a((()=>(0,s.Lk)("option",{class:"placeholder_text",value:"",hidden:"",disabled:"",selected:""},"Campus Role",-1))),m=["value"],h=a((()=>(0,s.Lk)("option",{class:"break_text",value:"",disabled:""},"-----",-1))),g={value:"teacher"},f=["placeholder"],v={key:1,class:"overlay_contents pad_overlay overlay_contents__page img_container__page"},y=a((()=>(0,s.Lk)("img",{class:"auth_load_icon loading_icon",alt:"Loading Icon"},null,-1))),k=[y],$={class:"bottom_actions"},b=a((()=>(0,s.Lk)("div",{class:"flex_spacer"},null,-1))),x=["disabled"],E={class:"desktop_only"};function j(e,t,o,a,y,j){const C=(0,s.gN)("lazy");return(0,s.uX)(),(0,s.CE)("main",i,[(0,s.Lk)("div",l,[(0,s.bo)((0,s.Lk)("img",c,null,512),[[C,j.source]]),"form"==y.page?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("h2",d," Join the "+(0,n.v_)(e.$env.VUE_APP_BRAND_NAME_SHORT)+" Beta ",1),(0,s.Lk)("div",_,[(0,s.bo)((0,s.Lk)("input",{ref:"name",class:"styled_input styled_obj",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.form.name=e),placeholder:"Your Name",enterkeyhint:"next",onKeydown:t[1]||(t[1]=(0,r.jR)((t=>e.$refs.grade.focus()),["enter"]))},null,544),[[r.Jo,y.form.name]]),(0,s.bo)((0,s.Lk)("select",{class:"styled_input styled_obj","onUpdate:modelValue":t[2]||(t[2]=e=>y.form.grade=e),ref:"grade",enterkeyhint:"next",onKeydown:t[3]||(t[3]=(0,r.jR)((t=>e.$refs.detail.focus()),["enter"]))},[p,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(JSON.parse(e.$env.VUE_APP_ORG_GRADES||y.default_grades),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e[0],value:e[0]},(0,n.v_)(e[1]),9,m)))),128)),h,(0,s.Lk)("option",g,(0,n.v_)(e.$env.VUE_APP_ORG_TEACHER_GRADE||"Teacher"),1)],544),[[r.u1,y.form.grade]]),(0,s.bo)((0,s.Lk)("textarea",{ref:"detail",enterkeyhint:"done",onKeydown:t[4]||(t[4]=(0,r.jR)(((...e)=>j.action&&j.action(...e)),["enter"])),"onUpdate:modelValue":t[5]||(t[5]=e=>y.form.usage=e),class:"styled_input styled_textarea styled_obj",type:"text",placeholder:`How will you use ${e.$env.VUE_APP_BRAND_NAME_SHORT} (optional)`},null,40,f),[[r.Jo,y.form.usage]])])])):((0,s.uX)(),(0,s.CE)("div",v,k))]),(0,s.Lk)("div",$,["form"==y.page?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"close_action click_escape",onClick:t[6]||(t[6]=t=>e.$emit("close"))},(0,n.v_)("form"==y.page&&""==y.form.name&&""==y.form.grade?"Close":"Cancel"),1)):(0,s.Q3)("",!0),b,(0,s.Lk)("button",{class:"continue_action",disabled:!j.contents_ready,onClick:t[7]||(t[7]=(...e)=>j.action&&j.action(...e))},[(0,s.eW)((0,n.v_)(j.continue_text[0]),1),(0,s.Lk)("span",E,(0,n.v_)(j.continue_text[1]),1)],8,x)])],512)}o(4114);var C=o(4186),L={emits:["close"],data(){return{default_grades:'[["student", "Student"]]',page:"form",form:{name:"",grade:"",usage:""}}},computed:{contents_ready(){return"form"==this.page&&(this.form.name.length>=2&&""!=this.form.grade)},continue_text(){return"form"==this.page?this.$store?.user?["Save"]:["Continue"," to Sign-Up"]:this.$store?.user?["Saving...",""]:["Authenticating","..."]},source(){try{return o(6553)(`./${this.combo}.png`)}catch(e){return"err"}},combo(){let e=window.localStorage.getItem("home_art"),t=e?e.split("s")[1][0]:null;return"ls"+t}},mounted(){this.$store.done_join_form&&(this.$emit("close"),new C.MY("You've already joined!",2e3)),this.$store?.user&&(this.form.name=this.$store.user?.displayName||"")},methods:{action(){this.contents_ready&&"form"==this.page&&(this.$route?.query?.redirect||this.$router.replace({name:"join",query:{redirect:"/portal"}}),this.page="auth",this.$status.log("📝 Saving join form:",this.form),this.$store?.user?(this.$store.save_join_form(this.form),this.check_store_and_close()):(this.$status.log("🔑 Triggering auth"),this.$store.login().then((()=>{this.$store.save_join_form(this.form),this.check_store_and_close()})).catch((e=>{this.$status.error("💾 Error logging in:",e),new C.MY("Couldn't complete authentication; "+e,2e3),this.page="form"}))))},check_store_and_close(){this.$store.done_join_form&&this.$emit("close")}},watch:{"$store.done_join_form":{handler(){this.check_store_and_close()},deep:!0},"$store.user":{handler(){this.$store?.user||this.$router.push({name:"home",query:{redirect:this.$route.query?.redirect}})},deep:!0}}},w=o(1241);const A=(0,w.A)(L,[["render",j],["__scopeId","data-v-b34986d8"]]);var R=A},6553:function(e,t,o){var s={"./ls0.png":1201,"./ls1.png":9160,"./ls2.png":1139,"./ls3.png":1306,"./ls4.png":3365,"./ls5.png":1740,"./ls6.png":8775};function n(e){var t=r(e);return o(t)}function r(e){if(!o.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=6553},1201:function(e,t,o){"use strict";e.exports=o.p+"img/ls0.de217599.png"},9160:function(e,t,o){"use strict";e.exports=o.p+"img/ls1.68919c83.png"},1139:function(e,t,o){"use strict";e.exports=o.p+"img/ls2.ea41213d.png"},1306:function(e,t,o){"use strict";e.exports=o.p+"img/ls3.eaac83e7.png"},3365:function(e,t,o){"use strict";e.exports=o.p+"img/ls4.bd2bf00c.png"},1740:function(e,t,o){"use strict";e.exports=o.p+"img/ls5.65e9e65f.png"},8775:function(e,t,o){"use strict";e.exports=o.p+"img/ls6.ba3ed9f9.png"}}]);
//# sourceMappingURL=770.443e5883.js.map